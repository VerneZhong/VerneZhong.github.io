<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Verne Blog</title>
  <icon>https://www.gravatar.com/avatar/d4161917a7dfe52bfa1d2d10e77344fd</icon>
  <subtitle>å¾ˆå¤šäººä¸æ›¾è§è¿‡å¤ªé˜³ï¼Œä¹Ÿå°±å¯ä»¥å¿å—é»‘æš—!</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://chivalry727.github.io/"/>
  <updated>2025-03-01T11:13:31.512Z</updated>
  <id>https://chivalry727.github.io/</id>
  
  <author>
    <name>Verne.Zhong</name>
    <email>verne.zhong@gmail.com</email>
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹å¤‡å¿˜å½•æ¨¡å¼</title>
    <link href="https://chivalry727.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F/"/>
    <id>https://chivalry727.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F/</id>
    <published>2025-03-01T04:06:04.000Z</published>
    <updated>2025-03-01T11:13:31.512Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://github.com/user-attachments/assets/de961272-1096-4aec-801b-03dc54eacb0e"></p><span id="more"></span><h2 id="è®¾è®¡æ¨¡å¼ä¹‹å¤‡å¿˜å½•æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼ä¹‹å¤‡å¿˜å½•æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¹‹å¤‡å¿˜å½•æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼ä¹‹å¤‡å¿˜å½•æ¨¡å¼</h2><h3 id="å¤‡å¿˜å½•æ¨¡å¼"><a href="#å¤‡å¿˜å½•æ¨¡å¼" class="headerlink" title="å¤‡å¿˜å½•æ¨¡å¼"></a>å¤‡å¿˜å½•æ¨¡å¼</h3><p>å®šä¹‰ï¼šå¤‡å¿˜å½•æ¨¡å¼ç”¨äºåœ¨ä¸ç ´åå°è£…çš„å‰æä¸‹ï¼Œæ•è·å¯¹è±¡çš„çŠ¶æ€å¹¶åœ¨ä»¥åæ¢å¤ã€‚å®ƒæä¾›äº†ä¸€ç§æ•°æ®å¿«ç…§çš„æœºåˆ¶ï¼Œä½¿å¾—å¯¹è±¡å¯ä»¥å›æ»šåˆ°æŸä¸ªå†å²çŠ¶æ€ï¼Œå¸¸ç”¨äºæ’¤é”€ï¼ˆUndoï¼‰æ“ä½œã€‚</p><h4 id="æ ¸å¿ƒè§’è‰²"><a href="#æ ¸å¿ƒè§’è‰²" class="headerlink" title="æ ¸å¿ƒè§’è‰²"></a>æ ¸å¿ƒè§’è‰²</h4><p>1.å‘èµ·äººï¼ˆOriginatorï¼‰</p><ul><li>è´Ÿè´£åˆ›å»ºå¤‡å¿˜å½•ï¼Œå¹¶å­˜å‚¨å½“å‰çŠ¶æ€ã€‚</li><li>å¯ä»¥æ ¹æ®å¤‡å¿˜å½•æ¢å¤å…ˆå‰çš„çŠ¶æ€ã€‚</li></ul><p>2.å¤‡å¿˜å½•ï¼ˆMementoï¼‰</p><ul><li>å­˜å‚¨å‘èµ·äººçš„å†…éƒ¨çŠ¶æ€ã€‚</li><li>ä¿æŠ¤å‘èµ·äººçš„çŠ¶æ€ä¸è¢«å¤–ç•Œä¿®æ”¹ï¼ˆé€šå¸¸æ˜¯ä¸å¯å˜çš„ï¼‰ã€‚</li></ul><p>3.ç®¡ç†è€…ï¼ˆCaretakerï¼‰</p><ul><li>è´Ÿè´£ä¿å­˜å’Œæ¢å¤å¤‡å¿˜å½•ã€‚</li><li>ä¸ä¼šä¿®æ”¹å¤‡å¿˜å½•çš„å†…å®¹ï¼Œåªç”¨äºå­˜å‚¨å’Œæä¾›ç»™Originatorè¿›è¡Œæ¢å¤ã€‚</li></ul><h3 id="ç¤ºä¾‹ä»£ç ï¼ˆJavaå®ç°ï¼‰"><a href="#ç¤ºä¾‹ä»£ç ï¼ˆJavaå®ç°ï¼‰" class="headerlink" title="ç¤ºä¾‹ä»£ç ï¼ˆJavaå®ç°ï¼‰"></a>ç¤ºä¾‹ä»£ç ï¼ˆJavaå®ç°ï¼‰</h3><p>1ï¸âƒ£ <strong>å¤‡å¿˜å½•ï¼ˆMementoï¼‰</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¤‡å¿˜å½•ï¼šå­˜å‚¨çŠ¶æ€</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.Zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2025/03/01 19:46</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Memento</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * çŠ¶æ€</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String state;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Memento</span><span class="params">(String state)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.state = state;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getState</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> state;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2ï¸âƒ£ <strong>å‘èµ·äººï¼ˆOriginatorï¼‰</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å‘èµ·äººï¼šåˆ›å»ºå’Œæ¢å¤å¤‡å¿˜å½•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.Zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2025/03/01 19:48</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Originator</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String state;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setState</span><span class="params">(String state)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.state = state;</span><br><span class="line">        System.out.println(<span class="string">&quot;å½“å‰çŠ¶æ€ï¼š &quot;</span> + state);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¿å­˜çŠ¶æ€</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Memento <span class="title function_">saveStateToMemento</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Memento</span>(state);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¢å¤å¤‡å¿˜å½•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> memento</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">restoreFromMemento</span><span class="params">(Memento memento)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.state = memento.getState();</span><br><span class="line">        System.out.println(<span class="string">&quot;çŠ¶æ€æ¢å¤ä¸ºï¼š&quot;</span> + state);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Originator&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;state=&#x27;&quot;</span> + state + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3ï¸âƒ£ <strong>ç®¡ç†è€…ï¼ˆCaretakerï¼‰</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç®¡ç†è€…ï¼šå­˜å‚¨å¤šä¸ªå¤‡å¿˜å½•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.Zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2025/03/01 19:53</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Caretaker</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> List&lt;Memento&gt; history = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addMemento</span><span class="params">(Memento memento)</span> &#123;</span><br><span class="line">        history.add(memento);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Memento <span class="title function_">getMemento</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> history.get(index);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ›å»ºæµ‹è¯•ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æµ‹è¯•ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.Zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2025/03/01 19:54</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MementoPatternDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Originator</span> <span class="variable">originator</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Originator</span>();</span><br><span class="line">        <span class="type">Caretaker</span> <span class="variable">caretaker</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Caretaker</span>();</span><br><span class="line"></span><br><span class="line">        originator.setState(<span class="string">&quot;çŠ¶æ€1&quot;</span>);</span><br><span class="line">        caretaker.addMemento(originator.saveStateToMemento());</span><br><span class="line"></span><br><span class="line">        originator.setState(<span class="string">&quot;çŠ¶æ€2&quot;</span>);</span><br><span class="line">        caretaker.addMemento(originator.saveStateToMemento());</span><br><span class="line"></span><br><span class="line">        originator.setState(<span class="string">&quot;çŠ¶æ€3&quot;</span>);</span><br><span class="line">        caretaker.addMemento(originator.saveStateToMemento());</span><br><span class="line">        System.out.println(<span class="string">&quot;å½“å‰çŠ¶æ€ï¼š&quot;</span> + originator);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ¢å¤åˆ°ä¹‹å‰çš„çŠ¶æ€</span></span><br><span class="line">        <span class="comment">// æ¢å¤åˆ°çŠ¶æ€1</span></span><br><span class="line">        originator.restoreFromMemento(caretaker.getMemento(<span class="number">0</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœ</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">å½“å‰çŠ¶æ€ï¼š çŠ¶æ€<span class="number">1</span></span><br><span class="line">å½“å‰çŠ¶æ€ï¼š çŠ¶æ€<span class="number">2</span></span><br><span class="line">å½“å‰çŠ¶æ€ï¼š çŠ¶æ€<span class="number">3</span></span><br><span class="line">å½“å‰çŠ¶æ€ï¼šOriginator&#123;<span class="keyword">state</span>=&#x27;çŠ¶æ€<span class="number">3</span>&#x27;&#125;</span><br><span class="line">çŠ¶æ€æ¢å¤ä¸ºï¼šçŠ¶æ€<span class="number">1</span></span><br></pre></td></tr></table></figure><h3 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h3><ul><li>æ–‡æœ¬ç¼–è¾‘å™¨çš„æ’¤é”€åŠŸèƒ½ï¼ˆWordã€è®°äº‹æœ¬ï¼‰</li><li>æ¸¸æˆå­˜æ¡£ï¼ˆä¿å­˜å’Œæ¢å¤æ¸¸æˆè¿›åº¦ï¼‰</li><li>äº‹åŠ¡ç®¡ç†ï¼ˆæ•°æ®åº“äº‹åŠ¡å›æ»šï¼‰</li><li>IDEä»£ç æ’¤é”€/æ¢å¤ï¼ˆCtrl+Z &amp; Ctrl+Yï¼‰</li></ul><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ol><li>å¤‡å¿˜å½•æ¨¡å¼ç”¨äºä¿å­˜å¯¹è±¡çš„å†å²çŠ¶æ€ï¼Œä¾¿äºåç»­æ¢å¤ã€‚</li><li>é€‚ç”¨äºæ’¤é”€ã€æ¢å¤ã€å­˜æ¡£ç­‰åŠŸèƒ½ï¼Œä½†éœ€è¦æ³¨æ„å†…å­˜æ¶ˆè€—ã€‚</li><li>ä¸‰å¤§è§’è‰²ï¼ˆå‘èµ·äººã€å¤‡å¿˜å½•ã€ç®¡ç†è€…ï¼‰å„å¸å…¶èŒï¼Œä¿è¯å°è£…æ€§ã€‚</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://github.com/user-attachments/assets/de961272-1096-4aec-801b-03dc54eacb0e&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://chivalry727.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="ä¸­ä»‹è€…æ¨¡å¼" scheme="https://chivalry727.github.io/tags/%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
    
      <category term="Memento Pattern" scheme="https://chivalry727.github.io/tags/Memento-Pattern/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹ä¸­ä»‹è€…æ¨¡å¼</title>
    <link href="https://chivalry727.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
    <id>https://chivalry727.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F/</id>
    <published>2025-02-28T12:33:42.000Z</published>
    <updated>2025-03-01T03:58:37.289Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://github.com/user-attachments/assets/610c0eed-59c7-4084-9bb5-6fc1bdaa6c53"></p><span id="more"></span><h2 id="è®¾è®¡æ¨¡å¼ä¹‹ä¸­ä»‹è€…æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼ä¹‹ä¸­ä»‹è€…æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¹‹ä¸­ä»‹è€…æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼ä¹‹ä¸­ä»‹è€…æ¨¡å¼</h2><h3 id="ä»€ä¹ˆæ˜¯ä¸­ä»‹è€…æ¨¡å¼ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ä¸­ä»‹è€…æ¨¡å¼ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ä¸­ä»‹è€…æ¨¡å¼ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ä¸­ä»‹è€…æ¨¡å¼ï¼Ÿ</h3><ul><li>ä¸­ä»‹è€…æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ç”¨ä¸€ä¸ªä¸­ä»‹è€…å¯¹è±¡æ¥å°è£…ä¸€ç»„å¯¹è±¡ä¹‹é—´çš„äº¤äº’ï¼Œä½¿å¯¹è±¡ä¹‹é—´ä¸éœ€è¦ç›¸äº’å¼•ç”¨ï¼Œä»è€Œé™ä½è€¦åˆæ€§ã€‚</li></ul><h3 id="ä¸­ä»‹è€…æ¨¡å¼çš„æ ¸å¿ƒæ¦‚å¿µ"><a href="#ä¸­ä»‹è€…æ¨¡å¼çš„æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="ä¸­ä»‹è€…æ¨¡å¼çš„æ ¸å¿ƒæ¦‚å¿µ"></a>ä¸­ä»‹è€…æ¨¡å¼çš„æ ¸å¿ƒæ¦‚å¿µ</h3><h5 id="Â·-é—®é¢˜ï¼š"><a href="#Â·-é—®é¢˜ï¼š" class="headerlink" title="Â· é—®é¢˜ï¼š"></a>Â· é—®é¢˜ï¼š</h5><p>â€‹    åœ¨å¤æ‚ç³»ç»Ÿä¸­ï¼Œå¤šä¸ªå¯¹è±¡ä¹‹é—´å¯èƒ½ä¼šç›´æ¥é€šä¿¡ï¼Œå¯¼è‡´è€¦åˆåº¦è¿‡é«˜ï¼Œç»´æŠ¤èµ·æ¥ååˆ†å›°éš¾ã€‚</p><h5 id="Â·-è§£å†³æ–¹æ¡ˆï¼š"><a href="#Â·-è§£å†³æ–¹æ¡ˆï¼š" class="headerlink" title="Â· è§£å†³æ–¹æ¡ˆï¼š"></a>Â· è§£å†³æ–¹æ¡ˆï¼š</h5><p>â€‹    é€šè¿‡å¼•å…¥ä¸­ä»‹è€…ï¼ˆMediatorï¼‰ï¼Œè®©å¯¹è±¡ä¸å†ç›´æ¥é€šä¿¡ï¼Œè€Œæ˜¯é€šè¿‡ä¸­ä»‹è€…åè°ƒå®ƒä»¬çš„äº¤äº’ã€‚</p><h5 id="Â·-ä¼˜ç‚¹"><a href="#Â·-ä¼˜ç‚¹" class="headerlink" title="Â· ä¼˜ç‚¹"></a>Â· ä¼˜ç‚¹</h5><ul><li>é™ä½å¯¹è±¡é—´çš„è€¦åˆæ€§ï¼Œæ¯ä¸ªå¯¹è±¡ä¸éœ€è¦çŸ¥é“å…¶ä»–å¯¹è±¡çš„å­˜åœ¨ã€‚</li><li>æ›´å®¹æ˜“ç»´æŠ¤å’Œæ‰©å±•ï¼Œæ–°å¢å¯¹è±¡æ—¶ä¸å½±å“ç°æœ‰å¯¹è±¡ã€‚</li><li>ä¼˜åŒ–é€šä¿¡æ–¹å¼ï¼Œé¿å…å¯¹è±¡é—´è¿‡åº¦ä¾èµ–ã€‚</li></ul><h5 id="Â·-ç¼ºç‚¹"><a href="#Â·-ç¼ºç‚¹" class="headerlink" title="Â· ç¼ºç‚¹"></a>Â· ç¼ºç‚¹</h5><ul><li>ä¸­ä»‹è€…å¯èƒ½å˜å¾—å¤æ‚ï¼Œå¦‚æœå¤„ç†çš„å¯¹è±¡è¿‡å¤šï¼Œå¯èƒ½ä¼šå˜æˆâ€œä¸Šå¸ç±»â€ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚</li></ul><h3 id="ä¾‹å­ï¼šé£æœºå¡”å°æ§åˆ¶"><a href="#ä¾‹å­ï¼šé£æœºå¡”å°æ§åˆ¶" class="headerlink" title="ä¾‹å­ï¼šé£æœºå¡”å°æ§åˆ¶"></a>ä¾‹å­ï¼šé£æœºå¡”å°æ§åˆ¶</h3><p> å‡è®¾æœ‰å¤šä¸ªé£æœºåœ¨æœºåœºèµ·é£å’Œé™è½ï¼Œå¦‚æœæ¯æ¶é£æœºéƒ½è¦ç›´æ¥å’Œå…¶ä»–é£æœºé€šä¿¡ï¼Œå°±ä¼šéå¸¸æ··ä¹±ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥å¡”å°ï¼ˆä¸­ä»‹è€…ï¼‰ï¼Œè®©æ‰€æœ‰é£æœºé€šè¿‡å¡”å°è¿›è¡Œåè°ƒã€‚</p><h3 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h3><p><strong>1ï¸âƒ£ å®šä¹‰ä¸­ä»‹è€…æ¥å£</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸­ä»‹è€…æ¥å£ï¼Œå®šä¹‰é€šä¿¡è§„åˆ™</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.Zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2025/02/28 21:47</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AirTrafficControl</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">sendMessage</span><span class="params">(String message, Airplane airplane)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2ï¸âƒ£ å…·ä½“ä¸­ä»‹è€…ï¼ˆå¡”å°ï¼‰</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å…·ä½“çš„ä¸­ä»‹è€…ï¼ˆå¡”å°ï¼‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.Zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2025/02/28 21:53</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ControlTower</span> <span class="keyword">implements</span> <span class="title class_">AirTrafficControl</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> List&lt;Airplane&gt; airplanes = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ³¨å†Œé£æœº</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> airplane</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">registerAirplane</span><span class="params">(Airplane airplane)</span> &#123;</span><br><span class="line">        airplanes.add(airplane);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€šè¿‡ä¸­ä»‹è€…å‘é€æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> message</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sender</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMessage</span><span class="params">(String message, Airplane sender)</span> &#123;</span><br><span class="line">        airplanes.forEach(airplane -&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span> (airplane != sender) &#123;</span><br><span class="line">                airplane.receiveMessage(message);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>3ï¸âƒ£ å®šä¹‰åŒäº‹ç±»ï¼ˆé£æœºï¼‰</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é£æœºæŠ½è±¡ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.Zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2025/02/28 21:47</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Airplane</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> AirTrafficControl controlTower;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Airplane</span><span class="params">(AirTrafficControl controlTower)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.controlTower = controlTower;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">sendMessage</span><span class="params">(String message)</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">receiveMessage</span><span class="params">(String message)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>4ï¸âƒ£ å…·ä½“é£æœºç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å…·ä½“é£æœºA</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.Zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2025/02/28 21:57</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Boeing737</span> <span class="keyword">extends</span> <span class="title class_">Airplane</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Boeing737</span><span class="params">(AirTrafficControl controlTower)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(controlTower);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMessage</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Boeing737 å‘é€æ¶ˆæ¯ï¼š&quot;</span> + message);</span><br><span class="line">        controlTower.sendMessage(message, <span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receiveMessage</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Boeing737 æ”¶åˆ°æ¶ˆæ¯ï¼š&quot;</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å…·ä½“é£æœº B</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.Zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2025/02/28 21:59</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AirbusA320</span> <span class="keyword">extends</span> <span class="title class_">Airplane</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AirbusA320</span><span class="params">(AirTrafficControl controlTower)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(controlTower);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMessage</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;AirbusA320 å‘é€æ¶ˆæ¯ï¼š&quot;</span> + message);</span><br><span class="line">        controlTower.sendMessage(message, <span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receiveMessage</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;AirbusA320 æ”¶åˆ°æ¶ˆæ¯ï¼š&quot;</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>5ï¸âƒ£ æµ‹è¯•ä»£ç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æµ‹è¯•mainæ–¹æ³•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.Zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2025/02/28 22:00</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MediatorPatternDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ControlTower</span> <span class="variable">tower</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ControlTower</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">Airplane</span> <span class="variable">plane1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Boeing737</span>(tower);</span><br><span class="line">        <span class="type">Airplane</span> <span class="variable">plane2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AirbusA320</span>(tower);</span><br><span class="line"></span><br><span class="line">        tower.registerAirplane(plane1);</span><br><span class="line">        tower.registerAirplane(plane2);</span><br><span class="line"></span><br><span class="line">        plane1.sendMessage(<span class="string">&quot;è¯·æ±‚èµ·é£ğŸ›«&quot;</span>);</span><br><span class="line">        plane2.sendMessage(<span class="string">&quot;è¯·æ±‚é™è½ğŸ›¬&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ğŸ›« è¿è¡Œç»“æœ</strong></p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Boeing737 </span>å‘é€æ¶ˆæ¯ï¼šè¯·æ±‚èµ·é£ğŸ›«</span><br><span class="line">AirbusA320 æ”¶åˆ°æ¶ˆæ¯ï¼šè¯·æ±‚èµ·é£ğŸ›«</span><br><span class="line">AirbusA320 å‘é€æ¶ˆæ¯ï¼šè¯·æ±‚é™è½ğŸ›¬</span><br><span class="line"><span class="keyword">Boeing737 </span>æ”¶åˆ°æ¶ˆæ¯ï¼šè¯·æ±‚é™è½ğŸ›¬</span><br></pre></td></tr></table></figure><h3 id="ğŸ“Œ-é€‚ç”¨åœºæ™¯"><a href="#ğŸ“Œ-é€‚ç”¨åœºæ™¯" class="headerlink" title="ğŸ“Œ é€‚ç”¨åœºæ™¯"></a><strong>ğŸ“Œ é€‚ç”¨åœºæ™¯</strong></h3><ul><li>GUIç»„ä»¶äº¤äº’ï¼šæŒ‰é’®ã€è¾“å…¥æ¡†ã€å¤é€‰æ¡†é€šè¿‡ä¸­ä»‹è€…åè°ƒï¼Œè€Œä¸æ˜¯ç›´æ¥è°ƒç”¨ã€‚</li><li>èŠå¤©å®¤ï¼šæ‰€æœ‰ç”¨æˆ·é€šè¿‡æœåŠ¡å™¨ï¼ˆä¸­ä»‹è€…ï¼‰å‘é€å’Œæ¥æ”¶æ¶ˆæ¯ã€‚</li><li>ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿï¼šå„ä¸ªå­ç³»ç»Ÿä¸ç›´æ¥é€šä¿¡ï¼Œè€Œæ˜¯é€šè¿‡ä»»åŠ¡è°ƒåº¦ä¸­å¿ƒåè°ƒã€‚</li></ul><h3 id="ğŸ“Œ-æ€»ç»“"><a href="#ğŸ“Œ-æ€»ç»“" class="headerlink" title="ğŸ“Œ æ€»ç»“"></a><strong>ğŸ“Œ æ€»ç»“</strong></h3><ul><li>æ ¸å¿ƒæ€æƒ³ï¼šè®©å¤šä¸ªå¯¹è±¡é€šè¿‡ä¸­ä»‹è€…äº¤äº’ï¼Œè€Œä¸æ˜¯ç›´æ¥é€šä¿¡ï¼Œé™ä½è€¦åˆ</li><li>ä¼˜ç‚¹ï¼šé™ä½å¯¹è±¡ä¹‹é—´çš„ä¾èµ–ï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œæ‰©å±•æ€§ã€‚</li><li>ç¼ºç‚¹ï¼šä¸­ä»‹è€…å¯èƒ½å˜å¾—å¤æ‚ï¼Œæˆä¸ºâ€œä¸Šå¸ç±»â€œã€‚</li><li>åº”ç”¨åœºæ™¯ï¼šGUIç»„ä»¶ã€èŠå¤©å®¤ã€ä»»åŠ¡è°ƒåº¦ã€é£æœºå¡”å°ã€å¾®æœåŠ¡é€šä¿¡ç­‰ã€‚</li></ul><p>ä¸­ä»‹è€…æ¨¡å¼é€šè¿‡ä¸€ä¸ªä¸­é—´å¯¹è±¡æ¥åè°ƒå¤šä¸ªå¯¹è±¡çš„äº¤äº’ï¼Œé¿å…å¯¹è±¡ä¹‹é—´ç›´æ¥è€¦åˆï¼Œæå‡ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§å’Œæ‰©å±•æ€§ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://github.com/user-attachments/assets/610c0eed-59c7-4084-9bb5-6fc1bdaa6c53&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://chivalry727.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="ä¸­ä»‹è€…æ¨¡å¼" scheme="https://chivalry727.github.io/tags/%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
    
      <category term="Mediator Pattern" scheme="https://chivalry727.github.io/tags/Mediator-Pattern/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹å»ºé€ è€…æ¨¡å¼</title>
    <link href="https://chivalry727.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
    <id>https://chivalry727.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/</id>
    <published>2020-09-19T11:42:42.000Z</published>
    <updated>2025-02-26T11:48:40.313Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://github.com/user-attachments/assets/da4f905b-afe1-44b2-8888-f38f91e1c842"></p><span id="more"></span><h2 id="è®¾è®¡æ¨¡å¼ä¹‹å»ºé€ è€…æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼ä¹‹å»ºé€ è€…æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¹‹å»ºé€ è€…æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼ä¹‹å»ºé€ è€…æ¨¡å¼</h2><h3 id="ä»€ä¹ˆæ˜¯å»ºé€ è€…æ¨¡å¼"><a href="#ä»€ä¹ˆæ˜¯å»ºé€ è€…æ¨¡å¼" class="headerlink" title="ä»€ä¹ˆæ˜¯å»ºé€ è€…æ¨¡å¼"></a>ä»€ä¹ˆæ˜¯å»ºé€ è€…æ¨¡å¼</h3><p>å»ºé€ è€…ï¼ˆBuilderï¼‰æ¨¡å¼çš„å®šä¹‰ï¼šæŒ‡å°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„é€ ä¸å®ƒçš„è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºï¼Œè¿™æ ·çš„è®¾è®¡æ¨¡å¼è¢«ç§°ä¸ºå»ºé€ è€…æ¨¡å¼ã€‚å®ƒæ˜¯å°†ä¸€ä¸ªå¤æ‚çš„å¯¹è±¡åˆ†è§£ä¸ºå¤šä¸ªç®€å•çš„å¯¹è±¡ï¼Œç„¶åä¸€æ­¥ä¸€æ­¥æ„å»ºè€Œæˆã€‚å®ƒå°†å˜ä¸ä¸å˜ç›¸åˆ†ç¦»ï¼Œå³äº§å“çš„ç»„æˆéƒ¨åˆ†æ˜¯ä¸å˜çš„ï¼Œä½†æ¯ä¸€éƒ¨åˆ†æ˜¯å¯ä»¥çµæ´»é€‰æ‹©çš„ã€‚</p><p>å½“å¯¹è±¡åŒ…å«å¾ˆå¤šå±æ€§æ—¶ï¼Œå¼•å…¥äº†å»ºé€ è€…æ¨¡å¼æ¥è§£å†³å·¥å‚å’ŒæŠ½è±¡å·¥å‚è®¾è®¡æ¨¡å¼çš„ä¸€äº›é—®é¢˜ã€‚</p><p>å½“å¯¹è±¡åŒ…å«è®¸å¤šå±æ€§æ—¶ï¼Œå·¥å‚å’ŒæŠ½è±¡å·¥å‚è®¾è®¡æ¨¡å¼å­˜åœ¨ä¸‰ä¸ªä¸»è¦é—®é¢˜ã€‚</p><ol><li>ä»å®¢æˆ·ç«¯ç¨‹åºä¼ é€’åˆ°<code>Factory</code>ç±»çš„å‚æ•°è¿‡å¤šï¼Œè¿™å¾ˆå®¹æ˜“å‡ºé”™ï¼Œå› ä¸ºåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå‚æ•°çš„ç±»å‹æ˜¯ç›¸åŒçš„ï¼Œå¹¶ä¸”ä»å®¢æˆ·ç«¯å¾ˆéš¾ä¿æŒå‚æ•°çš„é¡ºåºã€‚</li><li>ä¸€äº›å‚æ•°å¯èƒ½æ˜¯å¯é€‰çš„ï¼Œä½†æ˜¯åœ¨å‡ºå‚æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬è¢«è¿«å‘é€æ‰€æœ‰å‚æ•°ï¼Œè€Œå¯é€‰å‚æ•°éœ€è¦ä»¥NULLçš„å½¢å¼å‘é€ã€‚</li><li>å¦‚æœå¯¹è±¡å¾ˆé‡ä¸”å…¶åˆ›å»ºå¾ˆå¤æ‚ï¼Œé‚£ä¹ˆæ‰€æœ‰è¿™äº›å¤æ‚æ€§å°†æˆä¸ºæ··æ·†çš„<code>Factory</code>ç±»çš„ä¸€éƒ¨åˆ†ã€‚</li></ol><p>é€šè¿‡ä¸ºæ„é€ å‡½æ•°æä¾›å¿…éœ€çš„å‚æ•°ï¼Œç„¶åæä¾›ä¸åŒçš„setteræ–¹æ³•æ¥è®¾ç½®å¯é€‰å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è§£å†³å¤§é‡å‚æ•°çš„é—®é¢˜ã€‚ è¿™ç§æ–¹æ³•çš„é—®é¢˜åœ¨äºï¼Œé™¤éæ˜ç¡®è®¾ç½®æ‰€æœ‰å±æ€§ï¼Œå¦åˆ™å¯¹è±¡çŠ¶æ€å°†ä¸€ç›´ä¸ä¸€è‡´ã€‚</p><p>Builderæ¨¡å¼é€šè¿‡æä¾›ä¸€ç§é€æ­¥æ„å»ºå¯¹è±¡å¹¶æä¾›ä¸€ç§å°†å®é™…è¿”å›æœ€ç»ˆObjectçš„æ–¹æ³•çš„æ–¹å¼ï¼Œè§£å†³äº†å…·æœ‰å¤§é‡å¯é€‰å‚æ•°å’ŒçŠ¶æ€ä¸ä¸€è‡´çš„é—®é¢˜ã€‚</p><h3 id="Javaä¸­çš„Builderè®¾è®¡æ¨¡å¼"><a href="#Javaä¸­çš„Builderè®¾è®¡æ¨¡å¼" class="headerlink" title="Javaä¸­çš„Builderè®¾è®¡æ¨¡å¼"></a>Javaä¸­çš„Builderè®¾è®¡æ¨¡å¼</h3><p>è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åœ¨Javaä¸­å®ç°æ„å»ºå™¨è®¾è®¡æ¨¡å¼ã€‚</p><ol><li>é¦–å…ˆï¼Œæ‚¨éœ€è¦åˆ›å»ºä¸€ä¸ªé™æ€åµŒå¥—ç±»ï¼Œç„¶åå°†æ‰€æœ‰å‚æ•°ä»å¤–éƒ¨ç±»å¤åˆ¶åˆ°Builderç±»ã€‚ æˆ‘ä»¬åº”è¯¥éµå¾ªå‘½åçº¦å®šï¼Œå¦‚æœç±»åç§°ä¸º<code>Computer</code>ï¼Œåˆ™æ„å»ºå™¨ç±»åº”å‘½åä¸º<code>ComputerBuilder</code>ã€‚</li><li><code>Java Builder</code>ç±»åº”è¯¥å…·æœ‰ä¸€ä¸ªå…¬å…±æ„é€ å‡½æ•°ï¼Œå…¶ä¸­å¸¦æœ‰æ‰€æœ‰å¿…éœ€çš„å±æ€§ä½œä¸ºå‚æ•°ã€‚</li><li><code>Java Builder</code>ç±»åº”å…·æœ‰è®¾ç½®å¯é€‰å‚æ•°çš„æ–¹æ³•ï¼Œå¹¶ä¸”åº”åœ¨è®¾ç½®å¯é€‰å±æ€§åè¿”å›ç›¸åŒçš„Builderå¯¹è±¡ã€‚</li><li>æœ€åä¸€æ­¥æ˜¯åœ¨æ„å»ºå™¨ç±»ä¸­æä¾›<code>build()</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†è¿”å›å®¢æˆ·ç«¯ç¨‹åºæ‰€éœ€çš„Objectã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦åœ¨Classä¸­æœ‰ä¸€ä¸ªå¸¦æœ‰Builderç±»ä½œä¸ºå‚æ•°çš„ç§æœ‰æ„é€ å‡½æ•°ã€‚</li></ol><p>è¿™æ˜¯ç¤ºä¾‹æ„å»ºå™¨æ¨¡å¼ç¤ºä¾‹ä»£ç ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ª<code>Computer</code>ç±»å’Œ<code>ComputerBuilder</code>ç±»æ¥æ„å»ºå®ƒã€‚</p><p><strong><em>Computer.class</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”µè„‘</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-19 21:01:55</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Computer</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * required parameters</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String HDD;</span><br><span class="line">    <span class="keyword">private</span> String RAM;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * optional parameters</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> isGraphicsCardEnabled; <span class="comment">// æ˜¾å¡æ˜¯å¦å¼€å¯</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> isBluetoothEnabled; <span class="comment">// è“ç‰™æ˜¯å¦å¼€å¯</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getHDD</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> HDD;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getRAM</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> RAM;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isGraphicsCardEnabled</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> isGraphicsCardEnabled;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isBluetoothEnabled</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> isBluetoothEnabled;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Computer</span><span class="params">(ComputerBuilder builder)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.HDD = builder.HDD;</span><br><span class="line">        <span class="built_in">this</span>.RAM = builder.RAM;</span><br><span class="line">        <span class="built_in">this</span>.isBluetoothEnabled = builder.isBluetoothEnabled;</span><br><span class="line">        <span class="built_in">this</span>.isGraphicsCardEnabled = builder.isGraphicsCardEnabled;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Builder Class</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">ComputerBuilder</span> &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * required parameters</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">private</span> String HDD;</span><br><span class="line">        <span class="keyword">private</span> String RAM;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * optional parameters</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">private</span> <span class="type">boolean</span> isGraphicsCardEnabled; <span class="comment">// æ˜¾å¡æ˜¯å¦å¼€å¯</span></span><br><span class="line">        <span class="keyword">private</span> <span class="type">boolean</span> isBluetoothEnabled; <span class="comment">// è“ç‰™æ˜¯å¦å¼€å¯</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">ComputerBuilder</span><span class="params">(String HDD, String RAM)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.HDD = HDD;</span><br><span class="line">            <span class="built_in">this</span>.RAM = RAM;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> ComputerBuilder <span class="title function_">setGraphicsCardEnabled</span><span class="params">(<span class="type">boolean</span> graphicsCardEnabled)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.isGraphicsCardEnabled = graphicsCardEnabled;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> ComputerBuilder <span class="title function_">setBluetoothEnabled</span><span class="params">(<span class="type">boolean</span> bluetoothEnabled)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.isBluetoothEnabled = bluetoothEnabled;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Computer <span class="title function_">build</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Computer</span>(<span class="built_in">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Computer&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;HDD=&#x27;&quot;</span> + HDD + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, RAM=&#x27;&quot;</span> + RAM + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, isGraphicsCardEnabled=&quot;</span> + isGraphicsCardEnabled +</span><br><span class="line">                <span class="string">&quot;, isBluetoothEnabled=&quot;</span> + isBluetoothEnabled +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„ï¼Œ<code>Computer</code>ç±»ä»…å…·æœ‰getteræ–¹æ³•ï¼Œè€Œæ²¡æœ‰å…¬å…±æ„é€ å‡½æ•°ã€‚ å› æ­¤ï¼Œè·å–<code>Computer</code>å¯¹è±¡çš„å”¯ä¸€æ–¹æ³•æ˜¯é€šè¿‡<code>ComputerBuilder</code>ç±»ã€‚</p><p>è¿™æ˜¯ä¸€ä¸ªæ„å»ºå™¨æ¨¡å¼ç¤ºä¾‹æµ‹è¯•ç¨‹åºï¼Œæ˜¾ç¤ºäº†å¦‚ä½•ä½¿ç”¨<code>Builder</code>ç±»æ¥è·å–å¯¹è±¡ã€‚</p><p><strong><em>TestBuilderPattern.class</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æµ‹è¯•ç¨‹åº</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-19 21:08:39</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestBuilderPattern</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// Using builder to get the object in a single line of code and</span></span><br><span class="line">        <span class="comment">// without any inconsistent state or arguments management issues</span></span><br><span class="line">        <span class="type">Computer</span> <span class="variable">computer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Computer</span>.ComputerBuilder(<span class="string">&quot;500GB&quot;</span>, <span class="string">&quot;8GB&quot;</span>)</span><br><span class="line">                .setBluetoothEnabled(<span class="literal">true</span>)</span><br><span class="line">                .setGraphicsCardEnabled(<span class="literal">true</span>)</span><br><span class="line">                .build();</span><br><span class="line">        System.out.println(computer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="JDKä¸­çš„Builderè®¾è®¡æ¨¡å¼ç¤ºä¾‹"><a href="#JDKä¸­çš„Builderè®¾è®¡æ¨¡å¼ç¤ºä¾‹" class="headerlink" title="JDKä¸­çš„Builderè®¾è®¡æ¨¡å¼ç¤ºä¾‹"></a>JDKä¸­çš„Builderè®¾è®¡æ¨¡å¼ç¤ºä¾‹</h3><p>Javaç±»ä¸­çš„ä¸€äº›Builderæ¨¡å¼ç¤ºä¾‹ä¸ºï¼š</p><ul><li><code>java.lang.StringBuilder#append() (unsynchronized)</code></li><li><code>java.lang.StringBuffer#append() (synchronized)</code></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://github.com/user-attachments/assets/da4f905b-afe1-44b2-8888-f38f91e1c842&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://chivalry727.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="å»ºé€ è€…æ¨¡å¼" scheme="https://chivalry727.github.io/tags/%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
    
      <category term="Builder Design Pattern" scheme="https://chivalry727.github.io/tags/Builder-Design-Pattern/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹æ¡¥æ¥æ¨¡å¼</title>
    <link href="https://chivalry727.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F/"/>
    <id>https://chivalry727.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F/</id>
    <published>2020-09-15T07:33:39.000Z</published>
    <updated>2025-02-27T11:09:51.094Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://github.com/user-attachments/assets/3b8ea6ca-5a0c-4ef1-a587-76511d899a90"></p><span id="more"></span><h2 id="è®¾è®¡æ¨¡å¼ä¹‹æ¡¥æ¥æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼ä¹‹æ¡¥æ¥æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¹‹æ¡¥æ¥æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼ä¹‹æ¡¥æ¥æ¨¡å¼</h2><h3 id="ä»€ä¹ˆæ˜¯æ¡¥æ¥è®¾è®¡æ¨¡å¼ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æ¡¥æ¥è®¾è®¡æ¨¡å¼ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æ¡¥æ¥è®¾è®¡æ¨¡å¼ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æ¡¥æ¥è®¾è®¡æ¨¡å¼ï¼Ÿ</h3><p>æ¡¥æ¥è®¾è®¡æ¨¡å¼å±äºç»“æ„è®¾è®¡æ¨¡å¼ç±»åˆ«ã€‚ è¿™ç§æ¨¡å¼ä¾§é‡äºæŠ½è±¡æ¦‚å¿µçš„å±€é™æ€§ã€‚ åœ¨Javaä¸Šä¸‹æ–‡ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ç»§æ‰¿æ¥å¼€å‘æŠ½è±¡æ¦‚å¿µã€‚ æœ‰å‡ ä¸ªå®ç°åå·®æ”¯æŒå®ç°ç»§æ‰¿ã€‚ ä½†æ˜¯ï¼Œè¿™å°†å®ç°æ°¸ä¹…ç»‘å®šåˆ°æŠ½è±¡ä¸Šï¼Œä»è€Œé™åˆ¶äº†çµæ´»æ€§ã€‚ åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨æƒ³ç‹¬ç«‹åœ°ä¿®æ”¹æˆ–æ‰©å±•æŠ½è±¡ä»¥åŠå®ç°ã€‚ æ¡¥æ¥æ¨¡å¼é€šè¿‡å°†æŠ½è±¡ä¸å…¶å®ç°åˆ†ç¦»ï¼Œå°†æœ‰åŠ©äºè§£å†³è¯¥é™åˆ¶ã€‚</p><p>è¿™ç§æ¨¡å¼å¾ˆå¥½åœ°è¯´æ˜äº†â€œä¼˜å…ˆè€ƒè™‘ç»„æˆè€Œä¸æ˜¯ç»§æ‰¿â€çš„æ¦‚å¿µ</p><p>GOFå®šä¹‰çš„æ¡¥æ¢è®¾è®¡æ¨¡å¼ï¼Œ</p><blockquote><p>â€œå°†æŠ½è±¡ä¸å…¶å®ç°åˆ†ç¦»å¼€æ¥ï¼Œä»¥ä¾¿ä¸¤è€…å¯ä»¥ç‹¬ç«‹å˜åŒ–ã€‚â€</p></blockquote><p>ä»€ä¹ˆæ˜¯æŠ½è±¡ï¼Ÿ</p><p>å¦‚æœæˆ‘ä»¬æƒ³åˆ°Javaè¯­è¨€çš„è¦ç‚¹ï¼Œåˆ™å¯ä»¥é€šè¿‡æ¥å£æˆ–æŠ½è±¡ç±»æ¥å®šä¹‰æŠ½è±¡ã€‚ è¿™æ˜¯å®šä¹‰æŠ½è±¡æ¦‚å¿µçš„éå¸¸ç‹­çª„çš„æ–¹æ³•ã€‚ å½“è®¤ä¸ºæ˜¯é¢å‘å¯¹è±¡çš„æ¦‚å¿µæ—¶ï¼ŒæŠ½è±¡åªæ˜¯å¯¹æ›´å¤æ‚ç»†èŠ‚çš„è¡¨ç¤ºæˆ–æ¦‚æ‹¬ã€‚ æŠ½è±¡æ¶µç›–äº†æ•´ä¸ªäº‹ç‰©çš„å…·ä½“å®ç°çš„ç»†èŠ‚ã€‚</p><p>é€šå¸¸ï¼Œå½“æŠ½è±¡éœ€è¦å¤šä¸ªå®ç°æ—¶ï¼Œç»§æ‰¿å°±æ˜¯ä¸€ç§æœºåˆ¶ï¼Œç”¨äºæ»¡è¶³è¯¥éœ€æ±‚ã€‚ ä½†æ˜¯ï¼ŒæŸäº›æ–¹æ¡ˆè¦æ±‚ç‹¬ç«‹æ·»åŠ æˆ–ä¿®æ”¹æŠ½è±¡ä»¥åŠå®ç°ï¼Œè€Œä¸ä¼šç»™ç³»ç»Ÿå¸¦æ¥ä»»ä½•é”™è¯¯ã€‚</p><h3 id="ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­"><a href="#ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­" class="headerlink" title="ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­"></a>ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­</h3><p>å‡è®¾æ±½è½¦å’Œé¥æ§å™¨åœºæ™¯ã€‚ æ±½è½¦æ˜¯è¿™ç§æƒ…å†µçš„æŠ½è±¡ã€‚ ä¸°ç”°ã€æœ¬ç”°å’Œå¥¥è¿ªå°†æˆä¸ºæ±½è½¦æŠ½è±¡çš„å®ç°ã€‚ æ¯è¾†æ±½è½¦å°†å…·æœ‰ä¸€å¥—é¥æ§å™¨ã€‚ å¦‚æœè¿œç¨‹æ§åˆ¶æ˜¯æŠ½è±¡è¿œç¨‹å¯åŠ¨å™¨ï¼Œåˆ™è¿œç¨‹é—¨é”/å¼€å’Œè¿œç¨‹æŠ¥è­¦å°†ä½œä¸ºè¿œç¨‹æ§åˆ¶çš„å®ç°ã€‚ å®é©¬è¿™æ ·çš„æ±½è½¦å®ç°ä¸­æœ‰ä¸€ä¸ªæ–°çš„è¡¥å……ã€‚ å®ƒè¿˜åº”å…·æœ‰é¥æ§å™¨çš„3ç§å®ç°æ–¹å¼ã€‚ å› æ­¤ï¼ŒæŠ½è±¡å’Œå®ç°å¯ä»¥æ ¹æ®éœ€æ±‚è€Œå˜åŒ–ã€‚</p><h3 id="æ¡¥æ¥æ¨¡å¼å¦‚ä½•å·¥ä½œï¼Ÿ"><a href="#æ¡¥æ¥æ¨¡å¼å¦‚ä½•å·¥ä½œï¼Ÿ" class="headerlink" title="æ¡¥æ¥æ¨¡å¼å¦‚ä½•å·¥ä½œï¼Ÿ"></a>æ¡¥æ¥æ¨¡å¼å¦‚ä½•å·¥ä½œï¼Ÿ</h3><p>é€šå¸¸ï¼Œåœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼ŒæŠ½è±¡ç±»ä»£è¡¨æŠ½è±¡ã€‚ è¯¥æŠ½è±¡ç»´æŠ¤ä¸€ä¸ªå•ç‹¬çš„å±‚æ¬¡ç»“æ„ã€‚ å•ç‹¬çš„å±‚æ¬¡ç»“æ„ç»´æŠ¤æŠ½è±¡ç±»çš„å®ç°ã€‚ åŒæ ·ï¼Œæ¨¡å¼å…è®¸ç±»ï¼ˆæŠ½è±¡ï¼‰åŠå…¶ä½œç”¨ï¼ˆå®ç°ï¼‰éšéœ€è¦è€Œå˜åŒ–ã€‚ æ¤å…¥åŒ…æ‹¬ä¸€ä¸ªæŠ½è±¡ç‚¹å’Œè¯¥å±‚æ¬¡ç»“æ„ä¸‹çš„å‡ ä¸ªå®ç°æ ‡å‡†ã€‚</p><h3 id="æ¡¥æ¥æ¨¡å¼çš„ç»“æ„"><a href="#æ¡¥æ¥æ¨¡å¼çš„ç»“æ„" class="headerlink" title="æ¡¥æ¥æ¨¡å¼çš„ç»“æ„"></a>æ¡¥æ¥æ¨¡å¼çš„ç»“æ„</h3><p>è®©æˆ‘ä»¬ä½¿ç”¨æŠ½è±¡å’Œå…·ä½“çš„å®ç°ç­–ç•¥æ¥é˜æ˜è¿™ä¸€ç‚¹ã€‚ å‡è®¾æ‚¨æœ‰ä¸¤ä¸ªç³»ç»Ÿï¼Œæ¯ä¸ªç³»ç»Ÿä¸­éƒ½æœ‰æŠ½è±¡ç±»å’Œå…·ä½“ç±»ã€‚ ç³»ç»ŸXç”±â€œæ‘˜è¦Aâ€ç»„æˆï¼Œè€Œå…·ä½“å®ç°åˆ™ç”±â€œå…·ä½“Aâ€ç»„æˆã€‚ ç„¶åï¼Œç³»ç»ŸYç”±â€œæ‘˜è¦Bâ€ç»„æˆï¼Œå…¶å…·ä½“å®ç°ä¸ºâ€œæ··å‡åœŸBâ€ã€‚ æ‘˜è¦Aé€šè¿‡â€œ Has-Aâ€å…³ç³»ä¸æ‘˜è¦Bè¿æ¥ã€‚ æ‘˜è¦Aåœ¨å…¶å†…éƒ¨ç»´æŠ¤æ‘˜è¦Bçš„å®ä¾‹ã€‚ è¿™ç§â€œ Has-Aâ€å…³ç³»åœ¨ä¸¤ä¸ªç³»ç»Ÿä¹‹é—´æ¶èµ·äº†ä¸€åº§æ¡¥æ¢ã€‚ å› æ­¤ï¼Œæ¨¡å¼åŒ…å«ä¸¤å±‚æŠ½è±¡ã€‚ å› æ­¤ï¼Œè¯¥ç»“æ„è¢«ç§°ä¸ºæ¡¥æ¥æ¨¡å¼ç»“æ„ã€‚</p><p><img src="https://tvax1.sinaimg.cn/large/008aQ1h9ly1gist03hca4j30e206r3ye.jpg"></p><h3 id="æ¡¥æ¥æ¨¡å¼è§£å†³çš„é—®é¢˜"><a href="#æ¡¥æ¥æ¨¡å¼è§£å†³çš„é—®é¢˜" class="headerlink" title="æ¡¥æ¥æ¨¡å¼è§£å†³çš„é—®é¢˜"></a>æ¡¥æ¥æ¨¡å¼è§£å†³çš„é—®é¢˜</h3><p>åœ¨åº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬åº”è¯¥é¦–å…ˆç¡®å®šå€™é€‰ç»„ä»¶ä»¥å¼€å‘ä¸€ä¸ªæŠ½è±¡å¹¶ä½œä¸ºå®ç°ã€‚ æŠ½è±¡å’Œå®ç°åˆ†ä¸ºä¸¤ä¸ªå±‚æ¬¡ç»“æ„ï¼Œå¹¶ç‹¬ç«‹ç»´æŠ¤ã€‚</p><h3 id="æ¡¥æ¥æ¨¡å¼çš„æ ‡å‡†æŠ€æœ¯è¯´æ˜"><a href="#æ¡¥æ¥æ¨¡å¼çš„æ ‡å‡†æŠ€æœ¯è¯´æ˜" class="headerlink" title="æ¡¥æ¥æ¨¡å¼çš„æ ‡å‡†æŠ€æœ¯è¯´æ˜"></a>æ¡¥æ¥æ¨¡å¼çš„æ ‡å‡†æŠ€æœ¯è¯´æ˜</h3><p>å›¾2ä»£è¡¨äº†æ¡¥æ¢è®¾è®¡æ¨¡å¼çš„UMLå›¾ã€‚ å®ƒæè¿°äº†ä¸¤ç»„æŠ½è±¡ï¼Œå®ƒä»¬ç‹¬ç«‹å˜åŒ–ã€‚</p><p><img src="https://tvax2.sinaimg.cn/large/008aQ1h9ly1gist03pn9gj30jl07z0ss.jpg"></p><p>æ¡¥æ¥è®¾è®¡æ¨¡å¼ç±»å›¾</p><h3 id="æ¡¥æ¢è®¾è®¡æ¨¡å¼çš„ç»„æˆéƒ¨åˆ†"><a href="#æ¡¥æ¢è®¾è®¡æ¨¡å¼çš„ç»„æˆéƒ¨åˆ†" class="headerlink" title="æ¡¥æ¢è®¾è®¡æ¨¡å¼çš„ç»„æˆéƒ¨åˆ†"></a>æ¡¥æ¢è®¾è®¡æ¨¡å¼çš„ç»„æˆéƒ¨åˆ†</h3><ul><li><strong><em>Abstraction</em></strong>ï¼šè¿™æ˜¯æ¡¥æ¥æ¨¡å¼çš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ï¼Œå®ƒåŒ…æ‹¬å¯¹å®ç°è€…çš„å¼•ç”¨ã€‚</li><li><strong><em>Refined Abstraction</em></strong>ï¼šè¿™æ‰©å±•äº†æŠ½è±¡å¹¶å‘å®ç°è€…éšè—äº†æ›´ç²¾ç»†çš„å…ƒç´ ã€‚å°±æ˜¯è¯´ï¼Œè¿™ä¸ä¼šå½±å“å®ç°è€…ï¼Œä»¥åŠè¿™äº›å®ç°ï¼Œä¹Ÿä¸ä¾èµ–äº<code>Implementor</code>æ¥å£ä¸­çš„ä»»ä½•å…·ä½“å®ç°è€…ã€‚</li><li><strong><em>Implementor</em></strong>ï¼šè¿™æ˜¯ä¸‹çº§å®æ–½çš„æ¥å£ã€‚ è¿™ä¸éœ€è¦ç›´æ¥ä¸æŠ½è±¡æœ‰å…³ã€‚ å®ƒä»…ä¸has-aå…³ç³»è¿æ¥ã€‚</li><li><strong><em>ConcreteImplementor</em></strong>ï¼šè¯¥ç»„ä»¶é€šè¿‡å®šä¹‰å®ç°æ¥å®ç°å®ç°è€…æ¥å£ã€‚ å®æ–½ç»†èŠ‚å¯¹å®¢æˆ·ç«¯éšè—ã€‚</li></ul><h3 id="å®ç°æ¡¥æ¥æ¨¡å¼æ­¥éª¤"><a href="#å®ç°æ¡¥æ¥æ¨¡å¼æ­¥éª¤" class="headerlink" title="å®ç°æ¡¥æ¥æ¨¡å¼æ­¥éª¤"></a>å®ç°æ¡¥æ¥æ¨¡å¼æ­¥éª¤</h3><ol><li>ç¡®å®šåº”ç‹¬ç«‹å˜åŒ–çš„å†…å®¹é‚£å°±æ˜¯æ‚¨å¿…é¡»åŸºäºæ­£äº¤ç»´åº¦æ´¾ç”Ÿå’Œåˆ†æç±»ã€‚ å®ƒä»¬å¯èƒ½åƒå‰ç«¯/åç«¯ï¼ŒåŸŸ/åŸºç¡€æ¶æ„ä»¥åŠæ¥å£/å¹³å°ç±»å±‚æ¬¡ç»“æ„</li><li>é€šè¿‡åˆ†æå€™é€‰ç±»åˆ«çš„ä¸åŒåŠŸèƒ½æ¥è¯†åˆ«â€œå®ç°è€…â€ç•Œé¢</li><li>å°†ä¸€ä¸ªç±»ç±»åˆ«æ ‡è¯†ä¸ºâ€œæŠ½è±¡â€ï¼Œå¹¶æ„å»ºæŠ½è±¡ç±»ï¼Œå¹¶åœ¨æŠ½è±¡ç±»ä¸­åŒ…å«â€œå®ç°è€…â€çš„å®ä¾‹</li><li>ç„¶åæ‰©å±•æŠ½è±¡ç±»ä»¥ç”Ÿæˆä¸åŒçš„å®ç°ï¼Œä»¥æ»¡è¶³æ‚¨çš„ä¸åŒéœ€æ±‚</li><li>æ„å»ºå®¢æˆ·ç«¯ç¨‹åºä»¥æ»¡è¶³æ‚¨çš„éœ€æ±‚</li><li>æ‚¨å¯ä»¥æ ¹æ®éœ€è¦ä¸ºâ€œæŠ½è±¡â€å’Œâ€œæ‰§è¡Œå™¨â€æ·»åŠ æ›´å¤šå…·ä½“çš„ç±»ï¼Œå¹¶æ‰©å±•ç³»ç»Ÿ</li></ol><h3 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h3><p>è®©æˆ‘ä»¬ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥é˜æ˜è¿™ç§æ¨¡å¼ã€‚ å‡è®¾ä¸€ä½æ•°å­—è‰ºæœ¯å®¶éœ€è¦åˆ›å»ºå…·æœ‰ä¸åŒé¢œè‰²çš„å½¢çŠ¶ã€‚ ä»–æ­£åœ¨å¼€å‘ä¸€ä¸ªç¨‹åºæ¥å®ç°è¿™ä¸ªç›®æ ‡ã€‚ æœ€åˆï¼Œå‡ ä¹æ²¡æœ‰å…¶ä»–é€‰æ‹©ã€‚ ä½†æ˜¯ï¼Œæ ¹æ®å®¢æˆ·çš„è¦æ±‚ï¼Œå°†æœ‰ä¸åŒç±»å‹çš„å½¢çŠ¶å’Œé¢œè‰²å¯ä»¥é€‚åº”ä»¥äº§ç”Ÿæœ€ä½³æ•ˆæœã€‚ å› æ­¤ï¼Œè‰ºæœ¯å®¶å°†æ¥å¿…é¡»åœ¨â€œå½¢çŠ¶â€ç±»åˆ«ä¸­æ·»åŠ ä¸åŒçš„å½¢çŠ¶ï¼Œå¹¶åœ¨â€œé¢œè‰²â€ç±»åˆ«ä¸­æ·»åŠ å¤šç§é¢œè‰²ã€‚</p><p>åœ¨ç»§ç»­ä¹‹å‰ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æ²¡æœ‰æ¡¥æ¥æ¨¡å¼çš„æƒ…å†µã€‚</p><h4 id="æ²¡æœ‰æ¡¥æ¥æ¨¡å¼"><a href="#æ²¡æœ‰æ¡¥æ¥æ¨¡å¼" class="headerlink" title="æ²¡æœ‰æ¡¥æ¥æ¨¡å¼"></a>æ²¡æœ‰æ¡¥æ¥æ¨¡å¼</h4><p>æ‚¨å°†å¿…é¡»ä¸ºå…·æœ‰å›°éš¾å‘½åæ¨¡å¼çš„æ¯ç§å½¢çŠ¶åˆ›å»ºå†—é•¿è€Œå¤æ‚çš„å­ç±»ã€‚</p><p><img src="https://tvax1.sinaimg.cn/large/008aQ1h9ly1gisthedbd0j30e5066mx4.jpg"></p><h4 id="ä½¿ç”¨æ¡¥æ¥æ¨¡å¼"><a href="#ä½¿ç”¨æ¡¥æ¥æ¨¡å¼" class="headerlink" title="ä½¿ç”¨æ¡¥æ¥æ¨¡å¼"></a>ä½¿ç”¨æ¡¥æ¥æ¨¡å¼</h4><p>ä¸¤ä¸ªç±»å±‚æ¬¡ç»“æ„å°†åœ¨ä¸¤ä¸ªç±»å±‚æ¬¡ç»“æ„ä¹‹é—´æä¾›æ›´å¤§çš„çµæ´»æ€§ã€‚</p><p><img src="https://tva3.sinaimg.cn/large/008aQ1h9ly1gisthefm5jj30fs04wmx2.jpg"></p><p>è®©æˆ‘ä»¬å°†æ­¤åœºæ™¯æ”¾åˆ°Javaç¼–ç¨‹ä¸­ã€‚</p><h4 id="è¯¥è®¡åˆ’çš„ç»„æˆéƒ¨åˆ†"><a href="#è¯¥è®¡åˆ’çš„ç»„æˆéƒ¨åˆ†" class="headerlink" title="è¯¥è®¡åˆ’çš„ç»„æˆéƒ¨åˆ†"></a>è¯¥è®¡åˆ’çš„ç»„æˆéƒ¨åˆ†</h4><ul><li><strong><em>AbstractShape</em></strong>ï¼šè¡¨ç¤ºä¸€ç»„å…·ä½“çš„å½¢çŠ¶å®ç°çš„æŠ½è±¡ç±»/æ¥å£</li><li><strong><em>RefinedShapeCircle</em></strong>ï¼šCircleæ˜¯â€œ Shapeâ€æŠ½è±¡çš„ä¸€ç§æ‰©å±•</li><li><strong><em>RefinedShapeTriangle</em></strong>ï¼šä¸‰è§’å½¢æ˜¯â€œ Shapeâ€æŠ½è±¡çš„å¦ä¸€ä¸ªç¤ºä¾‹</li><li><strong><em>ColorImplementor</em></strong>ï¼šè¿™æ˜¯â€œé¢œè‰²â€ç±»åˆ«çš„æŠ½è±¡ï¼Œä¹Ÿæ˜¯â€œå½¢çŠ¶â€ç±»åˆ«çš„å®ç°çš„ä¸€éƒ¨åˆ†ã€‚</li><li><strong><em>ConcreteColorRed</em></strong>ï¼šâ€œé¢œè‰²â€æŠ½è±¡çš„çº¢è‰²æ‰©å±•</li><li><strong><em>ConcreteColorGreen</em></strong>ï¼šâ€œé¢œè‰²â€æŠ½è±¡çš„ç»¿è‰²æ‰©å±•</li></ul><h4 id="Javaä»£ç ç¤ºä¾‹"><a href="#Javaä»£ç ç¤ºä¾‹" class="headerlink" title="Javaä»£ç ç¤ºä¾‹"></a>Javaä»£ç ç¤ºä¾‹</h4><p><strong><em>ColorImplementor.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ColorImplementor</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">applyColor</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong><em>AbstractShape.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">AbstractShape</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºå®ç°è€…å®ä¾‹ï¼ˆç»„æˆï¼‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> ColorImplementor color;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»¥å®ç°è€…ä½œä¸ºè¾“å…¥å‚æ•°çš„æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> color</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AbstractShape</span><span class="params">(ColorImplementor color)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.color = color;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸å°†é¢œè‰²å¡«å……åˆ°å¯¹è±¡æœ‰å…³çš„æŠ½è±¡æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">applyShapeColor</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong><em>RefinedShapeCircle.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RefinedShapeCircle</span> <span class="keyword">extends</span> <span class="title class_">AbstractShape</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">RefinedShapeCircle</span><span class="params">(ColorImplementor color)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(color);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">applyShapeColor</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Circle color applying...&quot;</span>);</span><br><span class="line">        color.applyColor();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong><em>RefinedShapeTriangle.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RefinedShapeTriangle</span> <span class="keyword">extends</span> <span class="title class_">AbstractShape</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">RefinedShapeTriangle</span><span class="params">(ColorImplementor color)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(color);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">applyShapeColor</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;Triangle color applying...&quot;</span>);</span><br><span class="line">        color.applyColor();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong><em>ConcreteColorRed.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConcreteColorRed</span> <span class="keyword">implements</span> <span class="title class_">ColorImplementor</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">applyColor</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Applying Red....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong><em>ConcreteColorGreen.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConcreteColorGreen</span> <span class="keyword">implements</span> <span class="title class_">ColorImplementor</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">applyColor</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Apply Green...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong><em>ShapeColorTester.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ShapeColorTester</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºTriangleå®ä¾‹å¹¶åº”ç”¨çº¢è‰²</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Apply Red Color to the Triangle&quot;</span>);</span><br><span class="line">        <span class="type">AbstractShape</span> <span class="variable">triangle</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RefinedShapeTriangle</span>(<span class="keyword">new</span> <span class="title class_">ConcreteColorRed</span>());</span><br><span class="line">        triangle.applyShapeColor();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ›å»ºTriangleå®ä¾‹å¹¶åº”ç”¨ç»¿è‰²</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Appying Green Color to the Triangle&quot;</span>);</span><br><span class="line">        <span class="type">AbstractShape</span> <span class="variable">triagleGreen</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RefinedShapeTriangle</span>(<span class="keyword">new</span> <span class="title class_">ConcreteColorGreen</span>());</span><br><span class="line">        triagleGreen.applyShapeColor();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ›å»ºCircleå®ä¾‹å¹¶åº”ç”¨çº¢è‰²</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Appying Red Color to the Circle&quot;</span>);</span><br><span class="line">        <span class="type">AbstractShape</span> <span class="variable">circleRed</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RefinedShapeCircle</span>(<span class="keyword">new</span> <span class="title class_">ConcreteColorRed</span>());</span><br><span class="line">        circleRed.applyShapeColor();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ›å»ºCircleå®ä¾‹å¹¶åº”ç”¨ç»¿è‰²</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Applying Green Color to the Circle&quot;</span>);</span><br><span class="line">        <span class="type">AbstractShape</span> <span class="variable">circleGreen</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RefinedShapeCircle</span>(<span class="keyword">new</span> <span class="title class_">ConcreteColorGreen</span>());</span><br><span class="line">        circleGreen.applyShapeColor();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœï¼š</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Apply</span> <span class="built_in">Red</span> <span class="variable">Color</span> <span class="variable">to</span> <span class="variable">the</span> <span class="built_in">Triangle</span></span><br><span class="line"><span class="built_in">Triangle</span> <span class="variable">color</span> <span class="variable">applying</span><span class="operator">...</span><span class="variable">Applying</span> <span class="built_in">Red</span><span class="operator">....</span></span><br><span class="line"><span class="variable">Appying</span> <span class="built_in">Green</span> <span class="variable">Color</span> <span class="variable">to</span> <span class="variable">the</span> <span class="built_in">Triangle</span></span><br><span class="line"><span class="built_in">Triangle</span> <span class="variable">color</span> <span class="variable">applying</span><span class="operator">...</span><span class="built_in">Apply</span> <span class="built_in">Green</span><span class="operator">...</span></span><br><span class="line"><span class="variable">Appying</span> <span class="built_in">Red</span> <span class="variable">Color</span> <span class="variable">to</span> <span class="variable">the</span> <span class="built_in">Circle</span></span><br><span class="line"><span class="built_in">Circle</span> <span class="variable">color</span> <span class="variable">applying</span><span class="operator">...</span></span><br><span class="line"><span class="variable">Applying</span> <span class="built_in">Red</span><span class="operator">....</span></span><br><span class="line"><span class="variable">Applying</span> <span class="built_in">Green</span> <span class="variable">Color</span> <span class="variable">to</span> <span class="variable">the</span> <span class="built_in">Circle</span></span><br><span class="line"><span class="built_in">Circle</span> <span class="variable">color</span> <span class="variable">applying</span><span class="operator">...</span></span><br><span class="line"><span class="built_in">Apply</span> <span class="built_in">Green</span><span class="operator">...</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä½•æ—¶ä½¿ç”¨æ¡¥æ¥æ¨¡å¼"><a href="#ä½•æ—¶ä½¿ç”¨æ¡¥æ¥æ¨¡å¼" class="headerlink" title="ä½•æ—¶ä½¿ç”¨æ¡¥æ¥æ¨¡å¼"></a>ä½•æ—¶ä½¿ç”¨æ¡¥æ¥æ¨¡å¼</h3><ul><li>å½“éœ€è¦å–æ¶ˆæŠ½è±¡å’Œå®ç°ä¹‹é—´çš„æ°¸ä¹…ç»‘å®šæˆ–ç´§å¯†è€¦åˆæ—¶ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ç°å¯ä»¥åœ¨è¿è¡Œæ—¶é€‰æ‹©æˆ–åˆ‡æ¢</li><li>éœ€è¦é€šè¿‡å­ç±»åˆ†åˆ«æ‰©å±•æŠ½è±¡å’Œå¤åˆå®ç°æ—¶ã€‚</li><li>ä»€ä¹ˆæ—¶å€™æ‰©å±•å®ç°ä¸­çš„æ›´æ”¹ä¸åº”å½±å“å®¢æˆ·ç«¯</li><li>å½“ç³»ç»Ÿä¸­æœ‰å‡ ç±»ç±»åˆ«çš„åˆ†å±‚ä¼ æ’­æ—¶</li></ul><h3 id="æ¡¥æ¥è®¾è®¡æ¨¡å¼çš„ä¼˜åŠ¿"><a href="#æ¡¥æ¥è®¾è®¡æ¨¡å¼çš„ä¼˜åŠ¿" class="headerlink" title="æ¡¥æ¥è®¾è®¡æ¨¡å¼çš„ä¼˜åŠ¿"></a>æ¡¥æ¥è®¾è®¡æ¨¡å¼çš„ä¼˜åŠ¿</h3><ul><li>æ¡¥æ¥æ¨¡å¼å…è®¸ä¸¤ä¸ªæŠ½è±¡ç³»ç»Ÿå’Œå®ç°è€…ç³»ç»Ÿä¹‹é—´çš„ç‹¬ç«‹å˜åŒ–</li><li>å®ƒé¿å…äº†å®¢æˆ·ç«¯ä»£ç ç»‘å®šåˆ°æŸä¸ªå®ç°</li><li>æŠ½è±¡å’Œå®ç°å¯ä»¥æ¸…æ¥šåœ°åˆ†å¼€ï¼Œä¾¿äºå°†æ¥æ‰©å±•</li><li>ä¸ºè·¨å¹³å°å¼€å‘æä¾›äº†å¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆ</li><li>éå¸¸é€‚åˆåœ¨åˆå§‹å¼€å‘å‘¨æœŸä¸­ä½¿ç”¨å­˜æ ¹è¿›è¡Œæµ‹è¯•</li></ul><h3 id="æ¡¥æ¥è®¾è®¡æ¨¡å¼çš„ç¼ºç‚¹"><a href="#æ¡¥æ¥è®¾è®¡æ¨¡å¼çš„ç¼ºç‚¹" class="headerlink" title="æ¡¥æ¥è®¾è®¡æ¨¡å¼çš„ç¼ºç‚¹"></a>æ¡¥æ¥è®¾è®¡æ¨¡å¼çš„ç¼ºç‚¹</h3><ul><li>å¦‚æœå¯æ‰©å±•ç»„ä»¶çš„æ•°é‡å¢åŠ ï¼Œæ­¤æ¨¡å¼å¯èƒ½ä¼šå¯¼è‡´å¤æ‚æ€§</li><li>æ¶ˆæ¯ä¸æ¸…æ™°å¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜</li></ul><h3 id="æ¡¥æ¥å™¨å’Œé€‚é…å™¨æ¨¡å¼ä¹‹é—´çš„åŒºåˆ«"><a href="#æ¡¥æ¥å™¨å’Œé€‚é…å™¨æ¨¡å¼ä¹‹é—´çš„åŒºåˆ«" class="headerlink" title="æ¡¥æ¥å™¨å’Œé€‚é…å™¨æ¨¡å¼ä¹‹é—´çš„åŒºåˆ«"></a>æ¡¥æ¥å™¨å’Œé€‚é…å™¨æ¨¡å¼ä¹‹é—´çš„åŒºåˆ«</h3><p>é€‚é…å™¨ç”¨äºæ¶ˆé™¤å·²å®šä¹‰çš„ç³»ç»Ÿä¸ç°æœ‰çš„ä¸¤ä¸ªç³»ç»Ÿä¹‹é—´çš„ä¸å…¼å®¹æ€§ï¼Œè€Œæ¡¥æ¥æ¨¡å¼åˆ™ç”¨äºåœ¨å¼€å‘ç³»ç»Ÿä¹‹å‰è§£å†³æ‰€æœ‰å›°éš¾</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://github.com/user-attachments/assets/3b8ea6ca-5a0c-4ef1-a587-76511d899a90&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://chivalry727.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="æ¡¥æ¥æ¨¡å¼" scheme="https://chivalry727.github.io/tags/%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F/"/>
    
      <category term="Bridge Design Pattern" scheme="https://chivalry727.github.io/tags/Bridge-Design-Pattern/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹è´£ä»»é“¾æ¨¡å¼</title>
    <link href="https://chivalry727.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F/"/>
    <id>https://chivalry727.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F/</id>
    <published>2020-09-15T07:28:23.000Z</published>
    <updated>2025-02-26T12:07:19.476Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://github.com/user-attachments/assets/0a5bd2fd-b5ed-491c-9dd0-71de84efb5d9"></p><span id="more"></span><h2 id="è®¾è®¡æ¨¡å¼ä¹‹è´£ä»»é“¾æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼ä¹‹è´£ä»»é“¾æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¹‹è´£ä»»é“¾æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼ä¹‹è´£ä»»é“¾æ¨¡å¼</h2><h3 id="ä»€ä¹ˆæ˜¯è´£ä»»é“¾è®¾è®¡æ¨¡å¼"><a href="#ä»€ä¹ˆæ˜¯è´£ä»»é“¾è®¾è®¡æ¨¡å¼" class="headerlink" title="ä»€ä¹ˆæ˜¯è´£ä»»é“¾è®¾è®¡æ¨¡å¼"></a>ä»€ä¹ˆæ˜¯è´£ä»»é“¾è®¾è®¡æ¨¡å¼</h3><p>è´£ä»»é“¾è®¾è®¡æ¨¡å¼æ˜¯è¡Œä¸ºè®¾è®¡æ¨¡å¼ä¹‹ä¸€ã€‚è´£ä»»é“¾æ¨¡å¼ç”¨äºå®ç°è½¯ä»¶è®¾è®¡ä¸­çš„æ¾æ•£è€¦åˆï¼Œå…¶ä¸­å°†æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ä¼ é€’ç»™å¯¹è±¡é“¾ä»¥å¯¹å…¶è¿›è¡Œå¤„ç†ã€‚ ç„¶åï¼Œé“¾ä¸­çš„å¯¹è±¡å°†è‡ªè¡Œå†³å®šå°†ç”±è°å¤„ç†è¯·æ±‚ï¼Œä»¥åŠæ˜¯å¦éœ€è¦å°†è¯·æ±‚å‘é€åˆ°é“¾ä¸­çš„ä¸‹ä¸€ä¸ªå¯¹è±¡ã€‚</p><h3 id="JDKä¸­çš„è´£ä»»é“¾æ¨¡å¼ç¤ºä¾‹"><a href="#JDKä¸­çš„è´£ä»»é“¾æ¨¡å¼ç¤ºä¾‹" class="headerlink" title="JDKä¸­çš„è´£ä»»é“¾æ¨¡å¼ç¤ºä¾‹"></a>JDKä¸­çš„è´£ä»»é“¾æ¨¡å¼ç¤ºä¾‹</h3><p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹JDKä¸­çš„è´£ä»»é“¾æ¨¡å¼ç¤ºä¾‹ï¼Œç„¶åæˆ‘ä»¬å°†ç»§ç»­å®æ–½è¿™ç§æ¨¡å¼çš„çœŸå®ç¤ºä¾‹ã€‚ æˆ‘ä»¬çŸ¥é“åœ¨try-catchå—ä»£ç ä¸­å¯ä»¥æœ‰å¤šä¸ªcatchå—ã€‚ åœ¨è¿™é‡Œï¼Œæ¯ä¸ªcatchå—éƒ½æ˜¯ä¸€ç§å¤„ç†å™¨ï¼Œç”¨äºå¤„ç†è¯¥ç‰¹å®šå¼‚å¸¸ã€‚å› æ­¤ï¼Œå½“tryå—ä¸­å‘ç”Ÿä»»ä½•å¼‚å¸¸æ—¶ï¼Œå®ƒå°†å‘é€åˆ°ç¬¬ä¸€ä¸ªcatchå—è¿›è¡Œå¤„ç†ã€‚ å¦‚æœcatchå—æ— æ³•å¤„ç†å®ƒï¼Œåˆ™å°†è¯·æ±‚è½¬å‘åˆ°é“¾ä¸­çš„ä¸‹ä¸€ä¸ªå¯¹è±¡ï¼Œå³ä¸‹ä¸€ä¸ªcatchå—ã€‚ å¦‚æœå³ä½¿æœ€åä¸€ä¸ªcatchå—ä¹Ÿæ— æ³•å¤„ç†å®ƒï¼Œåˆ™å°†å¼‚å¸¸æŠ›å‡ºåˆ°è°ƒç”¨ç¨‹åºçš„é“¾å¤–ã€‚</p><h3 id="è´£ä»»é“¾è®¾è®¡æ¨¡å¼ç¤ºä¾‹"><a href="#è´£ä»»é“¾è®¾è®¡æ¨¡å¼ç¤ºä¾‹" class="headerlink" title="è´£ä»»é“¾è®¾è®¡æ¨¡å¼ç¤ºä¾‹"></a>è´£ä»»é“¾è®¾è®¡æ¨¡å¼ç¤ºä¾‹</h3><p>è´£ä»»é“¾æ¨¡å¼çš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­æ˜¯ATMåˆ†é…æœºã€‚ ç”¨æˆ·è¾“å…¥è¦åˆ†é…çš„é‡‘é¢ï¼Œå¹¶æ ¹æ®å·²å®šä¹‰çš„è´§å¸æ¸…å•ï¼ˆä¾‹å¦‚50$ï¼Œ20$ï¼Œ10$ç­‰ï¼‰è¾“å…¥æœºå™¨åˆ†é…çš„é‡‘é¢ã€‚</p><p>å¦‚æœç”¨æˆ·è¾“å…¥çš„é‡‘é¢ä¸æ˜¯10çš„å€æ•°ï¼Œåˆ™ä¼šå¼•å‘é”™è¯¯ã€‚ æˆ‘ä»¬å°†ä½¿ç”¨è´£ä»»é“¾æ¨¡å¼æ¥å®ç°æ­¤è§£å†³æ–¹æ¡ˆã€‚ é“¾å°†æŒ‰ç…§ä¸‹å›¾æ‰€ç¤ºçš„é¡ºåºå¤„ç†è¯·æ±‚ã€‚</p><p><img src="https://tva3.sinaimg.cn/large/008aQ1h9ly1giw4oiwfr1j30cl0c63yu.jpg"></p><p>è¯·æ³¨æ„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªç¨‹åºæœ¬èº«ä¸­è½»æ¾å®ç°æ­¤è§£å†³æ–¹æ¡ˆï¼Œä½†æ˜¯å¤æ‚æ€§å°†å¢åŠ ï¼Œå¹¶ä¸”è§£å†³æ–¹æ¡ˆå°†ç´§å¯†è€¦åˆã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªåˆ†é…ç³»ç»Ÿé“¾ï¼Œä»¥åˆ†é…50ç¾å…ƒï¼Œ20ç¾å…ƒå’Œ10ç¾å…ƒçš„é’ç¥¨ã€‚</p><h3 id="è´£ä»»é“¾è®¾è®¡æ¨¡å¼â€“åŸºç±»å’Œæ¥å£"><a href="#è´£ä»»é“¾è®¾è®¡æ¨¡å¼â€“åŸºç±»å’Œæ¥å£" class="headerlink" title="è´£ä»»é“¾è®¾è®¡æ¨¡å¼â€“åŸºç±»å’Œæ¥å£"></a>è´£ä»»é“¾è®¾è®¡æ¨¡å¼â€“åŸºç±»å’Œæ¥å£</h3><p>æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªCurrencyç±»ï¼Œè¯¥ç±»å°†å­˜å‚¨è¦åˆ†é…çš„é‡‘é¢å¹¶ç”±é“¾å®ç°ä½¿ç”¨ã€‚</p><p><strong><em>Currency.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è´§å¸</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-19 18:22:02</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Currency</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> amount;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Currency</span><span class="params">(<span class="type">int</span> amount)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.amount = amount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAmount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> amount;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŸºæœ¬æ¥å£åº”å…·æœ‰å®šä¹‰é“¾ä¸­ä¸‹ä¸€ä¸ªå¤„ç†å™¨çš„æ–¹æ³•ä»¥åŠå°†å¤„ç†è¯·æ±‚çš„æ–¹æ³•ã€‚ æˆ‘ä»¬çš„ATMåˆ†é…ç•Œé¢å¦‚ä¸‹æ‰€ç¤ºã€‚</p><p><strong><em>DispenseChain.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ†é…é“¾</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-19 18:22:48</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DispenseChain</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®ä¸‹ä¸€ä¸ªåˆ†é…é“¾</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> nextChain</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">setNextChain</span><span class="params">(DispenseChain nextChain)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ†é…</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> currency</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">dispense</span><span class="params">(Currency currency)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è´£ä»»é“¾æ¨¡å¼â€“é“¾å®ç°"><a href="#è´£ä»»é“¾æ¨¡å¼â€“é“¾å®ç°" class="headerlink" title="è´£ä»»é“¾æ¨¡å¼â€“é“¾å®ç°"></a>è´£ä»»é“¾æ¨¡å¼â€“é“¾å®ç°</h3><p>æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸åŒçš„å¤„ç†å™¨ç±»ï¼Œè¿™äº›ç±»å°†å®ç°<code>DispenseChain</code>æ¥å£å¹¶æä¾›<code>Dispense()</code>æ–¹æ³•çš„å®ç°ã€‚ ç”±äºæˆ‘ä»¬æ­£åœ¨å¼€å‘å¯ä½¿ç”¨ä¸‰ç§ç±»å‹çš„è´§å¸æ³•æ¡ˆï¼ˆ50ç¾å…ƒï¼Œ20ç¾å…ƒå’Œ10ç¾å…ƒï¼‰çš„ç³»ç»Ÿï¼Œå› æ­¤æˆ‘ä»¬å°†åˆ›å»ºä¸‰ç§å…·ä½“çš„å®ç°ã€‚</p><p><strong><em>Dollar50Dispenser.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-19 18:28:39</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dollar50Dispenser</span> <span class="keyword">implements</span> <span class="title class_">DispenseChain</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> DispenseChain chain;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNextChain</span><span class="params">(DispenseChain nextChain)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.chain = nextChain;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dispense</span><span class="params">(Currency currency)</span> &#123;</span><br><span class="line">        <span class="comment">// å¤„ç†50ä»¥ä¸Šçš„è´§å¸</span></span><br><span class="line">        <span class="keyword">if</span> (currency.getAmount() &gt;= <span class="number">50</span>) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> currency.getAmount() / <span class="number">50</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">remainder</span> <span class="operator">=</span> currency.getAmount() % <span class="number">50</span>;</span><br><span class="line">            System.out.println(<span class="string">&quot;Dispensing &quot;</span> + num + <span class="string">&quot; 50$ note.&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (remainder != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="built_in">this</span>.chain.dispense(<span class="keyword">new</span> <span class="title class_">Currency</span>(remainder));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// äº¤ç»™ä¸‹ä¸€ä¸ªé“¾è·¯å¤„ç†</span></span><br><span class="line">            <span class="built_in">this</span>.chain.dispense(currency);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong><em>Dollar20Dispenser.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.chivalry.design.patterns.chain.responsibility;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-19 18:34:54</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dollar20Dispenser</span> <span class="keyword">implements</span> <span class="title class_">DispenseChain</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> DispenseChain chain;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNextChain</span><span class="params">(DispenseChain nextChain)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.chain = nextChain;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dispense</span><span class="params">(Currency cur)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (cur.getAmount() &gt;= <span class="number">20</span>) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> cur.getAmount() / <span class="number">20</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">remainder</span> <span class="operator">=</span> cur.getAmount() % <span class="number">20</span>;</span><br><span class="line">            System.out.println(<span class="string">&quot;Dispensing &quot;</span> + num + <span class="string">&quot; 20$ note&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (remainder != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="built_in">this</span>.chain.dispense(<span class="keyword">new</span> <span class="title class_">Currency</span>(remainder));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.chain.dispense(cur);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong><em>Dollar10Dispenser.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.chivalry.design.patterns.chain.responsibility;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-19 18:36:42</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dollar10Dispenser</span> <span class="keyword">implements</span> <span class="title class_">DispenseChain</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> DispenseChain chain;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNextChain</span><span class="params">(DispenseChain nextChain)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.chain = nextChain;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dispense</span><span class="params">(Currency cur)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (cur.getAmount() &gt;= <span class="number">10</span>) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> cur.getAmount() / <span class="number">10</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">remainder</span> <span class="operator">=</span> cur.getAmount() % <span class="number">10</span>;</span><br><span class="line">            System.out.println(<span class="string">&quot;Dispensing &quot;</span> + num + <span class="string">&quot; 10$ note&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (remainder != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="built_in">this</span>.chain.dispense(<span class="keyword">new</span> <span class="title class_">Currency</span>(remainder));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.chain.dispense(cur);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œè¦æ³¨æ„çš„é‡è¦ç‚¹æ˜¯åˆ†é…æ–¹æ³•çš„å®ç°ã€‚ æ‚¨ä¼šæ³¨æ„åˆ°ï¼Œæ¯ä¸ªå®ç°éƒ½å°è¯•å¤„ç†è¯¥è¯·æ±‚ï¼Œå¹¶ä¸”æ ¹æ®æ•°é‡ï¼Œå®ƒå¯èƒ½ä¼šå¤„ç†éƒ¨åˆ†æˆ–å…¨éƒ¨è¯·æ±‚ã€‚</p><p>å¦‚æœé“¾ä¸­çš„ä¸€ä¸ªä¸èƒ½å®Œå…¨å¤„ç†å®ƒï¼Œå®ƒå°†è¯·æ±‚å‘é€åˆ°é“¾ä¸­çš„ä¸‹ä¸€ä¸ªå¤„ç†å™¨ä»¥å¤„ç†å‰©ä½™çš„è¯·æ±‚ã€‚ å¦‚æœå¤„ç†å™¨æ— æ³•å¤„ç†ä»»ä½•å†…å®¹ï¼Œå®ƒåªä¼šå°†ç›¸åŒçš„è¯·æ±‚è½¬å‘åˆ°ä¸‹ä¸€ä¸ªé“¾ã€‚</p><h3 id="è´£ä»»é“¾è®¾è®¡æ¨¡å¼â€“åˆ›å»ºé“¾"><a href="#è´£ä»»é“¾è®¾è®¡æ¨¡å¼â€“åˆ›å»ºé“¾" class="headerlink" title="è´£ä»»é“¾è®¾è®¡æ¨¡å¼â€“åˆ›å»ºé“¾"></a>è´£ä»»é“¾è®¾è®¡æ¨¡å¼â€“åˆ›å»ºé“¾</h3><p>è¿™æ˜¯éå¸¸é‡è¦çš„ä¸€æ­¥ï¼Œæˆ‘ä»¬åº”è¯¥å°å¿ƒçš„åˆ›å»ºé“¾ï¼Œå¦åˆ™å¤„ç†å™¨å¯èƒ½æ ¹æœ¬ä¸ä¼šæ”¶åˆ°ä»»ä½•è¯·æ±‚ã€‚ ä¾‹å¦‚ï¼Œåœ¨æˆ‘ä»¬çš„å®ç°ä¸­ï¼Œå¦‚æœæˆ‘ä»¬å°†ç¬¬ä¸€ä¸ªå¤„ç†å™¨é“¾ä¿ç•™ä¸º<code>Dollar10Dispenser</code>ï¼Œç„¶åå°†å…¶ä¿ç•™ä¸º<code>Dollar20Dispenser</code>ï¼Œåˆ™è¯¥è¯·æ±‚å°†æ°¸è¿œä¸ä¼šè½¬å‘åˆ°ç¬¬äºŒä¸ªå¤„ç†å™¨ï¼Œå¹¶ä¸”è¯¥é“¾å°†å˜å¾—æ— ç”¨ã€‚</p><p>è¿™æ˜¯æˆ‘ä»¬çš„ATMè‡ªåŠ¨ææ¬¾æœºå®æ–½æ–¹æ¡ˆï¼Œç”¨äºå¤„ç†ç”¨æˆ·è¯·æ±‚çš„é‡‘é¢ã€‚</p><p><strong><em>ATMDispenseChain.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ATMæœºè´£ä»»é“¾æ¨¡å¼ç¤ºä¾‹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-19 18:39:52</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ATMDispenseChain</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> DispenseChain chainFirst;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ATMDispenseChain</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// initialize the chain</span></span><br><span class="line">        chainFirst = <span class="keyword">new</span> <span class="title class_">Dollar50Dispenser</span>();</span><br><span class="line">        <span class="type">DispenseChain</span> <span class="variable">chain2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dollar20Dispenser</span>();</span><br><span class="line">        <span class="type">DispenseChain</span> <span class="variable">chain3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dollar10Dispenser</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// set the chain of responsibility</span></span><br><span class="line">        chainFirst.setNextChain(chain2);</span><br><span class="line">        chain2.setNextChain(chain3);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dispense</span><span class="params">(Currency currency)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.chainFirst.dispense(currency);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ATMDispenseChain</span> <span class="variable">atmDispenseChain</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ATMDispenseChain</span>();</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Enter amount to dispense.&quot;</span>);</span><br><span class="line">            <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">            <span class="type">int</span> <span class="variable">amount</span> <span class="operator">=</span> input.nextInt();</span><br><span class="line">            <span class="keyword">if</span> (amount % <span class="number">10</span> != <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Amount should be in multiple of 10s.&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// process the request</span></span><br><span class="line">            atmDispenseChain.dispense(<span class="keyword">new</span> <span class="title class_">Currency</span>(amount));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬åœ¨åº”ç”¨ç¨‹åºä¸Šæ–¹è¿è¡Œæ—¶ï¼Œæˆ‘ä»¬å°†å¾—åˆ°å¦‚ä¸‹è¾“å‡ºã€‚</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Enter amount to dispense.</span><br><span class="line"><span class="number">120</span></span><br><span class="line">Dispensing <span class="number">2</span> <span class="number">50</span><span class="string">$ </span>note.</span><br><span class="line">Dispensing <span class="number">1</span> <span class="number">20</span><span class="string">$ </span>note</span><br><span class="line">Enter amount to dispense.</span><br><span class="line"><span class="number">150</span></span><br><span class="line">Dispensing <span class="number">3</span> <span class="number">50</span><span class="string">$ </span>note.</span><br><span class="line">Enter amount to dispense.</span><br><span class="line"><span class="number">80</span></span><br><span class="line">Dispensing <span class="number">1</span> <span class="number">50</span><span class="string">$ </span>note.</span><br><span class="line">Dispensing <span class="number">1</span> <span class="number">20</span><span class="string">$ </span>note</span><br><span class="line">Dispensing <span class="number">1</span> <span class="number">10</span><span class="string">$ </span>note</span><br><span class="line">Enter amount to dispense.</span><br><span class="line"><span class="number">70</span></span><br><span class="line">Dispensing <span class="number">1</span> <span class="number">50</span><span class="string">$ </span>note.</span><br><span class="line">Dispensing <span class="number">1</span> <span class="number">20</span><span class="string">$ </span>note</span><br><span class="line">Enter amount to dispense.</span><br><span class="line"><span class="number">6</span></span><br><span class="line">Amount should be in multiple <span class="keyword">of</span> <span class="number">10</span>s.</span><br></pre></td></tr></table></figure><h3 id="è´£ä»»é“¾è®¾è®¡æ¨¡å¼ç±»å›¾"><a href="#è´£ä»»é“¾è®¾è®¡æ¨¡å¼ç±»å›¾" class="headerlink" title="è´£ä»»é“¾è®¾è®¡æ¨¡å¼ç±»å›¾"></a>è´£ä»»é“¾è®¾è®¡æ¨¡å¼ç±»å›¾</h3><p>æˆ‘ä»¬çš„ATMè´£ä»»é“¾è®¾è®¡æ¨¡å¼å®ç°çš„åˆ†é…ç¤ºä¾‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://tva2.sinaimg.cn/large/008aQ1h9ly1giw5jh1wljj30g709lq36.jpg"></p><h3 id="è´£ä»»é“¾è®¾è®¡æ¨¡å¼è¦ç‚¹"><a href="#è´£ä»»é“¾è®¾è®¡æ¨¡å¼è¦ç‚¹" class="headerlink" title="è´£ä»»é“¾è®¾è®¡æ¨¡å¼è¦ç‚¹"></a>è´£ä»»é“¾è®¾è®¡æ¨¡å¼è¦ç‚¹</h3><ul><li>å®¢æˆ·ä¸çŸ¥é“é“¾ä¸­çš„å“ªä¸€éƒ¨åˆ†å°†å¤„ç†è¯·æ±‚ï¼Œå®ƒå°†æŠŠè¯·æ±‚å‘é€åˆ°é“¾ä¸­çš„ç¬¬ä¸€ä¸ªå¯¹è±¡ã€‚ ä¾‹å¦‚ï¼Œåœ¨æˆ‘ä»¬çš„ç¨‹åºä¸­ï¼Œ<code>ATMDispenseChain</code>ä¸çŸ¥é“æ˜¯è°åœ¨å¤„ç†åˆ†é…è¾“å…¥é‡‘é¢çš„è¯·æ±‚ã€‚</li><li>é“¾ä¸­çš„æ¯ä¸ªå¯¹è±¡éƒ½æœ‰å…¶è‡ªå·±çš„å®ç°æ¥å¤„ç†è¯·æ±‚ï¼ˆå…¨éƒ¨æˆ–éƒ¨åˆ†è¯·æ±‚ï¼‰æˆ–å°†å…¶å‘é€åˆ°é“¾ä¸­çš„ä¸‹ä¸€ä¸ªå¯¹è±¡ã€‚</li><li>é“¾ä¸­çš„æ¯ä¸ªå¯¹è±¡éƒ½åº”å¼•ç”¨é“¾ä¸­çš„ä¸‹ä¸€ä¸ªå¯¹è±¡ï¼Œä»¥å°†è¯·æ±‚è½¬å‘è‡³è¯¥å¯¹è±¡</li><li>åˆ›å»ºé“¾çš„è¿‡ç¨‹éå¸¸é‡è¦ï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´è¯·æ±‚æ°¸è¿œä¸ä¼šè½¬å‘åˆ°ç‰¹å®šå¤„ç†å™¨ï¼Œæˆ–è€…é“¾ä¸­æ²¡æœ‰èƒ½å¤Ÿå¤„ç†è¯¥è¯·æ±‚çš„å¯¹è±¡ã€‚ åœ¨æˆ‘çš„å®ç°ä¸­ï¼Œæˆ‘æ·»åŠ äº†å¯¹ç”¨æˆ·è¾“å…¥é‡‘é¢çš„æ£€æŸ¥ï¼Œä»¥ç¡®ä¿æ‰€æœ‰å¤„ç†å™¨éƒ½å¯¹å®ƒè¿›è¡Œäº†å®Œå…¨å¤„ç†ï¼Œä½†å¦‚æœè¯·æ±‚åˆ°è¾¾æœ€åä¸€ä¸ªå¯¹è±¡å¹¶ä¸”é“¾ä¸­æ²¡æœ‰å…¶ä»–å¯¹è±¡ï¼Œæˆ‘ä»¬å¯èƒ½ä¸ä¼šæ£€æŸ¥å¹¶æŠ›å‡ºå¼‚å¸¸å°†è¯·æ±‚è½¬å‘ç»™ã€‚ è¿™æ˜¯è®¾è®¡å†³å®šã€‚</li><li>è´£ä»»é“¾è®¾è®¡æ¨¡å¼å¯ä»¥å¾ˆå¥½åœ°å®ç°å¤±å»è€¦åˆï¼Œä½†æ˜¯å¦‚æœå¤§å¤šæ•°ä»£ç åœ¨æ‰€æœ‰å®ç°ä¸­éƒ½æ˜¯é€šç”¨çš„ï¼Œé‚£ä¹ˆå®ƒå°±æœ‰è®¸å¤šå®ç°ç±»å’Œç»´æŠ¤é—®é¢˜çš„æƒè¡¡ã€‚</li></ul><h3 id="JDKä¸­çš„è´£ä»»é“¾æ¨¡å¼ç¤ºä¾‹-1"><a href="#JDKä¸­çš„è´£ä»»é“¾æ¨¡å¼ç¤ºä¾‹-1" class="headerlink" title="JDKä¸­çš„è´£ä»»é“¾æ¨¡å¼ç¤ºä¾‹"></a>JDKä¸­çš„è´£ä»»é“¾æ¨¡å¼ç¤ºä¾‹</h3><ul><li><code>java.util.logging.Logger#log()</code></li><li><code>javax.servlet.Filter#doFilter()</code></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://github.com/user-attachments/assets/0a5bd2fd-b5ed-491c-9dd0-71de84efb5d9&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://chivalry727.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="è´£ä»»é“¾æ¨¡å¼" scheme="https://chivalry727.github.io/tags/%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F/"/>
    
      <category term="Chain of Responsibility Design Pattern" scheme="https://chivalry727.github.io/tags/Chain-of-Responsibility-Design-Pattern/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹è®¿é—®è€…æ¨¡å¼</title>
    <link href="https://chivalry727.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
    <id>https://chivalry727.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F/</id>
    <published>2020-09-15T07:27:55.000Z</published>
    <updated>2025-02-27T11:06:18.812Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://github.com/user-attachments/assets/6678324b-1791-418b-8c94-812b238b1419"></p><span id="more"></span><h2 id="è®¾è®¡æ¨¡å¼ä¹‹è®¿é—®è€…æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼ä¹‹è®¿é—®è€…æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¹‹è®¿é—®è€…æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼ä¹‹è®¿é—®è€…æ¨¡å¼</h2><h3 id="ä»€ä¹ˆæ˜¯è®¿é—®è€…æ¨¡å¼"><a href="#ä»€ä¹ˆæ˜¯è®¿é—®è€…æ¨¡å¼" class="headerlink" title="ä»€ä¹ˆæ˜¯è®¿é—®è€…æ¨¡å¼"></a>ä»€ä¹ˆæ˜¯è®¿é—®è€…æ¨¡å¼</h3><p>è®¿å®¢è®¾è®¡æ¨¡å¼æ˜¯è¡Œä¸ºè®¾è®¡æ¨¡å¼ä¹‹ä¸€ã€‚å½“æˆ‘ä»¬å¿…é¡»å¯¹ä¸€ç»„ç›¸ä¼¼ç±»å‹çš„å¯¹è±¡æ‰§è¡Œæ“ä½œæ—¶ï¼Œå°†ä½¿ç”¨è®¿é—®è€…æ¨¡å¼ã€‚ å€ŸåŠ©è®¿é—®è€…æ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ“ä½œé€»è¾‘ä»å¯¹è±¡ç§»åŠ¨åˆ°å¦ä¸€ä¸ªç±»ã€‚</p><p>ä¾‹å¦‚ï¼Œè€ƒè™‘ä¸€ä¸ªè´­ç‰©è½¦ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¶ä¸­æ·»åŠ ä¸åŒç±»å‹çš„é¡¹ç›®ï¼ˆå…ƒç´ ï¼‰ã€‚ å½“æˆ‘ä»¬ç‚¹å‡»ç»“å¸æŒ‰é’®æ—¶ï¼Œå®ƒå°†è®¡ç®—è¦æ”¯ä»˜çš„æ€»é‡‘é¢ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†è®¡ç®—é€»è¾‘åŒ…å«åœ¨é¡¹ç›®ç±»ä¸­ï¼Œæˆ–è€…å¯ä»¥ä½¿ç”¨è®¿é—®è€…æ¨¡å¼å°†æ­¤é€»è¾‘ç§»åˆ°å¦ä¸€ä¸ªç±»ä¸­ã€‚ è®©æˆ‘ä»¬åœ¨è®¿é—®è€…æ¨¡å¼ç¤ºä¾‹ä¸­å®ç°æ­¤åŠŸèƒ½ã€‚</p><h3 id="è®¿é—®è€…è®¾è®¡æ¨¡å¼Javaç¤ºä¾‹"><a href="#è®¿é—®è€…è®¾è®¡æ¨¡å¼Javaç¤ºä¾‹" class="headerlink" title="è®¿é—®è€…è®¾è®¡æ¨¡å¼Javaç¤ºä¾‹"></a>è®¿é—®è€…è®¾è®¡æ¨¡å¼Javaç¤ºä¾‹</h3><p>ä¸ºäº†å®ç°è®¿å®¢æ¨¡å¼ï¼Œé¦–å…ˆæˆ‘ä»¬å°†åˆ›å»ºè¦åœ¨è´­ç‰©è½¦ä¸­ä½¿ç”¨çš„ä¸åŒç±»å‹çš„é¡¹ç›®ï¼ˆå…ƒç´ ï¼‰ã€‚</p><p><strong><em>ItemElement.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-19 18:55:06</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ItemElement</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">accept</span><span class="params">(ShoppingCartVisitor visitor)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„ï¼Œ<code>accept()</code>æ–¹æ³•é‡‡ç”¨<code>Visitor</code>å‚æ•°ã€‚ æˆ‘ä»¬å¯ä»¥æœ‰ä¸€äº›å…¶ä»–çš„æ–¹æ³•ä¹Ÿç‰¹å®šäºé¡¹ç›®ï¼Œä½†æ˜¯ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘å¹¶æ²¡æœ‰è®¨è®ºå¤ªå¤šç»†èŠ‚ï¼Œè€Œåªå…³æ³¨è®¿é—®è€…æ¨¡å¼ã€‚</p><p>è®©æˆ‘ä»¬ä¸ºä¸åŒç±»å‹çš„é¡¹ç›®åˆ›å»ºä¸€äº›å…·ä½“çš„ç±»ã€‚</p><p><strong><em>Book.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Book</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-19 19:01:16</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span> <span class="keyword">implements</span> <span class="title class_">ItemElement</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> price;</span><br><span class="line">    <span class="keyword">private</span> String isbnNumber;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Book</span><span class="params">(<span class="type">int</span> price, String isbnNumber)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.price = price;</span><br><span class="line">        <span class="built_in">this</span>.isbnNumber = isbnNumber;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getPrice</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getIsbnNumber</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> isbnNumber;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">accept</span><span class="params">(ShoppingCartVisitor visitor)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> visitor.visit(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong><em>Fruit.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Fruit</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-19 19:02:45</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Fruit</span> <span class="keyword">implements</span> <span class="title class_">ItemElement</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> pricePerKg;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> weight;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Fruit</span><span class="params">(<span class="type">int</span> pricePerKg, <span class="type">int</span> weight, String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.pricePerKg = pricePerKg;</span><br><span class="line">        <span class="built_in">this</span>.weight = weight;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getPricePerKg</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> pricePerKg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getWeight</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> weight;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">accept</span><span class="params">(ShoppingCartVisitor visitor)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> visitor.visit(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„å…·ä½“ç±»ä¸­<code>accept()</code>æ–¹æ³•çš„å®ç°ï¼Œå®ƒè°ƒç”¨<code>Visitor</code>çš„<code>visit()</code>æ–¹æ³•å¹¶å°†å…¶è‡ªèº«ä½œä¸ºå‚æ•°ä¼ é€’ã€‚</p><p>æˆ‘ä»¬åœ¨<code>Visitor</code>ç•Œé¢ä¸­æœ‰é’ˆå¯¹ä¸åŒç±»å‹é¡¹ç›®çš„<code>visit()</code>æ–¹æ³•ï¼Œå°†ç”±å…·ä½“çš„è®¿é—®è€…ç±»å®ç°ã€‚</p><p><strong><em>ShoppingCartVisitor.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è®¿é—®è€…</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-19 18:55:46</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ShoppingCartVisitor</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¿é—®æ–¹æ³•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> element</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">visit</span><span class="params">(ItemElement element)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œæˆ‘ä»¬å°†å®ç°è®¿é—®è€…ï¼Œå¹¶ä¸”æ¯ä¸ªé¡¹ç›®éƒ½æœ‰å…¶è‡ªå·±çš„é€»è¾‘æ¥è®¡ç®—è´¹ç”¨ã€‚</p><p><strong><em>ShoppingCartVisitorImpl.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è®¿é—®è€…å®ç°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-19 19:04:36</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ShoppingCartVisitorImpl</span> <span class="keyword">implements</span> <span class="title class_">ShoppingCartVisitor</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">visit</span><span class="params">(ItemElement element)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">cost</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// apply 5$ discount if book price is greater than 50</span></span><br><span class="line">        <span class="keyword">if</span> (element <span class="keyword">instanceof</span> Book) &#123;</span><br><span class="line">            <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> (Book) element;</span><br><span class="line">            <span class="keyword">if</span> (book.getPrice() &gt; <span class="number">50</span>) &#123;</span><br><span class="line">                cost = book.getPrice() - <span class="number">5</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                cost = book.getPrice();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;Book ISBN:: &quot;</span> + book.getIsbnNumber() + <span class="string">&quot; cost = &quot;</span> + cost);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// fruit</span></span><br><span class="line">        <span class="keyword">if</span> (element <span class="keyword">instanceof</span> Fruit) &#123;</span><br><span class="line">            <span class="type">Fruit</span> <span class="variable">fruit</span> <span class="operator">=</span> (Fruit) element;</span><br><span class="line">            cost = fruit.getPricePerKg() + fruit.getWeight();</span><br><span class="line">            System.out.println(fruit.getName() + <span class="string">&quot; cost = &quot;</span> + cost);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cost;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åœ¨å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨è®¿é—®è€…æ¨¡å¼ç¤ºä¾‹ã€‚</p><p><strong><em>ShoppingCartClient.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-19 19:08:50</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ShoppingCartClient</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// items</span></span><br><span class="line">        ItemElement[] items = <span class="keyword">new</span> <span class="title class_">ItemElement</span>[]&#123;</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Book</span>(<span class="number">20</span>, <span class="string">&quot;1234&quot;</span>),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Book</span>(<span class="number">100</span>, <span class="string">&quot;5678&quot;</span>),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Fruit</span>(<span class="number">10</span>, <span class="number">2</span>, <span class="string">&quot;Banana&quot;</span>),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Fruit</span>(<span class="number">5</span>, <span class="number">5</span>, <span class="string">&quot;Apple&quot;</span>)</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// total price</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">total</span> <span class="operator">=</span> calculatePrice(items);</span><br><span class="line">        System.out.println(<span class="string">&quot;Total Cost = &quot;</span> + total);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">calculatePrice</span><span class="params">(ItemElement[] items)</span> &#123;</span><br><span class="line">        <span class="type">ShoppingCartVisitor</span> <span class="variable">visitor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ShoppingCartVisitorImpl</span>();</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (ItemElement item : items) &#123;</span><br><span class="line">            sum += item.accept(visitor);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬åœ¨è®¿é—®è€…æ¨¡å¼å®¢æˆ·ç«¯ç¨‹åºä¹‹ä¸Šè¿è¡Œæ—¶ï¼Œæˆ‘ä»¬å¾—åˆ°ä»¥ä¸‹è¾“å‡ºã€‚</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Book</span> ISBN:: <span class="number">1234</span> cost = <span class="number">20</span></span><br><span class="line"><span class="attribute">Book</span> ISBN:: <span class="number">5678</span> cost = <span class="number">95</span></span><br><span class="line"><span class="attribute">Banana</span> cost = <span class="number">12</span></span><br><span class="line"><span class="attribute">Apple</span> cost = <span class="number">10</span></span><br><span class="line"><span class="attribute">Total</span> Cost = <span class="number">137</span></span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„ï¼Œæ‰€æœ‰é¡¹ç›®ä¸­çš„<code>accept()</code>æ–¹æ³•çš„å®ç°éƒ½æ˜¯ç›¸åŒçš„ï¼Œä½†å¯ä»¥æœ‰æ‰€ä¸åŒï¼Œä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨é€»è¾‘æ£€æŸ¥é¡¹ç›®æ˜¯å¦å¯ç”¨ï¼Œç„¶åæ ¹æœ¬ä¸è°ƒç”¨<code>visit()</code>æ–¹æ³•ã€‚</p><h3 id="è®¿é—®è€…è®¾è®¡æ¨¡å¼ç±»å›¾"><a href="#è®¿é—®è€…è®¾è®¡æ¨¡å¼ç±»å›¾" class="headerlink" title="è®¿é—®è€…è®¾è®¡æ¨¡å¼ç±»å›¾"></a>è®¿é—®è€…è®¾è®¡æ¨¡å¼ç±»å›¾</h3><p>æˆ‘ä»¬çš„è®¿é—®è€…è®¾è®¡æ¨¡å¼å®ç°çš„ç±»å›¾æ˜¯ï¼š</p><p><img src="https://tva1.sinaimg.cn/large/008aQ1h9ly1giw6hkegmrj30nr0ck0tf.jpg"></p><h3 id="è®¿é—®è€…æ¨¡å¼çš„å¥½å¤„"><a href="#è®¿é—®è€…æ¨¡å¼çš„å¥½å¤„" class="headerlink" title="è®¿é—®è€…æ¨¡å¼çš„å¥½å¤„"></a>è®¿é—®è€…æ¨¡å¼çš„å¥½å¤„</h3><p>è¿™ç§æ¨¡å¼çš„å¥½å¤„æ˜¯ï¼Œå¦‚æœæ“ä½œé€»è¾‘å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä»…éœ€è¦åœ¨è®¿é—®è€…å®ç°ä¸­è¿›è¡Œæ›´æ”¹ï¼Œè€Œæ— éœ€åœ¨æ‰€æœ‰é¡¹ç›®ç±»ä¸­è¿›è¡Œæ›´æ”¹ã€‚</p><p>å¦ä¸€ä¸ªå¥½å¤„æ˜¯ï¼Œå°†æ–°é¡¹ç›®æ·»åŠ åˆ°ç³»ç»Ÿå¾ˆå®¹æ˜“ï¼Œå®ƒä»…éœ€è¦åœ¨è®¿é—®è€…ç•Œé¢å’Œå®ç°ä¸­è¿›è¡Œæ›´æ”¹ï¼Œè€Œç°æœ‰é¡¹ç›®ç±»å°†ä¸å—å½±å“ã€‚</p><h3 id="è®¿é—®è€…æ¨¡å¼é™åˆ¶"><a href="#è®¿é—®è€…æ¨¡å¼é™åˆ¶" class="headerlink" title="è®¿é—®è€…æ¨¡å¼é™åˆ¶"></a>è®¿é—®è€…æ¨¡å¼é™åˆ¶</h3><p>è®¿å®¢æ¨¡å¼çš„ç¼ºç‚¹åœ¨äºï¼Œåœ¨è®¾è®¡æ—¶æˆ‘ä»¬åº”è¯¥çŸ¥é“<code>visit()</code>æ–¹æ³•çš„è¿”å›ç±»å‹ï¼Œå¦åˆ™æˆ‘ä»¬å°†ä¸å¾—ä¸æ›´æ”¹æ¥å£åŠå…¶æ‰€æœ‰å®ç°ã€‚ å¦ä¸€ä¸ªç¼ºç‚¹æ˜¯ï¼Œå¦‚æœè®¿é—®è€…æ¥å£çš„å®ç°è¿‡å¤šï¼Œåˆ™å¾ˆéš¾æ‰©å±•ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://github.com/user-attachments/assets/6678324b-1791-418b-8c94-812b238b1419&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://chivalry727.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="è®¿é—®è€…æ¨¡å¼" scheme="https://chivalry727.github.io/tags/%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
    
      <category term="Visitor Design Pattern" scheme="https://chivalry727.github.io/tags/Visitor-Design-Pattern/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹äº«å…ƒæ¨¡å¼</title>
    <link href="https://chivalry727.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F/"/>
    <id>https://chivalry727.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F/</id>
    <published>2020-09-15T07:27:31.000Z</published>
    <updated>2025-02-27T11:12:32.974Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://github.com/user-attachments/assets/6fcd94d4-064e-45fc-9838-c5f5ca7eac7d"></p><span id="more"></span><h2 id="è®¾è®¡æ¨¡å¼ä¹‹äº«å…ƒæ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼ä¹‹äº«å…ƒæ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¹‹äº«å…ƒæ¨¡å¼"></a>è®¾è®¡æ¨¡å¼ä¹‹äº«å…ƒæ¨¡å¼</h2><p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°†ç ”ç©¶Flyweightè®¾è®¡æ¨¡å¼ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯äº«å…ƒè®¾è®¡æ¨¡å¼"><a href="#ä»€ä¹ˆæ˜¯äº«å…ƒè®¾è®¡æ¨¡å¼" class="headerlink" title="ä»€ä¹ˆæ˜¯äº«å…ƒè®¾è®¡æ¨¡å¼"></a>ä»€ä¹ˆæ˜¯äº«å…ƒè®¾è®¡æ¨¡å¼</h3><p>äº«å…ƒæ¨¡å¼ï¼ˆFlyweight Patternï¼‰ä¸»è¦ç”¨äºå‡å°‘åˆ›å»ºå¯¹è±¡çš„æ•°é‡ï¼Œä»¥å‡å°‘å†…å­˜å ç”¨å’Œæé«˜æ€§èƒ½ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºç»“æ„å‹æ¨¡å¼ï¼Œä¾‹å¦‚<code>Facade</code>æ¨¡å¼ï¼Œ<code>Adapter</code>æ¨¡å¼å’Œ<code>Decorator</code>æ¨¡å¼ã€‚å®ƒæä¾›äº†å‡å°‘å¯¹è±¡æ•°é‡ä»è€Œæ”¹å–„åº”ç”¨æ‰€éœ€çš„å¯¹è±¡ç»“æ„çš„æ–¹å¼ã€‚å¹¶ä¸”ä½¿ç”¨å…±äº«æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡ç»†ç²’åº¦çš„å¯¹è±¡ã€‚</p><p>å½“æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªç±»çš„è®¸å¤šå¯¹è±¡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨Flyweightè®¾è®¡æ¨¡å¼ã€‚ ç”±äºæ¯ä¸ªå¯¹è±¡éƒ½ä¼šå ç”¨å¯¹äºä½å†…å­˜è®¾å¤‡ï¼ˆä¾‹å¦‚ç§»åŠ¨è®¾å¤‡æˆ–åµŒå…¥å¼ç³»ç»Ÿï¼‰è‡³å…³é‡è¦çš„å†…å­˜ç©ºé—´ï¼Œå› æ­¤å¯ä»¥åº”ç”¨è½»é‡çº§è®¾è®¡æ¨¡å¼æ¥é€šè¿‡å…±äº«å¯¹è±¡æ¥å‡å°‘å†…å­˜è´Ÿè½½ã€‚</p><h3 id="äº«å…ƒè®¾è®¡æ¨¡å¼ä½¿ç”¨åœºæ™¯"><a href="#äº«å…ƒè®¾è®¡æ¨¡å¼ä½¿ç”¨åœºæ™¯" class="headerlink" title="äº«å…ƒè®¾è®¡æ¨¡å¼ä½¿ç”¨åœºæ™¯"></a>äº«å…ƒè®¾è®¡æ¨¡å¼ä½¿ç”¨åœºæ™¯</h3><p>åœ¨åº”ç”¨flyweightè®¾è®¡æ¨¡å¼ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘ä»¥ä¸‹å› ç´ ï¼š</p><ul><li>åº”ç”¨ç¨‹åºè¦åˆ›å»ºçš„å¯¹è±¡æ•°é‡åº”è¯¥å¾ˆå¤§ã€‚</li><li>å¯¹è±¡çš„åˆ›å»ºå ç”¨å¤§é‡å†…å­˜ï¼Œå¹¶ä¸”ä¹Ÿå¾ˆè€—æ—¶ã€‚</li><li>å¯¹è±¡å±æ€§å¯ä»¥åˆ†ä¸ºå†…éƒ¨å±æ€§å’Œå¤–éƒ¨å±æ€§ï¼Œå¯¹è±¡çš„å¤–éƒ¨å±æ€§åº”ç”±å®¢æˆ·ç«¯ç¨‹åºå®šä¹‰ã€‚</li></ul><p>è¦åº”ç”¨flyweightæ¨¡å¼ï¼Œæˆ‘ä»¬éœ€è¦å°†Objectå±æ€§åˆ†ä¸ºå†…éƒ¨å±æ€§å’Œå¤–éƒ¨å±æ€§ã€‚ å†…éƒ¨å±æ€§ä½¿å¯¹è±¡å”¯ä¸€ï¼Œè€Œå¤–éƒ¨å±æ€§ç”±å®¢æˆ·ç«¯ä»£ç è®¾ç½®å¹¶ç”¨äºæ‰§è¡Œä¸åŒçš„æ“ä½œã€‚ ä¾‹å¦‚ï¼Œ<code>Circle</code>å¯¹è±¡å¯ä»¥å…·æœ‰å¤–éƒ¨å±æ€§ï¼Œä¾‹å¦‚é¢œè‰²å’Œå®½åº¦ã€‚</p><p>ä¸ºäº†åº”ç”¨flyweightæ¨¡å¼ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª<code>Flyweight factory</code>å·¥å‚æ¥è¿”å›å…±äº«å¯¹è±¡ã€‚ å¯¹äºæˆ‘ä»¬çš„ç¤ºä¾‹ï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦ä½¿ç”¨çº¿æ¡å’Œæ¤­åœ†å½¢åˆ›å»ºå›¾å½¢ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å°†æœ‰ä¸€ä¸ª<code>Shape</code>ç•Œé¢åŠå…¶å…·ä½“å®ç°ï¼Œå¦‚<code>Line</code>å’Œ<code>Oval</code>ã€‚ æ¤­åœ†ç±»å°†å…·æœ‰å›ºæœ‰å±æ€§ï¼Œä»¥ç¡®å®šæ˜¯å¦ç”¨ç»™å®šçš„é¢œè‰²å¡«å……æ¤­åœ†ï¼Œè€Œ<code>Line</code>å°†ä¸å…·æœ‰ä»»ä½•å›ºæœ‰å±æ€§ã€‚</p><h3 id="Flyweightè®¾è®¡æ¨¡å¼ä»£ç ç¤ºä¾‹"><a href="#Flyweightè®¾è®¡æ¨¡å¼ä»£ç ç¤ºä¾‹" class="headerlink" title="Flyweightè®¾è®¡æ¨¡å¼ä»£ç ç¤ºä¾‹"></a>Flyweightè®¾è®¡æ¨¡å¼ä»£ç ç¤ºä¾‹</h3><p><strong><em>Shape.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.awt.Graphics;</span><br><span class="line"><span class="keyword">import</span> java.awt.Color;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å›¾å½¢æ¥å£</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-19 19:36:10</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç»˜ç”»æ–¹æ³•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> g</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> x</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> y</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> width</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> height</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> color</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">(Graphics g, <span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> width, <span class="type">int</span> height, Color color)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong><em>Line.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.awt.Graphics;</span><br><span class="line"><span class="keyword">import</span> java.awt.Color;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * çº¿</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-19 19:37:13</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Line</span> <span class="keyword">implements</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Line</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Creating Line object.&quot;</span>);</span><br><span class="line">        <span class="comment">// adding time delay</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">2</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">(Graphics line, <span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> width, <span class="type">int</span> height, Color color)</span> &#123;</span><br><span class="line">        line.setColor(color);</span><br><span class="line">        line.drawLine(x, y, width, height);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong><em>Oval.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.awt.Graphics;</span><br><span class="line"><span class="keyword">import</span> java.awt.Color;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¤­åœ†å½¢</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-19 19:37:30</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Oval</span> <span class="keyword">implements</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * intrinsic property</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> fill;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Oval</span><span class="params">(<span class="type">boolean</span> fill)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.fill = fill;</span><br><span class="line">        System.out.println(<span class="string">&quot;Creating Oval object with fill = &quot;</span> + fill);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// adding time delay</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            TimeUnit.SECONDS.sleep(<span class="number">2</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">(Graphics circle, <span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> width, <span class="type">int</span> height, Color color)</span> &#123;</span><br><span class="line">        circle.setColor(color);</span><br><span class="line">        circle.drawOval(x, y, width, height);</span><br><span class="line">        <span class="keyword">if</span> (fill) &#123;</span><br><span class="line">            circle.fillOval(x, y, width, height);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œæˆ‘åœ¨åˆ›å»ºå…·ä½“ç±»çš„å¯¹è±¡æ—¶æ•…æ„å¼•å…¥äº†å»¶è¿Ÿï¼Œä»¥ä½¿flyweightæ¨¡å¼å¯ç”¨äºå®ä¾‹åŒ–æ—¶èŠ±è´¹å¤§é‡æ—¶é—´çš„å¯¹è±¡ã€‚</p><h3 id="Flyweight-Factory"><a href="#Flyweight-Factory" class="headerlink" title="Flyweight Factory"></a>Flyweight Factory</h3><p>flyweightå·¥å‚å°†ç”±å®¢æˆ·ç«¯ç¨‹åºç”¨æ¥å®ä¾‹åŒ–Objectï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨å·¥å‚ä¸­ä¿ç•™ä¸€ä¸ªObjectæ˜ å°„ï¼Œå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºä¸åº”è®¿é—®è¯¥Mapã€‚</p><p>æ¯å½“å®¢æˆ·ç«¯ç¨‹åºè°ƒç”¨ä»¥è·å–Objectçš„å®ä¾‹æ—¶ï¼Œéƒ½åº”ä»<code>HashMap</code>è¿”å›å®ƒï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„Objectå¹¶æ”¾å…¥Mapä¸­ï¼Œç„¶åè¿”å›å®ƒã€‚ æˆ‘ä»¬éœ€è¦ç¡®ä¿åœ¨åˆ›å»ºå¯¹è±¡æ—¶è€ƒè™‘æ‰€æœ‰å›ºæœ‰å±æ€§ã€‚</p><p>æˆ‘ä»¬çš„flyweightå·¥å‚ç±»çœ‹èµ·æ¥åƒä¸‹é¢çš„ä»£ç ã€‚</p><p><strong><em>ShapeFactory.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å›¾å½¢å·¥å‚æ–¹æ³•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-19 19:44:23</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ShapeFactory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Map&lt;ShapeType, Shape&gt; SHAPES = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Shape <span class="title function_">getShape</span><span class="params">(ShapeType type)</span> &#123;</span><br><span class="line">        <span class="type">Shape</span> <span class="variable">shape</span> <span class="operator">=</span> SHAPES.get(type);</span><br><span class="line">        <span class="keyword">if</span> (shape == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (type.equals(ShapeType.OVAL_FILL)) &#123;</span><br><span class="line">                shape = <span class="keyword">new</span> <span class="title class_">Oval</span>(<span class="literal">true</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type.equals(ShapeType.OVAL_NOFILL)) &#123;</span><br><span class="line">                shape = <span class="keyword">new</span> <span class="title class_">Oval</span>(<span class="literal">false</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type.equals(ShapeType.LINE)) &#123;</span><br><span class="line">                shape = <span class="keyword">new</span> <span class="title class_">Line</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            SHAPES.put(type, shape);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> shape;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„ï¼Œåœ¨<code>getShape()</code>æ–¹æ³•ä¸­å°†<code>Java Enum</code>ç”¨äºç±»å‹å®‰å…¨ï¼Œ<code>Java Composition</code>ï¼ˆå½¢çŠ¶æ˜ å°„ï¼‰å’Œ<code>Factory</code>æ¨¡å¼ã€‚</p><p><strong><em>ShapeType.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">ShapeType</span> &#123;</span><br><span class="line">    OVAL_FILL,</span><br><span class="line">    OVAL_NOFILL,</span><br><span class="line">    LINE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Flyweightè®¾è®¡æ¨¡å¼å®¢æˆ·ç«¯ç¤ºä¾‹"><a href="#Flyweightè®¾è®¡æ¨¡å¼å®¢æˆ·ç«¯ç¤ºä¾‹" class="headerlink" title="Flyweightè®¾è®¡æ¨¡å¼å®¢æˆ·ç«¯ç¤ºä¾‹"></a>Flyweightè®¾è®¡æ¨¡å¼å®¢æˆ·ç«¯ç¤ºä¾‹</h3><p>ä¸‹é¢æ˜¯ä½¿ç”¨flyweightæ¨¡å¼å®ç°çš„ç¤ºä¾‹ç¨‹åºã€‚</p><p><strong><em>DrawingClient.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.swing.*;</span><br><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-19 19:49:04</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DrawingClient</span> <span class="keyword">extends</span> <span class="title class_">JFrame</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> -<span class="number">1350200437285282550L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> width;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> height;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> ShapeType[] shapes = &#123;ShapeType.LINE, ShapeType.OVAL_FILL, ShapeType.OVAL_NOFILL&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Color[] colors = &#123;Color.RED, Color.GREEN, Color.YELLOW&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DrawingClient</span><span class="params">(<span class="type">int</span> width, <span class="type">int</span> height)</span> <span class="keyword">throws</span> HeadlessException &#123;</span><br><span class="line">        <span class="built_in">this</span>.width = width;</span><br><span class="line">        <span class="built_in">this</span>.height = height;</span><br><span class="line">        <span class="type">Container</span> <span class="variable">contentPane</span> <span class="operator">=</span> getContentPane();</span><br><span class="line"></span><br><span class="line">        <span class="type">JButton</span> <span class="variable">startButton</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JButton</span>(<span class="string">&quot;Draw&quot;</span>);</span><br><span class="line">        <span class="keyword">final</span> <span class="type">JPanel</span> <span class="variable">panel</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JPanel</span>();</span><br><span class="line"></span><br><span class="line">        contentPane.add(panel, BorderLayout.CENTER);</span><br><span class="line">        contentPane.add(startButton, BorderLayout.SOUTH);</span><br><span class="line">        setSize(width, height);</span><br><span class="line">        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        setVisible(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        startButton.addActionListener(e -&gt; &#123;</span><br><span class="line">            <span class="type">Graphics</span> <span class="variable">g</span> <span class="operator">=</span> panel.getGraphics();</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">                <span class="type">Shape</span> <span class="variable">shape</span> <span class="operator">=</span> ShapeFactory.getShape(getRandomShape());</span><br><span class="line">                shape.draw(g, getRandomX(), getRandomY(), getRandomWidth(), getRandomHeight(), getRandomColor());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ShapeType <span class="title function_">getRandomShape</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> shapes[(<span class="type">int</span>) (Math.random() * shapes.length)];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getRandomX</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="type">int</span>) (Math.random() * width);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getRandomY</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="type">int</span>) (Math.random() * height);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getRandomWidth</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="type">int</span>) (Math.random() * (width / <span class="number">10</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getRandomHeight</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="type">int</span>) (Math.random() * (height / <span class="number">10</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Color <span class="title function_">getRandomColor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> colors[(<span class="type">int</span>) (Math.random() * colors.length)];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">DrawingClient</span> <span class="variable">drawingClient</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DrawingClient</span>(<span class="number">500</span>, <span class="number">600</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘å·²ç»ä½¿ç”¨éšæœºæ•°ç”Ÿæˆåœ¨æ¡†æ¶ä¸­ç”Ÿæˆä¸åŒç±»å‹çš„Shapeã€‚</p><p>å¦‚æœåœ¨å®¢æˆ·ç«¯ç¨‹åºä¸Šè¿è¡Œï¼Œæ‚¨ä¼šæ³¨æ„åˆ°åˆ›å»ºç¬¬ä¸€ä¸ªLineå’ŒOvalå¯¹è±¡æ—¶å¡«å……ä¸ºtrueå’Œfalseçš„å»¶è¿Ÿã€‚ ä¹‹åï¼Œç”±äºç¨‹åºä½¿ç”¨å…±äº«åº“ï¼Œå› æ­¤ç¨‹åºå°†å¿«é€Ÿæ‰§è¡Œã€‚</p><p>å¤šæ¬¡å•å‡»â€œç»˜åˆ¶â€æŒ‰é’®åï¼Œæ¡†æ¶å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="https://tva4.sinaimg.cn/large/008aQ1h9ly1giw80pdgaaj30dc0ggabb.jpg"></p><p>å¹¶ä¸”æ‚¨å°†åœ¨å‘½ä»¤è¡Œä¸­çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼Œç¡®è®¤å·²å…±äº«å¯¹è±¡ã€‚</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Creating</span> <span class="type">Oval</span> <span class="class"><span class="keyword">object</span> <span class="keyword">with</span> <span class="title">fill</span> </span>= <span class="literal">false</span></span><br><span class="line"><span class="type">Creating</span> <span class="type">Line</span> <span class="keyword">object</span>.</span><br><span class="line"><span class="type">Creating</span> <span class="type">Oval</span> <span class="class"><span class="keyword">object</span> <span class="keyword">with</span> <span class="title">fill</span> </span>= <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="JDKä¸­çš„Flyweightè®¾è®¡æ¨¡å¼ç¤ºä¾‹"><a href="#JDKä¸­çš„Flyweightè®¾è®¡æ¨¡å¼ç¤ºä¾‹" class="headerlink" title="JDKä¸­çš„Flyweightè®¾è®¡æ¨¡å¼ç¤ºä¾‹"></a>JDKä¸­çš„Flyweightè®¾è®¡æ¨¡å¼ç¤ºä¾‹</h3><p>æ‰€æœ‰åŒ…è£…å™¨ç±»çš„<code>valueOf()</code>æ–¹æ³•éƒ½ä½¿ç”¨ç¼“å­˜çš„å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡æ˜¾ç¤ºäº†Flyweightè®¾è®¡æ¨¡å¼çš„ä½¿ç”¨ã€‚ æœ€å¥½çš„ç¤ºä¾‹æ˜¯<code>Java String</code>ç±»<code>String Pool</code>å®ç°ã€‚</p><h3 id="Flyweightè®¾è®¡æ¨¡å¼è¦ç‚¹"><a href="#Flyweightè®¾è®¡æ¨¡å¼è¦ç‚¹" class="headerlink" title="Flyweightè®¾è®¡æ¨¡å¼è¦ç‚¹"></a>Flyweightè®¾è®¡æ¨¡å¼è¦ç‚¹</h3><ul><li>åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œæ²¡æœ‰å¼ºåˆ¶å®¢æˆ·ç«¯ä»£ç ä½¿ç”¨Flyweightå·¥å‚åˆ›å»ºå¯¹è±¡ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥å¼ºåˆ¶è¿™æ ·åšä»¥ç¡®ä¿å®¢æˆ·ç«¯ä»£ç ä½¿ç”¨Flyweightæ¨¡å¼å®ç°ï¼Œä½†è¿™æ˜¯é’ˆå¯¹ç‰¹å®šåº”ç”¨ç¨‹åºçš„å®Œæ•´è®¾è®¡å†³ç­–ã€‚</li><li>Flyweightæ¨¡å¼å¼•å…¥äº†å¤æ‚æ€§ï¼Œå¦‚æœå…±äº«å¯¹è±¡çš„æ•°é‡å·¨å¤§ï¼Œé‚£ä¹ˆå†…å­˜å’Œæ—¶é—´ä¹‹é—´å°±éœ€è¦è¿›è¡Œæƒè¡¡ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ ¹æ®æˆ‘ä»¬çš„è¦æ±‚æ˜æ™ºåœ°ä½¿ç”¨å®ƒã€‚</li><li>å½“Objectçš„å›ºæœ‰å±æ€§æ•°é‡å·¨å¤§æ—¶ï¼ŒFlyweightæ¨¡å¼å®ç°å°±æ²¡æœ‰ç”¨ï¼Œè¿™ä½¿å¾—Factoryç±»çš„å®ç°å˜å¾—å¤æ‚ã€‚</li></ul><p>è¿™å°±æ˜¯Javaä¸­çš„Flyweightè®¾è®¡æ¨¡å¼ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://github.com/user-attachments/assets/6fcd94d4-064e-45fc-9838-c5f5ca7eac7d&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://chivalry727.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="äº«å…ƒæ¨¡å¼" scheme="https://chivalry727.github.io/tags/%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F/"/>
    
      <category term="Flyweight Design Pattern" scheme="https://chivalry727.github.io/tags/Flyweight-Design-Pattern/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹ç»„åˆæ¨¡å¼</title>
    <link href="https://chivalry727.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/"/>
    <id>https://chivalry727.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/</id>
    <published>2020-09-15T07:27:04.000Z</published>
    <updated>2025-02-27T11:08:25.364Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://github.com/user-attachments/assets/89a020a9-1726-424a-9ac0-0a224fad96c7"></p><span id="more"></span><h2 id="è®¾è®¡æ¨¡å¼ä¹‹ç»„åˆæ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼ä¹‹ç»„åˆæ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¹‹ç»„åˆæ¨¡å¼"></a>è®¾è®¡æ¨¡å¼ä¹‹ç»„åˆæ¨¡å¼</h2><h3 id="ä»€ä¹ˆæ˜¯ç»„åˆæ¨¡å¼"><a href="#ä»€ä¹ˆæ˜¯ç»„åˆæ¨¡å¼" class="headerlink" title="ä»€ä¹ˆæ˜¯ç»„åˆæ¨¡å¼"></a>ä»€ä¹ˆæ˜¯ç»„åˆæ¨¡å¼</h3><p>ç»„åˆæ¨¡å¼æ˜¯ç»“æ„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ã€‚ å½“æˆ‘ä»¬å¿…é¡»è¡¨ç¤ºéƒ¨åˆ†æ•´ä¸ªå±‚æ¬¡æ—¶ï¼Œå°†ä½¿ç”¨ç»„åˆè®¾è®¡æ¨¡å¼ã€‚</p><p>ç»„åˆæ¨¡å¼æ˜¯ç»“æ„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ã€‚ å½“æˆ‘ä»¬å¿…é¡»è¡¨ç¤ºéƒ¨åˆ†æ•´ä¸ªå±‚æ¬¡æ—¶ï¼Œå°†ä½¿ç”¨ç»„åˆè®¾è®¡æ¨¡å¼ã€‚</p><p>è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªçœŸå®çš„ä¾‹å­æ¥ç†è§£å®ƒâ€“å›¾è¡¨æ˜¯ç”±è¯¸å¦‚åœ†å½¢ï¼Œç›´çº¿ï¼Œä¸‰è§’å½¢ç­‰å¯¹è±¡ç»„æˆçš„ç»“æ„ã€‚å½“æˆ‘ä»¬ç”¨é¢œè‰²ï¼ˆä¾‹å¦‚çº¢è‰²ï¼‰å¡«å……å›¾å½¢æ—¶ï¼Œç›¸åŒçš„é¢œè‰²ä¹Ÿå°†åº”ç”¨äºå¯¹è±¡ä¸­ã€‚ ç”»ç”»ã€‚ åœ¨è¿™é‡Œï¼Œç»˜å›¾ç”±ä¸åŒçš„éƒ¨åˆ†ç»„æˆï¼Œå®ƒä»¬éƒ½å…·æœ‰ç›¸åŒçš„æ“ä½œã€‚</p><p>ç»„åˆæ¨¡å¼åŒ…å«ä»¥ä¸‹å¯¹è±¡ï¼š</p><ol><li><strong>Base Component</strong>ï¼šåŸºæœ¬ç»„ä»¶æ˜¯åˆæˆä¸­æ‰€æœ‰å¯¹è±¡çš„æ¥å£ï¼Œå®¢æˆ·ç«¯ç¨‹åºä½¿ç”¨åŸºæœ¬ç»„ä»¶æ¥å¤„ç†åˆæˆä¸­çš„å¯¹è±¡ã€‚ å®ƒå¯ä»¥æ˜¯æ¥å£ï¼Œä¹Ÿå¯ä»¥æ˜¯æŠ½è±¡ç±»ï¼Œå¹¶ä¸”æ‰€æœ‰å¯¹è±¡éƒ½å¯ä»¥ä½¿ç”¨æŸäº›æ–¹æ³•ã€‚</li><li><strong>Leaf</strong>ï¼šå®šä¹‰ç»„åˆä¸­å…ƒç´ çš„è¡Œä¸ºã€‚ å®ƒæ˜¯æ„æˆçš„åŸºç¡€ï¼Œå¹¶å®ç°äº†åŸºæœ¬ç»„ä»¶ã€‚ å®ƒæ²¡æœ‰å¼•ç”¨å…¶ä»–ç»„ä»¶ã€‚</li><li><strong>Composite</strong>ï¼šå®ƒç”±å¶å…ƒç´ ç»„æˆï¼Œå¹¶åœ¨åŸºæœ¬ç»„ä»¶ä¸­å®ç°æ“ä½œã€‚</li></ol><p>åœ¨è¿™é‡Œï¼Œæˆ‘æ­£åœ¨ä¸ºç»˜å›¾æ–¹æ¡ˆåº”ç”¨ç»„åˆè®¾è®¡æ¨¡å¼ã€‚</p><h3 id="ç»„åˆè®¾è®¡æ¨¡å¼åŸºç¡€ç»„ä»¶"><a href="#ç»„åˆè®¾è®¡æ¨¡å¼åŸºç¡€ç»„ä»¶" class="headerlink" title="ç»„åˆè®¾è®¡æ¨¡å¼åŸºç¡€ç»„ä»¶"></a>ç»„åˆè®¾è®¡æ¨¡å¼åŸºç¡€ç»„ä»¶</h3><p>ç»„åˆæ¨¡å¼åŸºç¡€ç»„ä»¶å®šä¹‰äº†å¶å­å’Œç»„åˆææ–™çš„å¸¸ç”¨æ–¹æ³•ã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨drawï¼ˆ<code>String fillColor</code>ï¼‰æ–¹æ³•åˆ›å»ºä¸€ä¸ª<code>Shape</code>ç±»ï¼Œä»¥ä½¿ç”¨ç»™å®šçš„é¢œè‰²ç»˜åˆ¶å½¢çŠ¶ã€‚</p><p><strong><em>Shape.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">(String fillColor)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç»„åˆè®¾è®¡æ¨¡å¼å¶å¯¹è±¡"><a href="#ç»„åˆè®¾è®¡æ¨¡å¼å¶å¯¹è±¡" class="headerlink" title="ç»„åˆè®¾è®¡æ¨¡å¼å¶å¯¹è±¡"></a>ç»„åˆè®¾è®¡æ¨¡å¼å¶å¯¹è±¡</h3><p>ç»„åˆè®¾è®¡æ¨¡å¼å¶å®ç°äº†åŸºç¡€ç»„ä»¶ï¼Œè€Œè¿™äº›æ˜¯ç»„åˆçš„åŸºç¡€ã€‚ æˆ‘ä»¬å¯ä»¥åˆ›å»ºå¤šä¸ªå¶å­å¯¹è±¡ï¼Œä¾‹å¦‚Triangleï¼ŒCircleç­‰ã€‚</p><p><strong><em>Triangle.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Triangle</span> <span class="keyword">implements</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">(String fillColor)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Drawing Triangle with color &quot;</span> + fillColor);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong><em>Circle.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Circle</span> <span class="keyword">implements</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">(String fillColor)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Drawing Circle with color &quot;</span> + fillColor);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç»„åˆæ¨¡å¼å¯¹è±¡"><a href="#ç»„åˆæ¨¡å¼å¯¹è±¡" class="headerlink" title="ç»„åˆæ¨¡å¼å¯¹è±¡"></a>ç»„åˆæ¨¡å¼å¯¹è±¡</h3><p>ä¸€ä¸ªç»„åˆå¯¹è±¡åŒ…å«ä¸€ç»„å¶å­å¯¹è±¡ï¼Œæˆ‘ä»¬åº”è¯¥æä¾›ä¸€äº›è¾…åŠ©æ–¹æ³•æ¥ä»è¯¥ç»„ä¸­æ·»åŠ æˆ–åˆ é™¤å¶å­ã€‚ æˆ‘ä»¬è¿˜å¯ä»¥æä¾›ä¸€ç§ä»ç»„ä¸­åˆ é™¤æ‰€æœ‰å…ƒç´ çš„æ–¹æ³•ã€‚</p><p><strong><em>Drawing.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-19 20:30:02</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Drawing</span> <span class="keyword">implements</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Collection of Shapes</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Shape&gt; shapes = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">(String fillColor)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (Shape shape : shapes) &#123;</span><br><span class="line">            shape.draw(fillColor);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Shape shape)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.shapes.add(shape);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(Shape shape)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.shapes.remove(shape);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">clear</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Clearing all the shapes from drawing.&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.shapes.clear();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„ï¼Œ<code>Composite</code>ä¹Ÿå®ç°äº†<code>component</code>ï¼Œå¹¶ä¸”è¡Œä¸ºç±»ä¼¼äºleafï¼Œåªæ˜¯å®ƒå¯ä»¥åŒ…å«ä¸€ç»„leafå…ƒç´ ã€‚</p><h3 id="ç»„åˆæ¨¡å¼ç±»å›¾"><a href="#ç»„åˆæ¨¡å¼ç±»å›¾" class="headerlink" title="ç»„åˆæ¨¡å¼ç±»å›¾"></a>ç»„åˆæ¨¡å¼ç±»å›¾</h3><p><img src="https://tva3.sinaimg.cn/large/008aQ1h9ly1giw8o4tfs6j30j40f2jrt.jpg"></p><p>æˆ‘ä»¬çš„ç»„åˆæ¨¡å¼å®ç°å·²å‡†å¤‡å°±ç»ªï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®¢æˆ·ç«¯ç¨‹åºå¯¹å…¶è¿›è¡Œæµ‹è¯•ã€‚</p><h3 id="ç»„åˆè®¾è®¡æ¨¡å¼å®¢æˆ·ç¨‹åº"><a href="#ç»„åˆè®¾è®¡æ¨¡å¼å®¢æˆ·ç¨‹åº" class="headerlink" title="ç»„åˆè®¾è®¡æ¨¡å¼å®¢æˆ·ç¨‹åº"></a>ç»„åˆè®¾è®¡æ¨¡å¼å®¢æˆ·ç¨‹åº</h3><p><strong><em>TestCompositePattern.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestCompositePattern</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// create instance</span></span><br><span class="line">        <span class="type">Shape</span> <span class="variable">tri</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Triangle</span>();</span><br><span class="line">        <span class="type">Shape</span> <span class="variable">tri1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Triangle</span>();</span><br><span class="line">        <span class="type">Shape</span> <span class="variable">cir</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Circle</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">Drawing</span> <span class="variable">drawing</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Drawing</span>();</span><br><span class="line">        drawing.add(tri1);</span><br><span class="line">        drawing.add(tri1);</span><br><span class="line">        drawing.add(cir);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// draw shape</span></span><br><span class="line">        drawing.draw(<span class="string">&quot;Red&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// clear</span></span><br><span class="line">        drawing.clear();</span><br><span class="line"></span><br><span class="line">        drawing.add(tri);</span><br><span class="line">        drawing.add(cir);</span><br><span class="line">        drawing.draw(<span class="string">&quot;Green&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ç»„åˆæ¨¡å¼å®¢æˆ·ç«¯ç¨‹åºçš„è¾“å‡ºä¸ºï¼š</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">Drawing</span> <span class="built_in">Triangle</span> <span class="variable">with</span> <span class="variable">color</span> <span class="built_in">Red</span></span><br><span class="line"><span class="variable">Drawing</span> <span class="built_in">Triangle</span> <span class="variable">with</span> <span class="variable">color</span> <span class="built_in">Red</span></span><br><span class="line"><span class="variable">Drawing</span> <span class="built_in">Circle</span> <span class="variable">with</span> <span class="variable">color</span> <span class="built_in">Red</span></span><br><span class="line"><span class="variable">Clearing</span> <span class="variable">all</span> <span class="variable">the</span> <span class="variable">shapes</span> <span class="variable">from</span> <span class="variable">drawing</span><span class="operator">.</span></span><br><span class="line"><span class="variable">Drawing</span> <span class="built_in">Triangle</span> <span class="variable">with</span> <span class="variable">color</span> <span class="built_in">Green</span></span><br><span class="line"><span class="variable">Drawing</span> <span class="built_in">Circle</span> <span class="variable">with</span> <span class="variable">color</span> <span class="built_in">Green</span></span><br></pre></td></tr></table></figure><h3 id="ç»„åˆè®¾è®¡æ¨¡å¼è¦ç‚¹"><a href="#ç»„åˆè®¾è®¡æ¨¡å¼è¦ç‚¹" class="headerlink" title="ç»„åˆè®¾è®¡æ¨¡å¼è¦ç‚¹"></a>ç»„åˆè®¾è®¡æ¨¡å¼è¦ç‚¹</h3><ul><li>ä»…å½“å¯¹è±¡ç»„åº”è¡¨ç°ä¸ºå•ä¸ªå¯¹è±¡æ—¶ï¼Œæ‰åº”åº”ç”¨ç»„åˆæ¨¡å¼ã€‚</li><li>ç»„åˆè®¾è®¡æ¨¡å¼å¯ç”¨äºåˆ›å»ºæ ‘çŠ¶ç»“æ„ã€‚</li></ul><p><code>java.awt.Container#add(Component)</code>æ˜¯Javaä¸­<code>Composite</code>æ¨¡å¼çš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼Œåœ¨Swingä¸­ä½¿ç”¨äº†å¾ˆå¤šã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://github.com/user-attachments/assets/89a020a9-1726-424a-9ac0-0a224fad96c7&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://chivalry727.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="ç»„åˆæ¨¡å¼" scheme="https://chivalry727.github.io/tags/%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/"/>
    
      <category term="Composite Design Pattern" scheme="https://chivalry727.github.io/tags/Composite-Design-Pattern/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹åŸå‹æ¨¡å¼</title>
    <link href="https://chivalry727.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/"/>
    <id>https://chivalry727.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/</id>
    <published>2020-09-15T07:16:54.000Z</published>
    <updated>2025-02-27T11:11:05.347Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://github.com/user-attachments/assets/41370493-28df-40c8-902f-258e030d1640"></p><span id="more"></span><h2 id="è®¾è®¡æ¨¡å¼ä¹‹åŸå‹æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼ä¹‹åŸå‹æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¹‹åŸå‹æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼ä¹‹åŸå‹æ¨¡å¼</h2><h3 id="ä»€ä¹ˆæ˜¯åŸå‹æ¨¡å¼ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯åŸå‹æ¨¡å¼ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯åŸå‹æ¨¡å¼ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯åŸå‹æ¨¡å¼ï¼Ÿ</h3><p>åŸå‹æ¨¡å¼æ˜¯<a href="https://zh.wikipedia.org/wiki/%E5%89%B5%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F">åˆ›å»ºå‹æ¨¡å¼</a>çš„ä¸€ç§ï¼Œå…¶ç‰¹ç‚¹åœ¨äºé€šè¿‡â€œå¤åˆ¶â€ä¸€ä¸ªå·²ç»å­˜åœ¨çš„<a href="https://zh.wikipedia.org/wiki/%E5%AE%9E%E4%BE%8B">å®ä¾‹</a>æ¥è¿”å›æ–°çš„å®ä¾‹ï¼Œè€Œä¸æ˜¯æ–°å»ºå®ä¾‹ã€‚è¢«å¤åˆ¶çš„å®ä¾‹å°±æ˜¯æˆ‘ä»¬æ‰€ç§°çš„â€œåŸå‹â€ï¼Œè¿™ä¸ªåŸå‹æ˜¯å¯å®šåˆ¶çš„ã€‚</p><p>åŸå‹æ¨¡å¼å¤šç”¨äºåˆ›å»ºå¤æ‚çš„æˆ–è€…è€—æ—¶çš„å®ä¾‹ï¼Œå› ä¸ºè¿™ç§æƒ…å†µä¸‹ï¼Œå¤åˆ¶ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å®ä¾‹ä½¿ç¨‹åºè¿è¡Œæ›´é«˜æ•ˆï¼›æˆ–è€…åˆ›å»ºå€¼ç›¸ç­‰ï¼Œåªæ˜¯å‘½åä¸ä¸€æ ·çš„åŒç±»æ•°æ®ã€‚å› æ­¤å®ƒæä¾›äº†ä¸€ç§å¯¹è±¡åˆ›å»ºæœºåˆ¶ã€‚</p><p>å½“åˆ›å»ºå¯¹è±¡çš„äº‹åŠ¡éå¸¸æ˜‚è´µå¹¶ä¸”éœ€è¦å¤§é‡æ—¶é—´å’Œèµ„æºå¹¶ä¸”æ‚¨å·²ç»å­˜åœ¨ç±»ä¼¼çš„å¯¹è±¡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨åŸå‹è®¾è®¡æ¨¡å¼ã€‚</p><h3 id="åŸå‹æ¨¡å¼ç±»å›¾"><a href="#åŸå‹æ¨¡å¼ç±»å›¾" class="headerlink" title="åŸå‹æ¨¡å¼ç±»å›¾"></a>åŸå‹æ¨¡å¼ç±»å›¾</h3><p><img src="https://tvax2.sinaimg.cn/large/008aQ1h9ly1girg3rftmbj32800vvwgm.jpg"></p><p>æè¿°åŸå‹è®¾è®¡æ¨¡å¼çš„<a href="https://zh.wikipedia.org/wiki/%E7%BB%9F%E4%B8%80%E5%BB%BA%E6%A8%A1%E8%AF%AD%E8%A8%80">UML</a>ç±»å›¾ã€‚</p><h3 id="åŸå‹æ¨¡å¼ç¤ºä¾‹"><a href="#åŸå‹æ¨¡å¼ç¤ºä¾‹" class="headerlink" title="åŸå‹æ¨¡å¼ç¤ºä¾‹"></a>åŸå‹æ¨¡å¼ç¤ºä¾‹</h3><p>ç”¨ä¸€ä¸ªä¾‹å­å¾ˆå®¹æ˜“ç†è§£åŸå‹è®¾è®¡æ¨¡å¼ã€‚ å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªä»æ•°æ®åº“åŠ è½½æ•°æ®çš„å¯¹è±¡ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç¨‹åºä¸­å¤šæ¬¡ä¿®æ”¹æ­¤æ•°æ®ï¼Œå› æ­¤ä½¿ç”¨newå…³é”®å­—åˆ›å»ºObjectå¹¶å†æ¬¡ä»æ•°æ®åº“ä¸­åŠ è½½æ‰€æœ‰æ•°æ®ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚</p><p>æ›´å¥½çš„æ–¹æ³•æ˜¯å°†ç°æœ‰å¯¹è±¡å…‹éš†åˆ°æ–°å¯¹è±¡ä¸­ï¼Œç„¶åè¿›è¡Œæ•°æ®æ“ä½œã€‚</p><p>åŸå‹è®¾è®¡æ¨¡å¼è¦æ±‚æ‚¨è¦å¤åˆ¶çš„å¯¹è±¡åº”æä¾›å¤åˆ¶åŠŸèƒ½ã€‚ ä¸åº”ç”±å…¶ä»–ä»»ä½•ç±»å®Œæˆã€‚ ä½†æ˜¯ï¼Œä½¿ç”¨å¯¹è±¡å±æ€§çš„æµ…æ‹·è´è¿˜æ˜¯æ·±æ‹·è´å–å†³äºè¦æ±‚åŠå…¶è®¾è®¡å†³ç­–ã€‚</p><p>è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹ç¨‹åºï¼Œæ˜¾ç¤ºäº†Javaä¸­çš„åŸå‹è®¾è®¡æ¨¡å¼ç¤ºä¾‹ã€‚</p><p><strong><em>Employees.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å‘˜å·¥ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-15 16:50</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employees</span> <span class="keyword">implements</span> <span class="title class_">Cloneable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; empList;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Employees</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.empList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Employees</span><span class="params">(List&lt;String&gt; empList)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.empList = empList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">loadDate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// ä»æ•°æ®åº“ä¸­è¯»å–æ‰€æœ‰å‘˜å·¥å¹¶æ”¾å…¥åˆ—è¡¨</span></span><br><span class="line">        empList.add(<span class="string">&quot;Lisa&quot;</span>);</span><br><span class="line">        empList.add(<span class="string">&quot;David&quot;</span>);</span><br><span class="line">        empList.add(<span class="string">&quot;Allen&quot;</span>);</span><br><span class="line">        empList.add(<span class="string">&quot;Helen&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">getEmpList</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> empList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Object <span class="title function_">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Employees</span>(<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(<span class="built_in">this</span>.getEmpList()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šè¦†ç›–<code>clone()</code>æ–¹æ³•ä»¥æä¾›é›‡å‘˜åˆ—è¡¨çš„æ·±æ‹·è´ã€‚</p><h3 id="æµ‹è¯•åŸå‹æ¨¡å¼"><a href="#æµ‹è¯•åŸå‹æ¨¡å¼" class="headerlink" title="æµ‹è¯•åŸå‹æ¨¡å¼"></a>æµ‹è¯•åŸå‹æ¨¡å¼</h3><p>è¿™æ˜¯åŸå‹è®¾è®¡æ¨¡å¼ç¤ºä¾‹æµ‹è¯•ç¨‹åºï¼Œå°†æ˜¾ç¤ºåŸå‹æ¨¡å¼çš„å¥½å¤„ï¼š</p><p><strong><em>PrototypePatternTest.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æµ‹è¯•åŸå‹æ¨¡å¼</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-15 16:57</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PrototypePatternTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> CloneNotSupportedException &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»º Employees å®ä¾‹</span></span><br><span class="line">        <span class="type">Employees</span> <span class="variable">employees</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Employees</span>();</span><br><span class="line">        <span class="comment">// åŠ è½½æ•°æ®</span></span><br><span class="line">        employees.loadDate();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä½¿ç”¨ cloneæ–¹æ³•æ¥è·å– Employeeså¯¹è±¡</span></span><br><span class="line">        <span class="type">Employees</span> <span class="variable">empsNew</span> <span class="operator">=</span> (Employees) employees.clone();</span><br><span class="line">        <span class="type">Employees</span> <span class="variable">empsNew1</span> <span class="operator">=</span> (Employees) employees.clone();</span><br><span class="line">        List&lt;String&gt; list = empsNew.getEmpList();</span><br><span class="line">        list.add(<span class="string">&quot;John&quot;</span>);</span><br><span class="line">        List&lt;String&gt; list1 = empsNew1.getEmpList();</span><br><span class="line">        list1.remove(<span class="string">&quot;David&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;employees List: &quot;</span>+ employees.getEmpList());</span><br><span class="line">        System.out.println(<span class="string">&quot;empsNew List: &quot;</span> + list);</span><br><span class="line">        System.out.println(<span class="string">&quot;empsNew1 List: &quot;</span> + list1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸ŠåŸå‹è®¾è®¡æ¨¡å¼ç¤ºä¾‹ç¨‹åºçš„è¾“å‡ºä¸ºï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">employees List: [<span class="type">Lisa</span>, <span class="type">David</span>, <span class="type">Allen</span>, <span class="type">Helen</span>]</span><br><span class="line">empsNew List: [<span class="type">Lisa</span>, <span class="type">David</span>, <span class="type">Allen</span>, <span class="type">Helen</span>, <span class="type">John</span>]</span><br><span class="line">empsNew1 List: [<span class="type">Lisa</span>, <span class="type">Allen</span>, <span class="type">Helen</span>]</span><br></pre></td></tr></table></figure><p>å¦‚æœæœªæä¾›å¯¹è±¡å…‹éš†ï¼Œæˆ‘ä»¬å°†å¿…é¡»è¿›è¡Œæ•°æ®åº“è°ƒç”¨ä»¥æ¯æ¬¡è·å–å‘˜å·¥åˆ—è¡¨ã€‚ ç„¶åè¿›è¡Œé‚£äº›æœ¬æ¥ä¼šå¾ˆè€—èµ„æºå’Œæ—¶é—´çš„æ“ä½œã€‚è¿™å°±æ˜¯Javaä¸­çš„åŸå‹è®¾è®¡æ¨¡å¼ã€‚</p><h3 id="åŸå‹æ¨¡å¼çš„ä¼˜ç‚¹"><a href="#åŸå‹æ¨¡å¼çš„ä¼˜ç‚¹" class="headerlink" title="åŸå‹æ¨¡å¼çš„ä¼˜ç‚¹"></a>åŸå‹æ¨¡å¼çš„ä¼˜ç‚¹</h3><ul><li>å‘å®¢æˆ·éšè—åˆ¶é€ æ–°å®ä¾‹çš„å¤æ‚æ€§</li><li>æä¾›è®©å®¢æˆ·èƒ½å¤Ÿäº§ç”ŸæœªçŸ¥ç±»å‹å¯¹è±¡çš„é€‰é¡¹</li><li>åœ¨æŸäº›ç¯å¢ƒä¸‹ï¼Œå¤åˆ¶å¯¹è±¡æ¯”åˆ›å»ºå¯¹è±¡æ›´æœ‰æ•ˆ</li></ul><h3 id="åŸå‹æ¨¡å¼çš„ç”¨é€”"><a href="#åŸå‹æ¨¡å¼çš„ç”¨é€”" class="headerlink" title="åŸå‹æ¨¡å¼çš„ç”¨é€”"></a>åŸå‹æ¨¡å¼çš„ç”¨é€”</h3><ul><li>åœ¨ä¸€ä¸ªå¤æ‚çš„ç±»å±‚æ¬¡ä¸­ï¼Œå½“ç³»ç»Ÿå¿…é¡»ä»å…¶ä¸­çš„è®¸å¤šç±»å‹åˆ›å»ºæ–°å¯¹è±¡æ—¶ï¼Œå¯ä»¥è€ƒè™‘åŸå‹æ¨¡å¼</li><li>å¯¹è±¡æ„å»ºæˆæœ¬å¾ˆé«˜ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¯¹è±¡çš„å…‹éš†ç”¨äºå°†æ¥ä½¿ç”¨</li><li>å¯ä»¥å‡å°‘æ„å»ºæ–°å¯¹è±¡çš„æ˜‚è´µæ•°æ®åº“è°ƒç”¨</li><li>éœ€è¦åœ¨åŠ¨æ€åŠ è½½æ—¶åœ¨è¿è¡Œæ—¶å®ä¾‹åŒ–ç±»æ—¶</li><li>å½“å¯¹è±¡åˆ›å»ºå¤æ‚ä¸”è€—æ—¶æ—¶éœ€è¦</li><li>å½“éœ€è¦å°†å¯¹è±¡ç»„æˆï¼Œåˆ›å»ºå’Œè¡¨ç¤ºä¸å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºåˆ†ç¦»æ—¶</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://github.com/user-attachments/assets/41370493-28df-40c8-902f-258e030d1640&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://chivalry727.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="åŸå‹æ¨¡å¼" scheme="https://chivalry727.github.io/tags/%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/"/>
    
      <category term="Prototype Design Pattern" scheme="https://chivalry727.github.io/tags/Prototype-Design-Pattern/"/>
    
  </entry>
  
  <entry>
    <title>Java RMI</title>
    <link href="https://chivalry727.github.io/Java%20RMI/"/>
    <id>https://chivalry727.github.io/Java%20RMI/</id>
    <published>2020-09-13T02:58:42.000Z</published>
    <updated>2025-02-27T11:21:18.975Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://github.com/user-attachments/assets/b970dc4d-cdfd-4f18-b8f0-fd4a6f18e115"></p><span id="more"></span><h2 id="Java-RMI"><a href="#Java-RMI" class="headerlink" title="Java RMI"></a>Java RMI</h2><h3 id="ä»€ä¹ˆæ˜¯Java-RMI"><a href="#ä»€ä¹ˆæ˜¯Java-RMI" class="headerlink" title="ä»€ä¹ˆæ˜¯Java RMI"></a>ä»€ä¹ˆæ˜¯Java RMI</h3><p><strong>Javaè¿œç¨‹æ–¹æ³•è°ƒç”¨</strong>ï¼Œå³<strong>Java RMI</strong>ï¼ˆJava Remote Method Invocationï¼‰æ˜¯<a href="https://zh.wikipedia.org/wiki/Java">Java</a>ç¼–ç¨‹è¯­è¨€é‡Œï¼Œä¸€ç§ç”¨äºå®ç°<a href="https://zh.wikipedia.org/wiki/%E8%BF%9C%E7%A8%8B%E8%BF%87%E7%A8%8B%E8%B0%83%E7%94%A8">è¿œç¨‹è¿‡ç¨‹è°ƒç”¨</a>çš„<a href="https://zh.wikipedia.org/wiki/%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%BC%96%E7%A8%8B%E6%8E%A5%E5%8F%A3">åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£</a>ã€‚å®ƒä½¿å®¢æˆ·æœºä¸Šè¿è¡Œçš„ç¨‹åºå¯ä»¥è°ƒç”¨è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„å¯¹è±¡ã€‚è¿œç¨‹æ–¹æ³•è°ƒç”¨ç‰¹æ€§ä½¿Javaç¼–ç¨‹äººå‘˜èƒ½å¤Ÿåœ¨ç½‘ç»œç¯å¢ƒä¸­åˆ†å¸ƒæ“ä½œã€‚RMIå…¨éƒ¨çš„å®—æ—¨å°±æ˜¯å°½å¯èƒ½ç®€åŒ–è¿œç¨‹æ¥å£å¯¹è±¡çš„ä½¿ç”¨ã€‚</p><p>Java RMIæå¤§åœ°ä¾èµ–äºæ¥å£ã€‚åœ¨éœ€è¦åˆ›å»ºä¸€ä¸ªè¿œç¨‹å¯¹è±¡çš„æ—¶å€™ï¼Œç¨‹åºå‘˜é€šè¿‡ä¼ é€’ä¸€ä¸ªæ¥å£æ¥éšè—åº•å±‚çš„å®ç°ç»†èŠ‚ã€‚å®¢æˆ·ç«¯å¾—åˆ°çš„è¿œç¨‹å¯¹è±¡å¥æŸ„æ­£å¥½ä¸æœ¬åœ°çš„æ ¹ä»£ç è¿æ¥ï¼Œç”±åè€…è´Ÿè´£é€è¿‡ç½‘ç»œé€šä¿¡ã€‚è¿™æ ·ä¸€æ¥ï¼Œå¼€å‘è€…åªéœ€å…³å¿ƒå¦‚ä½•é€šè¿‡è‡ªå·±çš„æ¥å£å¥æŸ„å‘é€æ¶ˆæ¯ã€‚</p><p>æ¥å£çš„ä¸¤ç§å¸¸è§å®ç°æ–¹å¼æ˜¯ï¼šæœ€åˆä½¿ç”¨<a href="https://zh.wikipedia.org/wiki/JRMP">JRMP</a>ï¼ˆJava Remote Message Protocolï¼ŒJavaè¿œç¨‹æ¶ˆæ¯äº¤æ¢åè®®ï¼‰å®ç°ï¼›æ­¤å¤–è¿˜å¯ä»¥ç”¨ä¸<a href="https://zh.wikipedia.org/wiki/CORBA">CORBA</a>å…¼å®¹çš„æ–¹æ³•å®ç°ã€‚<strong>RMI</strong>ä¸€èˆ¬æŒ‡çš„æ˜¯ç¼–ç¨‹æ¥å£ï¼Œä¹Ÿæœ‰æ—¶å€™åŒæ—¶åŒ…æ‹¬JRMPå’ŒAPIï¼ˆ<a href="https://zh.wikipedia.org/wiki/%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%BC%96%E7%A8%8B%E6%8E%A5%E5%8F%A3">åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£</a>ï¼‰ï¼Œè€Œ<a href="https://zh.wikipedia.org/w/index.php?title=RMI-IIOP&action=edit&redlink=1">RMI-IIOP</a>åˆ™ä¸€èˆ¬æŒ‡RMIæ¥å£æ¥ç®¡ç»å¤§éƒ¨åˆ†çš„åŠŸèƒ½ï¼Œä»¥æ”¯æŒ<a href="https://zh.wikipedia.org/wiki/CORBA">CORBA</a>çš„å®ç°ã€‚</p><p>æœ€åˆçš„RMI APIè®¾è®¡ä¸ºé€šç”¨åœ°æ”¯æŒä¸åŒå½¢å¼çš„æ¥å£å®ç°ã€‚åæ¥ï¼ŒCORBAå¢åŠ äº†ä¼ å€¼ï¼ˆpass by valueï¼‰åŠŸèƒ½ï¼Œä»¥å®ç°RMIæ¥å£ã€‚ç„¶è€Œ<a href="https://zh.wikipedia.org/w/index.php?title=RMI-IIOP&action=edit&redlink=1">RMI-IIOP</a>å’Œ<a href="https://zh.wikipedia.org/wiki/JRMP">JRMP</a>å®ç°çš„æ¥å£å¹¶ä¸å®Œå…¨ä¸€è‡´ã€‚</p><p>æ‰€ä½¿ç”¨JavaåŒ…çš„åå­—æ˜¯<code>java.rmi</code>ã€‚</p><h3 id="RMIåº”ç”¨ç¨‹åºçš„æ¦‚å¿µ"><a href="#RMIåº”ç”¨ç¨‹åºçš„æ¦‚å¿µ" class="headerlink" title="RMIåº”ç”¨ç¨‹åºçš„æ¦‚å¿µ"></a>RMIåº”ç”¨ç¨‹åºçš„æ¦‚å¿µ</h3><p>RMIåº”ç”¨ç¨‹åºå¯ä»¥åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œ<strong>å®¢æˆ·ç«¯</strong>ç¨‹åºå’Œ<strong>æœåŠ¡å™¨</strong>ç¨‹åºã€‚ä¸€ä¸ª<strong>æœåŠ¡å™¨</strong>ç¨‹åºåˆ›å»ºä¸€äº›è¿œç¨‹å¯¹è±¡ï¼Œä½¿å…¶å¯ç”¨äºå®¢æˆ·ç«¯çš„å¼•ç”¨è°ƒç”¨æ–¹æ³•å°±å¯ä»¥äº†ã€‚ä¸€ä¸ª<strong>å®¢æˆ·ç«¯</strong>çš„è¿œç¨‹ç¨‹åºç”³è¯·æ•°æ®æœåŠ¡å™¨å’Œè°ƒç”¨å®ƒä»¬çš„æ–¹æ³•çš„å¯¹è±¡ã€‚<strong>å­˜æ ¹</strong>å’Œ<strong>éª¨æ¶</strong>æ˜¯ç”¨äºä¸è¿œç¨‹å¯¹è±¡é€šä¿¡çš„ä¸¤ä¸ªé‡è¦å¯¹è±¡ã€‚</p><h3 id="Stubï¼ˆå­˜æ ¹ï¼‰"><a href="#Stubï¼ˆå­˜æ ¹ï¼‰" class="headerlink" title="Stubï¼ˆå­˜æ ¹ï¼‰"></a>Stubï¼ˆå­˜æ ¹ï¼‰</h3><p>åœ¨RMIä¸­ï¼Œ<code>Stub</code>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨ä½œå®¢æˆ·ç«¯çš„ç½‘å…³ã€‚ æ‰€æœ‰ä¼ å‡ºçš„è¯·æ±‚éƒ½é€šè¿‡å®ƒå‘é€ã€‚ å½“å®¢æˆ·ç«¯åœ¨å­˜æ ¹å¯¹è±¡ä¸Šè°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œå°†åœ¨å†…éƒ¨æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p><ol><li>ä½¿ç”¨è¿œç¨‹è™šæ‹Ÿæœºå»ºç«‹è¿æ¥ã€‚</li><li>ç„¶åï¼Œå®ƒå°†å‚æ•°ä¼ è¾“åˆ°è¿œç¨‹è™šæ‹Ÿæœºã€‚ è¿™ä¹Ÿç§°ä¸ºæ³•è­¦</li><li>åœ¨ç¬¬äºŒæ­¥ä¹‹åï¼Œå®ƒå°†ç­‰å¾…è¾“å‡ºã€‚</li><li>ç°åœ¨ï¼Œå®ƒè¯»å–ä½œä¸ºè¾“å‡ºæ¥çš„å€¼æˆ–å¼‚å¸¸ã€‚</li><li>æœ€åï¼Œå®ƒå°†å€¼è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li></ol><h3 id="Skeletonï¼ˆéª¨æ¶ï¼‰"><a href="#Skeletonï¼ˆéª¨æ¶ï¼‰" class="headerlink" title="Skeletonï¼ˆéª¨æ¶ï¼‰"></a>Skeletonï¼ˆéª¨æ¶ï¼‰</h3><p>åœ¨RMIä¸­ï¼Œ<code>Skeleton</code>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨ä½œæœåŠ¡å™¨ç«¯çš„ç½‘å…³ï¼Œæ‰€æœ‰ä¼ å…¥çš„è¯·æ±‚éƒ½é€šè¿‡å®ƒå‘é€ã€‚ å½“æœåŠ¡å™¨åœ¨<code>Skeleton</code>å¯¹è±¡ä¸Šè°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œå°†åœ¨å†…éƒ¨æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p><ol><li>è¯»å–æ‰€æœ‰å‚æ•°ä»¥è·å–è¿œç¨‹æ–¹æ³•ã€‚</li><li>è¯¥æ–¹æ³•åœ¨è¿œç¨‹å¯¹è±¡ä¸Šè°ƒç”¨ã€‚</li><li>ç„¶åï¼Œå®ƒå†™å…¥å¹¶ä¼ è¾“ç»“æœçš„å‚æ•°ã€‚</li></ol><p><img src="https://github.com/user-attachments/assets/1fd59185-125d-4cdb-b942-1779a77b59b6"></p><h3 id="Stub-å’Œ-Skeleton"><a href="#Stub-å’Œ-Skeleton" class="headerlink" title="Stub å’Œ Skeleton"></a>Stub å’Œ Skeleton</h3><p><code>Stub</code>å……å½“å®¢æˆ·ç«¯ç¨‹åºçš„ç½‘å…³ã€‚ å®ƒä½äºå®¢æˆ·ç«¯ï¼Œå¹¶ä¸Skeletonå¯¹è±¡é€šä¿¡ã€‚ å®ƒå»ºç«‹è¿œç¨‹å¯¹è±¡ä¹‹é—´çš„è¿æ¥å¹¶å‘å…¶å‘é€è¯·æ±‚ã€‚</p><p><img src="https://github.com/user-attachments/assets/39cce3ec-7e83-4fec-9af4-780b79eab1ca"></p><p><code>Skeleton</code>å¯¹è±¡é©»ç•™åœ¨æœåŠ¡å™¨ç¨‹åºä¸Šã€‚ å®ƒè´Ÿè´£å°†è¯·æ±‚ä»å­˜æ ¹ä¼ é€’åˆ°è¿œç¨‹å¯¹è±¡ã€‚</p><h3 id="åˆ›å»ºä¸€ä¸ªç®€å•RMIåº”ç”¨ç¤ºä¾‹æ­¥éª¤"><a href="#åˆ›å»ºä¸€ä¸ªç®€å•RMIåº”ç”¨ç¤ºä¾‹æ­¥éª¤" class="headerlink" title="åˆ›å»ºä¸€ä¸ªç®€å•RMIåº”ç”¨ç¤ºä¾‹æ­¥éª¤"></a>åˆ›å»ºä¸€ä¸ªç®€å•RMIåº”ç”¨ç¤ºä¾‹æ­¥éª¤</h3><ol><li>å®šä¹‰ä¸€ä¸ªè¿œç¨‹æ¥å£ã€‚</li><li>å®ç°è¿œç¨‹æ¥å£ã€‚</li><li>åˆ›å»ºå¹¶å¯åŠ¨è¿œç¨‹åº”ç”¨ç¨‹åº</li><li>åˆ›å»ºå¹¶å¯åŠ¨å®¢æˆ·ç«¯åº”ç”¨ç¨‹åº</li></ol><h3 id="å®šä¹‰ä¸€ä¸ªè¿œç¨‹æ¥å£"><a href="#å®šä¹‰ä¸€ä¸ªè¿œç¨‹æ¥å£" class="headerlink" title="å®šä¹‰ä¸€ä¸ªè¿œç¨‹æ¥å£"></a>å®šä¹‰ä¸€ä¸ªè¿œç¨‹æ¥å£</h3><p>è¿œç¨‹æ¥å£æŒ‡å®šå®¢æˆ·ç«¯å¯ä»¥è¿œç¨‹è°ƒç”¨çš„æ–¹æ³•ã€‚ å®¢æˆ·ç«¯ç¨‹åºä¸è¿œç¨‹æ¥å£é€šä¿¡ï¼Œè€Œä¸æ˜¯ä¸å®ç°å®ƒçš„ç±»é€šä¿¡ã€‚ è¦æˆä¸ºè¿œç¨‹æ¥å£ï¼Œæ¥å£å¿…é¡»æ‰©å±•<code>java.rmi</code>åŒ…çš„<code>Remote</code>æ¥å£ã€‚</p><p><strong><em>Remote æ¥å£</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> java.rmi;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * The &lt;code&gt;Remote&lt;/code&gt; interface serves to identify interfaces whose</span></span><br><span class="line"><span class="comment"> * methods may be invoked from a non-local virtual machine.  Any object that</span></span><br><span class="line"><span class="comment"> * is a remote object must directly or indirectly implement this interface.</span></span><br><span class="line"><span class="comment"> * Only those methods specified in a &quot;remote interface&quot;, an interface that</span></span><br><span class="line"><span class="comment"> * extends &lt;code&gt;java.rmi.Remote&lt;/code&gt; are available remotely.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;Implementation classes can implement any number of remote interfaces and</span></span><br><span class="line"><span class="comment"> * can extend other remote implementation classes.  RMI provides some</span></span><br><span class="line"><span class="comment"> * convenience classes that remote object implementations can extend which</span></span><br><span class="line"><span class="comment"> * facilitate remote object creation.  These classes are</span></span><br><span class="line"><span class="comment"> * &lt;code&gt;java.rmi.server.UnicastRemoteObject&lt;/code&gt; and</span></span><br><span class="line"><span class="comment"> * &lt;code&gt;java.rmi.activation.Activatable&lt;/code&gt;.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;For complete details on RMI, see the &lt;a</span></span><br><span class="line"><span class="comment"> * href=&quot;&#123;<span class="doctag">@docRoot</span>&#125;/../specs/rmi/index.html&quot;&gt;RMI Specification&lt;/a&gt; which</span></span><br><span class="line"><span class="comment"> * describes the RMI API and system.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span>   1.1</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>  Ann Wollrath</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span>     java.rmi.server.UnicastRemoteObject</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span>     java.rmi.activation.Activatable</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Remote</span> &#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºè¿œç¨‹æ¥å£"><a href="#åˆ›å»ºè¿œç¨‹æ¥å£" class="headerlink" title="åˆ›å»ºè¿œç¨‹æ¥å£"></a>åˆ›å»ºè¿œç¨‹æ¥å£</h3><p><strong><em>AddServiceInterface.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.rmi.Remote;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¿œç¨‹æ¥å£</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-13 16:41:00</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AddServiceInterface</span> <span class="keyword">extends</span> <span class="title class_">Remote</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">sum</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®ç°è¿œç¨‹æ¥å£"><a href="#å®ç°è¿œç¨‹æ¥å£" class="headerlink" title="å®ç°è¿œç¨‹æ¥å£"></a>å®ç°è¿œç¨‹æ¥å£</h3><p>ä¸ºäº†å®ç°è¿œç¨‹æ¥å£ï¼Œç±»å¿…é¡»æ‰©å±•<code>UnicastRemoteObject</code>æˆ–ä½¿ç”¨<code>UnicastRemoteObject</code>ç±»çš„<code>exportObject()</code>æ–¹æ³•ã€‚</p><p><strong><em>Adder.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.rmi.RemoteException;</span><br><span class="line"><span class="keyword">import</span> java.rmi.server.UnicastRemoteObject;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¿œç¨‹æ¥å£å®ç°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-13 16:43:01</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Adder</span> <span class="keyword">implements</span> <span class="title class_">AddServiceInterface</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">sum</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»º-RegistryServeræœåŠ¡"><a href="#åˆ›å»º-RegistryServeræœåŠ¡" class="headerlink" title="åˆ›å»º RegistryServeræœåŠ¡"></a>åˆ›å»º RegistryServeræœåŠ¡</h3><p>RMIæ³¨å†Œè¡¨æ˜¯ä¸€ä¸ªæ”¾ç½®æ‰€æœ‰æœåŠ¡å™¨å¯¹è±¡çš„åç§°ç©ºé—´ã€‚ æ¯æ¬¡æœåŠ¡å™¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå®ƒå°†å‘RMIregistryæ³¨å†Œè¯¥å¯¹è±¡ï¼ˆä½¿ç”¨bind() æˆ–reBind() æ–¹æ³•ï¼‰ã€‚ è¿™äº›ä½¿ç”¨å”¯ä¸€çš„åç§°ï¼ˆç§°ä¸ºç»‘å®šåç§°ï¼‰æ³¨å†Œã€‚</p><p>è¦è°ƒç”¨è¿œç¨‹å¯¹è±¡ï¼Œå®¢æˆ·ç«¯éœ€è¦è¯¥å¯¹è±¡çš„å¼•ç”¨ã€‚ é‚£æ—¶ï¼Œå®¢æˆ·ç«¯ä½¿ç”¨å…¶ç»‘å®šåç§°ï¼ˆä½¿ç”¨lookup() æ–¹æ³•ï¼‰ä»æ³¨å†Œè¡¨ä¸­è·å–å¯¹è±¡ã€‚</p><p>ä¸‹å›¾è¯´æ˜äº†æ•´ä¸ªè¿‡ç¨‹ï¼š</p><p><img src="https://github.com/user-attachments/assets/85000957-685e-45b3-968b-5e602a0b2a57"></p><p><strong><em>RegistryServer.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.rmi.registry.LocateRegistry;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ³¨å†Œä¸­å¿ƒçš„å®ç°</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-08-16 15:17</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RegistryServer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            LocateRegistry.createRegistry(<span class="number">8000</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;registry start...&quot;</span>);</span><br><span class="line">            <span class="comment">// é˜»å¡ RegistryServer</span></span><br><span class="line">            System.in.read();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºAddServeræœåŠ¡"><a href="#åˆ›å»ºAddServeræœåŠ¡" class="headerlink" title="åˆ›å»ºAddServeræœåŠ¡"></a>åˆ›å»ºAddServeræœåŠ¡</h3><p>éœ€è¦åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨åº”ç”¨ç¨‹åºå¹¶åœ¨å…¶ä¸­æ‰˜ç®¡rmiæœåŠ¡<code>Adder</code>ã€‚ è¿™æ˜¯ä½¿ç”¨<code>java.rmi.Naming</code>ç±»çš„<code>rebind()</code>æ–¹æ³•å®Œæˆçš„ã€‚ <code>rebind</code>æ–¹æ³•å¸¦æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªè¡¨ç¤ºå¯¹è±¡å¼•ç”¨çš„åç§°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯¹<code>Adder</code>å®ä¾‹çš„å¼•ç”¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.rmi.AlreadyBoundException;</span><br><span class="line"><span class="keyword">import</span> java.rmi.RemoteException;</span><br><span class="line"><span class="keyword">import</span> java.rmi.registry.LocateRegistry;</span><br><span class="line"><span class="keyword">import</span> java.rmi.registry.Registry;</span><br><span class="line"><span class="keyword">import</span> java.rmi.server.UnicastRemoteObject;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Server</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-13 16:49:15</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AddServer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">AddServiceInterface</span> <span class="variable">addService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Adder</span>();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å¯¼å‡ºæœåŠ¡ï¼Œä½¿ç”¨5000ç«¯å£</span></span><br><span class="line">            <span class="type">AddServiceInterface</span> <span class="variable">skeleton</span> <span class="operator">=</span> (AddServiceInterface) UnicastRemoteObject.exportObject(addService, <span class="number">5000</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è·å– Registry</span></span><br><span class="line">            <span class="type">Registry</span> <span class="variable">registry</span> <span class="operator">=</span> LocateRegistry.getRegistry(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">8000</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ³¨å†Œ Skeleton æœåŠ¡</span></span><br><span class="line">            registry.bind(<span class="string">&quot;AddService&quot;</span>, skeleton);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (RemoteException | AlreadyBoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºå®¢æˆ·ç«¯ç¨‹åº"><a href="#åˆ›å»ºå®¢æˆ·ç«¯ç¨‹åº" class="headerlink" title="åˆ›å»ºå®¢æˆ·ç«¯ç¨‹åº"></a>åˆ›å»ºå®¢æˆ·ç«¯ç¨‹åº</h3><p>å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºåŒ…å«ä¸€ä¸ªJavaç¨‹åºï¼Œè¯¥ç¨‹åºè°ƒç”¨Namingç±»çš„<code>lookup()</code>æ–¹æ³•ã€‚ æ­¤æ–¹æ³•æ¥å—ä¸€ä¸ªå‚æ•°rmi URLï¼Œå¹¶è¿”å›å¯¹<code>AddServerInterface</code>ç±»å‹çš„å¯¹è±¡çš„å¼•ç”¨ã€‚ æ‰€æœ‰è¿œç¨‹æ–¹æ³•è°ƒç”¨éƒ½åœ¨æ­¤å¯¹è±¡ä¸Šå®Œæˆã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.rmi.NotBoundException;</span><br><span class="line"><span class="keyword">import</span> java.rmi.RemoteException;</span><br><span class="line"><span class="keyword">import</span> java.rmi.registry.LocateRegistry;</span><br><span class="line"><span class="keyword">import</span> java.rmi.registry.Registry;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Client</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-13 16:52:32</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AddClient</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// è·å–æ³¨å†Œä¸­å¿ƒ</span></span><br><span class="line">            <span class="type">Registry</span> <span class="variable">registry</span> <span class="operator">=</span> LocateRegistry.getRegistry(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">8000</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//  æŸ¥æ‰¾è¿œç¨‹æœåŠ¡</span></span><br><span class="line">            <span class="type">AddServiceInterface</span> <span class="variable">stub</span> <span class="operator">=</span> (AddServiceInterface) registry.lookup(<span class="string">&quot;AddService&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è®¿é—®è¿œç¨‹æœåŠ¡</span></span><br><span class="line">            System.out.println(<span class="string">&quot;result = &quot;</span> + stub.sum(<span class="number">5</span>, <span class="number">5</span>));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NotBoundException | RemoteException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="RMI-çš„ç›®æ ‡"><a href="#RMI-çš„ç›®æ ‡" class="headerlink" title="RMI çš„ç›®æ ‡"></a>RMI çš„ç›®æ ‡</h3><ul><li>ä¸ºäº†æœ€å°åŒ–åº”ç”¨ç¨‹åºçš„å¤æ‚æ€§ã€‚</li><li>ä¸ºäº†ä¿æŒç±»å‹å®‰å…¨ã€‚</li><li>åˆ†å¸ƒå¼åƒåœ¾å›æ”¶ã€‚</li><li>æœ€å°åŒ–ä½¿ç”¨æœ¬åœ°å¯¹è±¡å’Œè¿œç¨‹å¯¹è±¡ä¹‹é—´çš„å·®å¼‚ã€‚</li></ul><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>Java RMIæ˜¯è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRPCï¼‰çš„çº¯Javaè§£å†³æ–¹æ¡ˆï¼Œç”¨äºåœ¨Javaä¸­åˆ›å»ºåˆ†å¸ƒå¼åº”ç”¨ç¨‹åºã€‚Stubå’ŒSkeletonå¯¹è±¡ç”¨äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¹‹é—´çš„é€šä¿¡ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://github.com/user-attachments/assets/b970dc4d-cdfd-4f18-b8f0-fd4a6f18e115&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="JavaæŠ€æœ¯" scheme="https://chivalry727.github.io/categories/Java%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="Java RMI" scheme="https://chivalry727.github.io/tags/Java-RMI/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹ä»£ç†æ¨¡å¼</title>
    <link href="https://chivalry727.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/"/>
    <id>https://chivalry727.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/</id>
    <published>2020-09-13T02:58:13.000Z</published>
    <updated>2025-02-27T11:11:34.466Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://github.com/user-attachments/assets/f1fec24a-536d-432f-907b-6ac179f24b47"></p><span id="more"></span><h2 id="è®¾è®¡æ¨¡å¼ä¹‹ä»£ç†æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼ä¹‹ä»£ç†æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¹‹ä»£ç†æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼ä¹‹ä»£ç†æ¨¡å¼</h2><h3 id="ä»£ç†æ¨¡å¼ç®€ä»‹"><a href="#ä»£ç†æ¨¡å¼ç®€ä»‹" class="headerlink" title="ä»£ç†æ¨¡å¼ç®€ä»‹"></a>ä»£ç†æ¨¡å¼ç®€ä»‹</h3><p>ä»£ç†è®¾è®¡æ¨¡å¼å±äºç»“æ„è®¾è®¡æ¨¡å¼ç±»åˆ«ï¼Œå®ƒæ˜¯è½¯ä»¶å¼€å‘ä¸­æœ€å¸¸ç”¨çš„æ¨¡å¼ä¹‹ä¸€ã€‚ æ­¤æ¨¡å¼æœ‰åŠ©äºæ§åˆ¶è¿æ¥èµ„æºçš„ä½¿ç”¨å’Œè®¿é—®è¡Œä¸ºã€‚ ç§°ä¸ºâ€œä»£ç†â€çš„å•ç‹¬å¯¹è±¡æœ‰åŠ©äºåœ¨å®¢æˆ·ç«¯å’ŒåŸå§‹æœåŠ¡å¯¹è±¡ä¹‹é—´å»ºç«‹è¿æ¥ã€‚ å› æ­¤ï¼Œä»£ç†å°†å……å½“å®é™…åŸå§‹å¯¹è±¡çš„æ›¿ä»£æˆ–å ä½ç¬¦å¯¹è±¡ï¼Œå°¤å…¶æ˜¯æ§åˆ¶è®¿é—®ã€‚ åŸå§‹æœåŠ¡å¯¹è±¡çš„æ€§è´¨å¯èƒ½æ˜¯åˆ›å»ºè¿‡ç¨‹ä¸­çš„é«˜æˆæœ¬æˆ–éœ€è¦å®‰å…¨è®¿é—®ã€‚ ç³»ç»Ÿçš„æ ¸å¿ƒè¡Œä¸ºä¸ä¼šæ”¹å˜ï¼Œåªæœ‰å†…éƒ¨ç»„ä»¶çš„ç»“æ„å’Œæ§åˆ¶ä¼šè¿›è¡Œä¿®æ”¹ä»¥è·å¾—æ›´å¥½çš„ç»“æœã€‚</p><p>ä½¿ç”¨ä»£ç†æ¨¡å¼åˆ›å»ºä»£è¡¨ï¼ˆrepresentativeï¼‰å¯¹è±¡ï¼Œè®©ä»£ç†å¯¹è±¡æ§åˆ¶æŸå¯¹è±¡çš„è®¿é—®ï¼Œè¢«ä»£ç†çš„å¯¹è±¡æ˜¯è¿œç¨‹çš„å¯¹è±¡ã€åˆ›å»ºå¼€é”€å¤§çš„å¯¹è±¡æˆ–éœ€è¦å®‰å…¨æ§åˆ¶çš„å¯¹è±¡ã€‚</p><p>GoFå®šä¹‰ï¼Œâ€œä¸ºå¦ä¸€ä¸ªå¯¹è±¡æä¾›ä»£ç†æˆ–å ä½ç¬¦ä»¥æ§åˆ¶å¯¹å…¶çš„è®¿é—®â€ã€‚</p><p>æ¨¡å¼å¼•å…¥äº†æ›¿ä»£è€Œä¸æ˜¯å®é™…çš„åŸå§‹å¯¹è±¡æ¥ä¸å¤–éƒ¨å®ä½“è¿›è¡Œäº¤äº’ã€‚ æ‚¨æ­£åœ¨é€šè¿‡å¦ä¸€ä¸ªå¯¹è±¡è®¿é—®è¯¥åŸå§‹å¯¹è±¡ï¼ŒåŒæ—¶ä¿ç•™äº†æ•´ä¸ªç³»ç»Ÿçš„è¡Œä¸ºã€‚</p><h3 id="ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­"><a href="#ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­" class="headerlink" title="ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­"></a>ç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­</h3><p>æˆ‘ä»¬å¯ä»¥åœ¨é‡‘èç³»ç»Ÿä¸­æ‰¾åˆ°è®¸å¤šä»£ç†æ¨¡å¼çš„ä¾‹å­ã€‚ ä¿¡ç”¨å¡å°†å……å½“æä¾›ç›¸åŒåŠŸèƒ½çš„å®é™…é“¶è¡Œç•Œé¢ã€‚ å®ƒå°†å……å½“è‡ªåŠ¨æŸœå‘˜æœºçš„ææ¬¾ï¼Œæ”¯ç¥¨ä½™é¢ï¼Œè½¬è´¦å’Œå…¶ä»–å‡ é¡¹ä¾¿åˆ©çš„å·¥ä½œï¼Œè¿™äº›å·¥ä½œç”±ä¿¡ç”¨å¡ä»£ç†å®Œæˆã€‚ å¦å¤–ï¼Œæ”¯ç¥¨å¯ä»¥ä»£è¡¨ä¸ªäººæ‰§è¡Œæ±‡æ¬¾åŠŸèƒ½ã€‚ å®ƒæ˜¯é“¶è¡Œæ‰¹å‡†åä»ä¸€ä¸ªäººçš„å¸æˆ·å‘å¦ä¸€ä¸ªäººæ”¯ä»˜ç‰¹å®šé‡‘é¢çš„å‘½ä»¤ã€‚ åœ¨è¿™é‡Œï¼Œæ”¯ç¥¨å……å½“äº†ä¸€å¤§ç¬”ç°é‡‘çš„ä»£ç†ã€‚</p><h3 id="é¢ä¸´çš„é—®é¢˜"><a href="#é¢ä¸´çš„é—®é¢˜" class="headerlink" title="é¢ä¸´çš„é—®é¢˜"></a>é¢ä¸´çš„é—®é¢˜</h3><p>è¿™å‘ç”Ÿåœ¨æ‰€éœ€å¯¹è±¡ä¸å¤ªå®¹æ˜“åˆå§‹åŒ–æˆ–è®¿é—®çš„æƒ…å†µä¸‹ã€‚ å¦‚æœè¯¥å¯¹è±¡é©»ç•™åœ¨è¿œç¨‹åº“ä¸­ï¼Œæˆ–è€…å®ƒæ¶ˆè€—å¤§é‡ç³»ç»Ÿèµ„æºï¼Œå¹¶ä¸”å®¢æˆ·ç«¯ä»…åœ¨ç‰¹å®šæ¡ä»¶ä¸‹éœ€è¦å®ƒã€‚ å› æ­¤ï¼Œåˆå§‹åŒ–å’Œç»´æŠ¤æ­¤ç±»å¯¹è±¡ä¸æ˜¯ç³»ç»Ÿçš„æœ€æœ‰æ•ˆæ–¹æ³•ã€‚ å¦‚æœéœ€è¦åœ¨è®¿é—®å®é™…æœåŠ¡å¯¹è±¡æ—¶æä¾›å…¶ä»–åŠŸèƒ½ï¼Œåˆ™å°†ä¸ºå¼€å‘äººå‘˜å¸¦æ¥å¦ä¸€å±‚è§£å†³æ–¹æ³•ã€‚ å› æ­¤ï¼Œç³»ç»Ÿéœ€è¦æ‰¾åˆ°æ›´å¥½çš„è§£å†³æ–¹æ¡ˆæ¥å¤„ç†è¿™ç§æƒ…å†µã€‚</p><h3 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h3><p>é€šè¿‡å¼•å…¥ä»£ç†å¯ä»¥è§£å†³ä¸Šè¿°é—®é¢˜ï¼šä»£æ›¿æ˜‚è´µä¸”å—ä¿æŠ¤çš„å®é™…å¯¹è±¡çš„æ›¿ä»£ç»„ä»¶ã€‚ è¯¥ä»£ç†å°†åŒ…å«ä¸åŸå§‹æœåŠ¡å¯¹è±¡ç›¸ä¼¼çš„æ¥å£ï¼Œå¹¶ä¸”å½“å®ƒæ¥æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚æ—¶ï¼Œä»£ç†å¯¹è±¡å°†åˆ›å»ºåŸå§‹å¯¹è±¡çš„å®ä¾‹å¹¶é€šè¿‡å“åº”è¿›è¡Œå§”æ‰˜ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯ä»£ç†ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ä»£ç†ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ä»£ç†ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ä»£ç†ï¼Ÿ</h3><p>ä»£ç†åªæ˜¯åŸå§‹å¯¹è±¡çš„æ›¿ä»£å¯¹è±¡ã€‚ å®ƒä¹Ÿå……å½“åŒ…è£…å™¨æˆ–ä»£ç†å¯¹è±¡ï¼Œå®¢æˆ·ç«¯è°ƒç”¨è¯¥åŒ…è£…å™¨æˆ–ä»£ç†å¯¹è±¡ä»¥è®¿é—®åå°çš„åŸå§‹å¯¹è±¡ã€‚ ä»£ç†æ˜¯ä¸€ä¸ªè½»é‡çº§å¯¹è±¡ï¼Œå®ƒå®ç°ä¸åŸå§‹å®é™…å¯¹è±¡ç›¸åŒçš„æ¥å£ï¼Œå¹¶æ§åˆ¶å¯¹å®é™…å¯¹è±¡çš„è®¿é—®ã€‚ å¦‚æœéœ€è¦ï¼Œå®ƒå¯ä»¥åŒ…æ‹¬å…¶ä»–åŠŸèƒ½ï¼Œä¾‹å¦‚åœ¨å¯¹å®é™…å¯¹è±¡çš„æ“ä½œå ç”¨å¤§é‡èµ„æºæ—¶è¿›è¡Œç¼“å­˜ï¼Œå¹¶åœ¨è°ƒç”¨å®é™…å¯¹è±¡æ“ä½œä¹‹å‰ç¡®ä¿å‰ææ¡ä»¶ã€‚</p><p><img src="https://tvax2.sinaimg.cn/large/008aQ1h9ly1gip1yu1bk8j30fn07yglm.jpg"></p><h3 id="ä¸ºä»€ä¹ˆæˆ‘ä»¬ä½¿ç”¨ä»£ç†ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆæˆ‘ä»¬ä½¿ç”¨ä»£ç†ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆæˆ‘ä»¬ä½¿ç”¨ä»£ç†ï¼Ÿ"></a>ä¸ºä»€ä¹ˆæˆ‘ä»¬ä½¿ç”¨ä»£ç†ï¼Ÿ</h3><ul><li>ä»£ç†å¯ä»¥æ ¹æ®éœ€è¦æ‰§è¡Œä¸åŒçš„æ“ä½œã€‚ å®ƒå¯ä»¥æ‰§è¡Œè¯¸å¦‚æ—¥å¿—è®°å½•å’Œè¿‡æ»¤è¯·æ±‚ä¹‹ç±»çš„é¢„å¤„ç†ï¼Œç„¶åå†ç§»äº¤ç»™åŸå§‹å¯¹è±¡ä»¥å®ŒæˆæŸäº›å‰ææ¡ä»¶ã€‚</li><li> åŒæ ·ï¼Œä»£ç†å¯ä»¥åœ¨å°†ç»“æœå‘é€å›è¯·æ±‚è€…ä¹‹å‰æ‰§è¡Œåå¤„ç†ã€‚ å½“éœ€è¦è¦†ç›–åŠŸèƒ½æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä»£ç†ã€‚ </li><li>ç‰¹åˆ«æ˜¯ï¼Œå½“éœ€è¦æ‰“ç ´è®¸å¯è¯ä»¥é˜²æ­¢ç ´åç°æœ‰çš„æ—§ç³»ç»Ÿæ—¶ï¼Œä»£ç†å°†æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ </li><li>å½“éœ€è¦ç”¨äºèµ„æºå¯†é›†å‹åº”ç”¨ç¨‹åºçš„å…‘ç°æœºåˆ¶ä»¥å‡å°‘ç½‘ç»œæµé‡å’Œæˆæœ¬æ—¶ï¼Œä»£ç†æ˜¯ä¸é”™çš„é€‰æ‹©ã€‚ </li><li>å½“å­˜åœ¨æ˜‚è´µä¸”å¤æ‚çš„å®‰å…¨é—®é¢˜æ—¶ï¼Œä»£ç†å¯ç”¨äºæ‰¿å—ç³»ç»Ÿçš„å®‰å…¨æ“ä½œã€‚</li></ul><h3 id="ä»£ç†æ¨¡å¼å˜åŒ–"><a href="#ä»£ç†æ¨¡å¼å˜åŒ–" class="headerlink" title="ä»£ç†æ¨¡å¼å˜åŒ–"></a>ä»£ç†æ¨¡å¼å˜åŒ–</h3><p>æœ‰å‡ ç§ç±»å‹çš„ä»£ç†æ¨¡å¼å˜åŒ–ã€‚</p><ul><li>è¿œç¨‹ä»£ç†ï¼šé¡¾åæ€ä¹‰ï¼Œè¿™äº›ä»£ç†åœ¨ä¸åŒçš„å·¥ä½œç©ºé—´ä¸Šå·¥ä½œã€‚ é‚£æ˜¯å®é™…çš„åŸå§‹å¯¹è±¡å­˜åœ¨äºè¿œç¨‹åœ°åŒºã€‚ è¿œç¨‹ä»£ç†å……å½“è¿œç¨‹å¯¹è±¡çš„æœ¬åœ°ä»£è¡¨ï¼Œå› æ­¤ï¼Œå®¢æˆ·ç«¯ä¸äº†è§£åŸå§‹å¯¹è±¡çš„è¿œç¨‹æ€§ã€‚ Java RMIæŠ€æœ¯ä¸­çš„â€œå­˜æ ¹â€å¯¹è±¡å°±æ˜¯è¿™ç§æ¨¡å¼çš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚ å½“å®¢æˆ·ç«¯éœ€è¦è·å–åŸå§‹å¯¹è±¡çš„æœåŠ¡æ—¶ï¼Œè¿œç¨‹åŸå§‹å¯¹è±¡å°†é©»ç•™åœ¨å…¶ä»–JVMçš„å †ä¸­ï¼Œå­˜æ ¹å°†å……å½“ä»£ç†ä»¥äº¤äº’å’Œè°ƒç”¨è¿œç¨‹å¯¹è±¡çš„æ–¹æ³•ã€‚</li><li>è™šæ‹Ÿä»£ç†ï¼šè¿™æ˜¯èŠ‚çœåº”ç”¨ç¨‹åºæˆæœ¬çš„ä¸€ç§æ–¹æ³•ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®é™…åŸå§‹å¯¹è±¡çš„åˆ›å»ºéå¸¸æ˜‚è´µï¼Œå¹¶ä¸”å†…å­˜å’Œèµ„æºæ¶ˆè€—å¾ˆé«˜ã€‚ ä¸ºäº†é¿å…è¿™ç§éšœç¢ï¼Œåº”ç”¨ç¨‹åºå¼•å…¥äº†è™šæ‹Ÿä»£ç†ã€‚ è™šæ‹Ÿä»£ç†å……å½“æ˜‚è´µçš„åŸå§‹å¯¹è±¡çš„å ä½ç¬¦ï¼Œå¹¶ä»…åœ¨éœ€è¦æ—¶åˆ›å»ºåŸå§‹å¯¹è±¡çš„çœŸå®å¯¹è±¡ã€‚ é€šè¿‡è¿™ç§æ–¹å¼ï¼Œè™šæ‹Ÿä»£ç†å¯ä»¥ä¿å­˜å®é™…å¯¹è±¡å¹¶åœ¨ä»¥åçš„è°ƒç”¨ä¸­é‡æ–°ä½¿ç”¨ï¼Œä»è€Œé˜²æ­¢å¯¹è±¡é‡å¤å¹¶èŠ‚çœå†…å­˜ã€‚</li><li>ä¿æŠ¤ä»£ç†ï¼šè¯¥ä»£ç†ä¸ºåŸå§‹å¯¹è±¡æ·»åŠ äº†ä¸€å±‚ä¿æŠ¤ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒåŸå§‹å¯¹è±¡å—ä¸åŒçš„è®¿é—®çº§åˆ«ä¿æŠ¤ã€‚ å½“å®¢æˆ·ç«¯è¦è®¿é—®åŸå§‹å¯¹è±¡æ—¶ï¼Œä¿æŠ¤ä»£ç†å°†åœ¨è½¬å‘è¯·æ±‚ä¹‹å‰æ£€æŸ¥å®¢æˆ·ç«¯çš„é€‚å½“è®¿é—®çº§åˆ«ã€‚</li><li>æ™ºèƒ½ä»£ç†ï¼šè¯¥ä»£ç†æä¾›äº†é™„åŠ çš„å®‰å…¨å±‚ã€‚ å®ƒæ‰§è¡Œå…¶ä»–æ“ä½œä»¥éªŒè¯åŸå§‹å¯¹è±¡æ˜¯å®‰å…¨çš„ï¼Œå¯ä»¥é¿å…æ„å¤–è®¿é—®å’Œå¨èƒï¼Œä¾‹å¦‚æ„å¤–å¤„ç½®å’Œåˆ é™¤åŸå§‹å¯¹è±¡ï¼Œåœ¨è®¿é—®åŸå§‹å¯¹è±¡ä¹‹å‰æ£€æŸ¥åŸå§‹å¯¹è±¡æ˜¯å¦å·²é”å®šä»¥åŠåœ¨é¦–æ¬¡å°†æŒä¹…å¯¹è±¡åŠ è½½åˆ°å†…å­˜æ—¶å‚è€ƒã€‚</li></ul><h3 id="ä»£ç†è®¾è®¡æ¨¡å¼çš„ç±»å›¾"><a href="#ä»£ç†è®¾è®¡æ¨¡å¼çš„ç±»å›¾" class="headerlink" title="ä»£ç†è®¾è®¡æ¨¡å¼çš„ç±»å›¾"></a>ä»£ç†è®¾è®¡æ¨¡å¼çš„ç±»å›¾</h3><p><img src="https://tvax4.sinaimg.cn/large/008aQ1h9ly1gip28gx6rgj30i40873yj.jpg"></p><h3 id="ä»£ç†è®¾è®¡æ¨¡å¼çš„ç»„ä»¶"><a href="#ä»£ç†è®¾è®¡æ¨¡å¼çš„ç»„ä»¶" class="headerlink" title="ä»£ç†è®¾è®¡æ¨¡å¼çš„ç»„ä»¶"></a>ä»£ç†è®¾è®¡æ¨¡å¼çš„ç»„ä»¶</h3><ul><li>Proxyï¼šæ§åˆ¶å¯¹çœŸå®ä¸»é¢˜çš„è®¿é—®ã€‚ ä»£ç†åŒ…å«çœŸå®ä¸»é¢˜çš„å®ä¾‹ï¼Œå¹¶æä¾›ä¸ä¸»é¢˜ç›¸åŒçš„æ¥å£ï¼Œä»¥ä¾¿è½»æ¾è”ç³»çœŸå®ä¸»é¢˜ã€‚ ä»£ç†ç±»ä¸­å¯ä»¥æœ‰å…¶ä»–æ–¹æ³•æ¥æ‰§è¡Œä¸­é—´å·¥ä½œã€‚</li><li>Subjectï¼šè¿™æ˜¯çœŸå®ä¸»é¢˜å’Œä»£ç†çš„é€šç”¨æ¥å£ã€‚ å› æ­¤ï¼Œä»£ç†å’ŒçœŸå®ä¸»é¢˜éƒ½å®ç°äº†â€œä¸»é¢˜â€ç•Œé¢ã€‚ å®¢æˆ·ç«¯ä»…ä¸ä»£ç†è¿›è¡Œäº¤äº’ä»¥è®¿é—®çœŸå®ä¸»é¢˜ï¼Œå› ä¸ºå¯ä»¥éšæ—¶ä½¿ç”¨ä»£ç†ä»£æ›¿çœŸå®ä¸»é¢˜ã€‚</li><li>RealSubjectï¼šè¿™æ˜¯å®é™…çš„åŸå§‹å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡ä»£ç†è¿›è¡Œè®¿é—®ã€‚ è¿™å¯èƒ½æ˜¯ç½‘ç»œè¿æ¥ï¼Œæ–‡ä»¶ï¼Œå†…å­˜ä¸­çš„å¤§å¯¹è±¡æˆ–å…¶ä»–æ˜‚è´µæˆ–éš¾ä»¥åˆ›å»ºçš„ç»„ä»¶</li></ul><h3 id="ä»£ç†æ¨¡å¼å¦‚ä½•å·¥ä½œï¼Ÿ"><a href="#ä»£ç†æ¨¡å¼å¦‚ä½•å·¥ä½œï¼Ÿ" class="headerlink" title="ä»£ç†æ¨¡å¼å¦‚ä½•å·¥ä½œï¼Ÿ"></a>ä»£ç†æ¨¡å¼å¦‚ä½•å·¥ä½œï¼Ÿ</h3><p>åœ¨æ­¤æ¨¡å¼ä¸‹ï¼Œå®¢æˆ·ç«¯ä¸ç›´æ¥ä¸åŸå§‹å¯¹è±¡è¿›è¡Œäº¤äº’ï¼Œè€Œæ˜¯ï¼Œå®¢æˆ·ç«¯ä½¿ç”¨ä»£ç†å¯¹è±¡æ¥è°ƒç”¨åŸå§‹å¯¹è±¡ã€‚ ä½†æ˜¯æœ€é‡è¦çš„ä¸€ç‚¹æ˜¯å®¢æˆ·ç«¯ä¸äº†è§£ä»£ç†ï¼Œå¹¶ä¸”ä»£ç†çš„è¡Œä¸ºä¸å®¢æˆ·ç«¯çš„åŸå§‹å¯¹è±¡ç›¸åŒã€‚</p><h3 id="ä»£ç†æ¨¡å¼ç¤ºä¾‹"><a href="#ä»£ç†æ¨¡å¼ç¤ºä¾‹" class="headerlink" title="ä»£ç†æ¨¡å¼ç¤ºä¾‹"></a>ä»£ç†æ¨¡å¼ç¤ºä¾‹</h3><p>å‡è®¾åœ¨è‡ªç„¶å…¬å›­ä¸­æœ‰ä¸€ç§éå¸¸ç¨€æœ‰çš„åŠ¨ç‰©å«åšâ€œæµ·ç†Šâ€ã€‚ å¹¶éæ¯ä¸ªå…¬å›­æ¸¸å®¢éƒ½å¯ä»¥å‚è§‚æµ·ç†Šã€‚ åªæœ‰ç”Ÿç‰©å­¦å®¶ï¼Œå…½åŒ»å’ŒåŠ¨ç‰©ç ”ç©¶äººå‘˜è¿™æ ·çš„æˆæƒäººå‘˜æ‰èƒ½è®¿é—®ä»–ä»¬ã€‚ ä¸ºäº†æ§åˆ¶è¿™ç§ç¨€æœ‰ç‰©ç§çš„è¿›å…¥ï¼Œå…¬å›­ä»»å‘½äº†â€œæµ·æ´‹ç†Šå«é˜Ÿâ€ã€‚ ä»–å°†è¯„ä¼°è®¿é—®è€…çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¹¶é…Œæƒ…æ§åˆ¶å¯¹æµ·ç†Šçš„è®¿é—®ã€‚</p><p>è®©æˆ‘ä»¬ä»¥ä»£ç†æ¨¡å¼å®ç°è¿™ç§æƒ…å†µï¼Œå¹¶ç¡®å®šç›¸å…³ç»„ä»¶ã€‚</p><p><strong><em>SeaBearGuardProxy</em></strong> ï¼šè¿™æ˜¯SeaBearOriginalç±»çš„ä»£ç†ç±»ã€‚</p><p><strong><em>BearProtectInterface</em></strong> : è¿™æ˜¯SearBearOriginalå’ŒSeaBearGuardProxyç±»å…±äº«çš„æ¥å£ï¼Œå¹¶ä¸”åŒ…å«è®¿é—®æ§åˆ¶æœºåˆ¶ã€‚</p><p><strong><em>SeaBearOriginal</em></strong> : è¿™æ˜¯ä»£è¡¨è‡ªç„¶å…¬å›­ä¸­ç¨€æœ‰åŠ¨ç‰©ç‰©ç§çš„å®é™…åŸå§‹ç±»åˆ«</p><p><strong><em>NatureParkVisitorClient</em></strong>: è¿™æ˜¯æ¥å‚è§‚æµ·ç†Šçš„æ¸¸å®¢å®¢æˆ·ç«¯</p><h3 id="å®ç°ä»£ç†æ¨¡å¼æ­¥éª¤"><a href="#å®ç°ä»£ç†æ¨¡å¼æ­¥éª¤" class="headerlink" title="å®ç°ä»£ç†æ¨¡å¼æ­¥éª¤"></a>å®ç°ä»£ç†æ¨¡å¼æ­¥éª¤</h3><ol><li>æ ‡è¯†å®é™…çš„åŸå§‹å¯¹è±¡ï¼Œè¯¥å¯¹è±¡éœ€è¦é€šè¿‡ä»£ç†è¿›è¡ŒåŒ…è£…ã€‚</li><li>ç¡®å®šéœ€è¦æ‰§è¡Œå“ªäº›æ­¥éª¤æ¥æ§åˆ¶å¯¹åŸå§‹å¯¹è±¡çš„è®¿é—®ã€‚</li><li>åˆ›å»ºä¸€ä¸ªå¯ç”±åŸå§‹å¯¹è±¡å’Œä»£ç†å®ç°çš„åˆé€‚æ¥å£ã€‚</li><li>åˆ›å»ºå…·æœ‰è®¿é—®æ§åˆ¶æœºåˆ¶ä»¥åŠæ”¯æŒä»£ç†æ„å›¾çš„å…¶ä»–åŠŸèƒ½çš„ä»£ç†ã€‚</li><li>åˆ›å»ºå®¢æˆ·ç«¯å¯¹è±¡å¹¶é€šè¿‡ä»£ç†è®¿é—®åŸå§‹å¯¹è±¡</li></ol><h3 id="ä»£ç†æ¨¡å¼ä»£ç ç¤ºä¾‹"><a href="#ä»£ç†æ¨¡å¼ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç†æ¨¡å¼ä»£ç ç¤ºä¾‹"></a>ä»£ç†æ¨¡å¼ä»£ç ç¤ºä¾‹</h3><p><strong><em>BearProtectInterface.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸»é¢˜æ¥å£</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-13 15:45:19</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BearProtectInterface</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">allowVisit</span><span class="params">(<span class="type">int</span> visitorCode)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong><em>SeaBearGuardProxy.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä»£ç†å¯¹è±¡</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-13 15:48:09</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SeaBearGuardProxy</span> <span class="keyword">implements</span> <span class="title class_">BearProtectInterface</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> visitorCode;</span><br><span class="line">    <span class="keyword">private</span> String visitorProfession;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">SeaBearOriginal</span> <span class="variable">seaBear</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SeaBearOriginal</span>();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">allowVisit</span><span class="params">(<span class="type">int</span> visitorCode)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (visitorCode == <span class="number">1</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Visitor allowed to see the Sea Bear&quot;</span>);</span><br><span class="line">            seaBear.showSeaBear();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Visitor NOT allowed to see the Sea Bear&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">assignVisitorCode</span><span class="params">(String profession)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (visitorProfession == <span class="string">&quot;Biologist&quot;</span> || visitorProfession == <span class="string">&quot;Vet&quot;</span> || visitorProfession == <span class="string">&quot;Animal Researcher&quot;</span>) &#123;</span><br><span class="line">            visitorCode = <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            visitorCode = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong><em>SeaBearOriginal.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åŸå§‹å¯¹è±¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-13 15:49:19</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SeaBearOriginal</span> <span class="keyword">implements</span> <span class="title class_">BearProtectInterface</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">allowVisit</span><span class="params">(<span class="type">int</span> visitorCode)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (visitorCode == <span class="number">1</span> ) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Visitor allowed to see the Sea Bear&quot;</span>);</span><br><span class="line">            <span class="built_in">this</span>.showSeaBear();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Visitor NOT allowed to see the Sea Bear&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showSeaBear</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;You are welcome to the Sea Bear premisses&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong><em>NatureParkVisitorClient.java</em></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®¢æˆ·ç«¯å¯¹è±¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-13 15:51:53</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NatureParkVisitorClient</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä»£ç†å¯¹è±¡</span></span><br><span class="line">        <span class="type">BearProtectInterface</span> <span class="variable">seaBearProxy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SeaBearGuardProxy</span>();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// è°ƒç”¨æ¥å£</span></span><br><span class="line">            seaBearProxy.allowVisit(<span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¤ºä¾‹ä»£ç æ—¶åºå›¾"><a href="#ç¤ºä¾‹ä»£ç æ—¶åºå›¾" class="headerlink" title="ç¤ºä¾‹ä»£ç æ—¶åºå›¾"></a>ç¤ºä¾‹ä»£ç æ—¶åºå›¾</h3><p><img src="https://tva1.sinaimg.cn/large/008aQ1h9ly1gip2r0b1ycj30i60aoglj.jpg"></p><h3 id="ä½¿ç”¨ä»£ç†æ¨¡å¼çš„åœºæ™¯"><a href="#ä½¿ç”¨ä»£ç†æ¨¡å¼çš„åœºæ™¯" class="headerlink" title="ä½¿ç”¨ä»£ç†æ¨¡å¼çš„åœºæ™¯"></a>ä½¿ç”¨ä»£ç†æ¨¡å¼çš„åœºæ™¯</h3><ul><li>å½“åŸå§‹å¯¹è±¡åˆ›å»ºæˆæœ¬å¾ˆé«˜æ—¶</li><li>å½“åŸå§‹å¯¹è±¡å­˜åœ¨äºè¿œç¨‹ç¯å¢ƒä¸­æ—¶</li><li>å½“åŸå§‹å¯¹è±¡ä¸Šçš„å®‰å…¨æ§åˆ¶å—åˆ°é™åˆ¶æ—¶</li><li>åœ¨åˆ›å»ºåŸå§‹å¯¹è±¡ä¹‹å‰å’Œä¹‹åéœ€è¦æ‰§è¡Œå…¶ä»–æ“ä½œæ—¶</li><li>å½“æŒ‰éœ€åˆ›å»ºåŸå§‹å¯¹è±¡æˆ–ç³»ç»Ÿéœ€è¦åœ¨åŠ è½½æŸäº›èµ„æºæ—¶å»¶è¿Ÿ</li><li>å½“åŸå§‹å¯¹è±¡ä½äºæ—§ç³»ç»Ÿæˆ–ç¬¬ä¸‰æ–¹åº“ä¸­æ—¶</li></ul><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li>ä»£ç†æ¨¡å¼ä¸ºå¦ä¸€ä¸ªå¯¹è±¡æä¾›ä»£è¡¨ï¼Œä»¥ä¾¿æ§åˆ¶å®¢æˆ·å¯¹å¯¹è±¡çš„è®¿é—®ï¼Œç®¡ç†è®¿é—®çš„æ–¹å¼æœ‰è®¸å¤šç§</li><li>è¿œç¨‹ä»£ç†ç®¡ç†å®¢æˆ·å’Œè¿œç¨‹å¯¹è±¡ä¹‹é—´çš„äº¤äº’</li><li>è™šæ‹Ÿä»£ç†æ§åˆ¶è®¿é—®å®ä¾‹åŒ–å¼€é”€å¤§çš„å¯¹è±¡</li><li>ä¿æŠ¤ä»£ç†åŸºäºè°ƒç”¨è€…æ§åˆ¶å¯¹å¯¹è±¡æ–¹æ³•çš„è®¿é—®</li><li>ä»£ç†æ¨¡å¼æœ‰è®¸å¤šå˜ä½“ï¼Œä¾‹å¦‚ï¼šç¼“å­˜ä»£ç†ã€åŒæ­¥ä»£ç†ã€é˜²ç«å¢™ä»£ç†å’Œå†™å…¥æ—¶å¤åˆ¶ä»£ç†</li><li>ä»£ç†åœ¨ç»“æ„ä¸Šç±»ä¼¼è£…é¥°è€…ï¼Œä½†æ˜¯ç›®çš„ä¸åŒ</li><li>è£…é¥°è€…æ¨¡å¼ä¸ºå¯¹è±¡åŠ ä¸Šè¡Œä¸ºï¼Œè€Œä»£ç†åˆ™æ˜¯æ§åˆ¶è®¿é—®</li><li>Javaå†…ç½®çš„ä»£ç†æ”¯æŒï¼Œå¯ä»¥æ ¹æ®éœ€è¦å»ºç«‹è¿è¡Œæ—¶åŠ¨æ€ä»£ç†ï¼Œå¹¶å°†æ‰€æœ‰è°ƒç”¨åˆ†é…åˆ°æ‰€é€‰çš„å¤„ç†å™¨</li><li>å°±å’Œå…¶ä»–çš„åŒ…è£…è€…ï¼ˆwrapperï¼‰ä¸€æ ·ï¼Œä»£ç†ä¼šé€ æˆä½ çš„è®¾è®¡ä¸­ç±»çš„æ•°ç›®å¢åŠ </li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://github.com/user-attachments/assets/f1fec24a-536d-432f-907b-6ac179f24b47&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://chivalry727.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="ä»£ç†æ¨¡å¼" scheme="https://chivalry727.github.io/tags/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/"/>
    
      <category term="Proxy Design Pattern" scheme="https://chivalry727.github.io/tags/Proxy-Design-Pattern/"/>
    
  </entry>
  
  <entry>
    <title>Java Lockä¹‹ReentrantLock</title>
    <link href="https://chivalry727.github.io/Java-Lock%E7%A4%BA%E4%BE%8B%E4%B9%8BReentrantLock/"/>
    <id>https://chivalry727.github.io/Java-Lock%E7%A4%BA%E4%BE%8B%E4%B9%8BReentrantLock/</id>
    <published>2020-09-12T01:53:30.000Z</published>
    <updated>2025-02-27T11:26:25.896Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://github.com/user-attachments/assets/79f83b3c-bc5c-4bd5-80c9-e63ea97380a7"></p><span id="more"></span><h2 id="Java-Lockä¹‹ReentrantLock"><a href="#Java-Lockä¹‹ReentrantLock" class="headerlink" title="Java Lockä¹‹ReentrantLock"></a>Java Lockä¹‹ReentrantLock</h2><h3 id="Java-é”"><a href="#Java-é”" class="headerlink" title="Java é”"></a>Java é”</h3><p>é€šå¸¸ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒæ—¶ï¼Œä¸ºäº†ç¡®ä¿çº¿ç¨‹å®‰å…¨ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨<code>synchronized</code>å…³é”®å­—æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ<code>synchronized</code>å…³é”®å­—æ˜¯è§£å†³ä¹‹é“ï¼Œä½†å®ƒç”±ä¸€äº›ç¼ºç‚¹ï¼Œå¯¼è‡´æˆ‘ä»¬æ”¾å¼ƒä½¿ç”¨å®ƒã€‚Java 1.5 Concurrency APIé™„å¸¦äº†å¸¦æœ‰æ¥å£å’Œä¸€äº›å®ç°ç±»çš„<code>java.util.concurrent.locks</code>è½¯ä»¶åŒ…ï¼Œ<code>Lock</code>ä»¥æ”¹è¿›å¯¹è±¡é”å®šæœºåˆ¶ã€‚</p><h3 id="Java-Lock-ç»“æ„"><a href="#Java-Lock-ç»“æ„" class="headerlink" title="Java  Lock ç»“æ„"></a>Java  Lock ç»“æ„</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Lock</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–é”</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">lock</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–é”ç›´åˆ°å½“å‰çº¿ç¨‹è¢«ä¸­æ–­</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">lockInterruptibly</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»…åœ¨è°ƒç”¨æ—¶é‡Šæ”¾é”æ—¶æ‰è·å–é”ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">tryLock</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¦‚æœé”åœ¨ç»™å®šçš„ç­‰å¾…æ—¶é—´å†…æ˜¯ç©ºé—²çš„ï¼Œå¹¶ä¸”å½“å‰çº¿ç¨‹å°šæœªè¢«ä¸­æ–­ï¼Œåˆ™è·å–è¯¥é”ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">tryLock</span><span class="params">(<span class="type">long</span> time, TimeUnit unit)</span> <span class="keyword">throws</span> InterruptedException;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é‡Šæ”¾é”</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">unlock</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›ç»‘å®šåˆ°æ­¤Lockå®ä¾‹çš„æ–°Conditionå®ä¾‹ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Condition <span class="title function_">newCondition</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Java Lock API ä¸­çš„ä¸€äº›é‡è¦æ¥å£å’Œç±»ï¼š</p><ol><li><p><strong>Lock</strong>ï¼šè¿™æ˜¯Lock APIçš„åŸºæœ¬æ¥å£ã€‚å®ƒæä¾›äº†<code>synchronized</code>å…³é”®å­—çš„æ‰€æœ‰åŠŸèƒ½ï¼Œå¹¶æä¾›äº†å…¶ä»–æ–¹å¼æ¥åˆ›å»ºä¸åŒçš„é”å®šæ¡ä»¶ï¼Œä»è€Œä¸ºçº¿ç¨‹ç­‰å¾…é”å®šæä¾›äº†è¶…æ—¶ã€‚ä¸€äº›é‡è¦çš„æ–¹æ³•æ˜¯ï¼šlock() è·å–é”ï¼Œunlock() é‡Šæ”¾é”ï¼ŒtryLock() ç­‰å¾…é”ä¸€å®šæ—¶é—´ï¼ŒnewCondition() åˆ›å»ºCondition é˜»å¡é˜Ÿåˆ—æ¥å£ç­‰ã€‚</p></li><li><p><strong>Condition</strong>ï¼šConditionå¯¹è±¡ç±»ä¼¼äº<code>Object wait-notify</code>æ¨¡å‹ï¼Œå…·æœ‰é™„åŠ åŠŸèƒ½ä»¥åˆ›å»ºä¸åŒçš„waité›†ã€‚Conditionå¯¹è±¡å§‹ç»ˆç”±Lockå¯¹è±¡åˆ›å»ºã€‚ä¸€äº›é‡è¦çš„æ–¹æ³•æ˜¯ç±»ä¼¼äºwait() å’Œsignal() çš„await() ï¼Œç±»ä¼¼äºnotify() å’ŒnotifyAll() æ–¹æ³•çš„signalAll()ã€‚</p></li><li><p><strong>ReadWriteLock</strong>ï¼šå®ƒåŒ…å«ä¸€å¯¹å…³è”çš„é”ï¼Œä¸€ä¸ªç”¨äºåªè¯»æ“ä½œï¼Œå¦ä¸€ä¸ªç”¨äºå†™å…¥ã€‚åªè¦æ²¡æœ‰å†™ç¨‹åºçº¿ç¨‹ï¼Œè¯»é”å°±å¯ä»¥åŒæ—¶ç”±å¤šä¸ªè¯»ç¨‹åºçº¿ç¨‹æŒæœ‰ã€‚å†™é”æ˜¯æ’ä»–çš„ã€‚</p></li><li><p><strong>ReentrantLock</strong>ï¼šè¿™æ˜¯Lockæ¥å£ä½¿ç”¨æœ€å¹¿æ³›çš„å®ç°ç±»ã€‚æ­¤ç±»ä»¥ä¸synchronizedå…³é”®å­—ç›¸ä¼¼çš„æ–¹å¼å®ç°Lockæ¥å£ã€‚é™¤äº†Lockæ¥å£çš„å®ç°ä¹‹å¤–ï¼ŒReentrantLockè¿˜åŒ…å«ä¸€äº›å®ç”¨æ–¹æ³•æ¥è·å–æŒæœ‰é”çš„çº¿ç¨‹ï¼Œç­‰å¾…è·å–é”çš„çº¿ç¨‹ç­‰ã€‚</p><p><code>synchronized</code>åŒæ­¥æ–¹æ³•æœ¬è´¨ä¸Šæ˜¯å¯é‡å…¥çš„ï¼Œå³ï¼Œå¦‚æœä¸€ä¸ªçº¿ç¨‹åœ¨ç›‘è§†å¯¹è±¡ä¸Šå…·æœ‰é”ï¼Œå¹¶ä¸”å¦‚æœå¦ä¸€ä¸ªåŒæ­¥å—éœ€è¦åœ¨åŒä¸€ç›‘è§†å¯¹è±¡ä¸Šå…·æœ‰é”ï¼Œåˆ™çº¿ç¨‹å¯ä»¥è¾“å…¥è¯¥ä»£ç å—ã€‚æˆ‘è®¤ä¸ºè¿™æ˜¯ç±»åç§°ä¸ºReentrantLockçš„åŸå› ã€‚è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹æ¥äº†è§£æ­¤åŠŸèƒ½ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * çº¿ç¨‹å®‰å…¨çš„ç±»ï¼Œä½¿ç”¨synchronizedå…³é”®å­—æ¥ä¿è¯çº¿ç¨‹å®‰å…¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-12 11:53:37</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SafeThreadTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">foo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// do something</span></span><br><span class="line">        bar();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">bar</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// do some more</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœçº¿ç¨‹è¾“å…¥foo()ï¼Œåˆ™å®ƒå…·æœ‰<code>SafeThreadTest</code>å¯¹è±¡çš„é”å®šï¼Œå› æ­¤ï¼Œå½“å®ƒå°è¯•æ‰§è¡Œbar()æ–¹æ³•æ—¶ï¼Œç”±äºè¯¥çº¿ç¨‹å·²ç»æŒæœ‰<code>SafeThreadTest</code>å¯¹è±¡çš„é”å®šï¼Œå› æ­¤å…è®¸è¯¥çº¿ç¨‹æ‰§è¡Œbar()æ–¹æ³•ã€‚</p></li></ol><h3 id="Java-ä¸­çš„-ReentrantLock"><a href="#Java-ä¸­çš„-ReentrantLock" class="headerlink" title="Java ä¸­çš„  ReentrantLock"></a>Java ä¸­çš„  ReentrantLock</h3><p><code>ReentrantLock</code>æ˜¯ä¸€ä¸ªå¯é‡å…¥çš„äº’æ–¥é”ï¼Œæ‰€è°“å¯é‡å…¥æ˜¯çº¿ç¨‹å¯ä»¥é‡å¤è·å–å·²ç»æŒæœ‰çš„é”ã€‚é”åŸºæœ¬ä¸Šéƒ½æ˜¯è¦æ”¯æŒå¯é‡å…¥æ€§ï¼Œå¦åˆ™å¾ˆå®¹æ˜“å‡ºç°æ­»é”é—®é¢˜ã€‚</p><p><code>ReentrantLock</code>å†…éƒ¨å®ç°ä¸»è¦é€šè¿‡<code>AbstractQueuedSynchronizer</code>ç±»å®ç°çš„ï¼Œ<code>AbstractQueuedSynchronizer</code>æ˜¯æŠ½è±¡ç±»ï¼Œåœ¨<code>ReentrantLock</code>ç±»ä¸­æœ‰ä¸¤ä¸ªå®ç°ç±»ï¼š<code>NonfairSync</code>å’Œ<code>FairSync</code>ï¼Œåˆ†åˆ«å¯¹åº”éå…¬å¹³é”å’Œå…¬å¹³é”çš„å®ç°ã€‚</p><p>ReentrantLockç±»å†…éƒ¨æŒæœ‰ä¸€ä¸ªSyncç±»å‹çš„å˜é‡ï¼Œä¸»è¦å®ç°åŸºæœ¬ä¸Šéƒ½æ˜¯è°ƒç”¨Syncçš„å®ç°æœºåˆ¶ï¼Œé»˜è®¤æ„å»ºçš„æ˜¯NonfairSyncï¼Œå³éå…¬å¹³é”ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¸¦Booleanç±»å‹çš„æ„é€ å‡½æ•°æ„å»ºå…¬å¹³é”ï¼Œæºç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 1ã€é»˜è®¤åˆ›å»ºçš„éå…¬å¹³é”ï¼Œæ€§èƒ½æ›´é«˜ï¼Œç­‰ä»·äºReentrantLock(false)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ReentrantLock</span><span class="params">()</span> &#123;</span><br><span class="line">    sync = <span class="keyword">new</span> <span class="title class_">NonfairSync</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> fair true:å…¬å¹³é”    false:éå…¬å¹³é”</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ReentrantLock</span><span class="params">(<span class="type">boolean</span> fair)</span> &#123;</span><br><span class="line">    sync = fair ? <span class="keyword">new</span> <span class="title class_">FairSync</span>() : <span class="keyword">new</span> <span class="title class_">NonfairSync</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå…¶ä¸­å°†ç”¨Java Lock APIæ›¿æ¢<code>synchronized</code>å…³é”®å­—ã€‚</p><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªResourceç±»ï¼Œå…¶ä¸­åŒ…å«ä¸€äº›æˆ‘ä»¬å¸Œæœ›å®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„æ“ä½œï¼Œä»¥åŠä¸€äº›ä¸éœ€è¦çº¿ç¨‹å®‰å…¨çš„æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Resource</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doSomething</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// do some operation, DB read, write etc</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doLogging</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// logging, no need for thread safety</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª<code>Runnable</code>ç±»ï¼Œåœ¨å…¶ä¸­æˆ‘ä»¬å°†ä½¿ç”¨<code>Resouce</code>æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * synchronized ä»£ç å—æ¥ä¿è¯çº¿ç¨‹å®‰å…¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-12 12:01:24</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SynchronizedLockExample</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Resource resource;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SynchronizedLockExample</span><span class="params">(Resouce resource)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.resource = resource;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// æ•°æ®åº“è¯»å†™æ“ä½œéœ€è¦çº¿ç¨‹å®‰å…¨</span></span><br><span class="line">        <span class="keyword">synchronized</span> (resouce) &#123;</span><br><span class="line">            resource.doSomething();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ—¥å¿—æ“ä½œï¼Œæ— é¡»çº¿ç¨‹å®‰å…¨</span></span><br><span class="line">        resource.doLogging();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„ï¼Œæˆ‘ä»¬æ­£åœ¨ä½¿ç”¨åŒæ­¥ä»£ç å—æ¥è·å–å¯¹Resourceå¯¹è±¡çš„é”å®šï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç±»ä¸­åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿå¯¹è±¡ï¼Œå¹¶å°†å…¶ç”¨äºé”å®šç›®çš„ã€‚</p><p>ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨<code>Java Lock API</code>å¹¶åœ¨ä¸ä½¿ç”¨<code>synchronized</code>å…³é”®å­—çš„æƒ…å†µä¸‹é‡å†™ä¸Šè¿°ç¨‹åºã€‚æˆ‘ä»¬å°†åœ¨ç±»ä¸­ä½¿ç”¨<code>ReentrantLock</code>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åŸºäºJava Lock API &#123;<span class="doctag">@link</span> java.util.concurrent.locks.ReentrantLock&#125; æ¥å®ç°çº¿ç¨‹å®‰å…¨çš„ç¤ºä¾‹</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-12 12:05:44</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConcurrencyLockExample</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Resource resource;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Lock lock;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ConcurrencyLockExample</span><span class="params">(Resource resource)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.resource = resource;</span><br><span class="line">        <span class="comment">// é»˜è®¤åˆ›å»ºéå…¬å¹³é”</span></span><br><span class="line">        <span class="built_in">this</span>.lock = <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// ç­‰å¾…è·å–é”</span></span><br><span class="line">            <span class="keyword">if</span> (lock.tryLock(<span class="number">10</span>, TimeUnit.SECONDS)) &#123;</span><br><span class="line">                resource.doSomething();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// é‡Šæ”¾é”</span></span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">        resource.doLogging();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æ‚¨æ‰€è§ï¼Œæˆ‘æ­£åœ¨ä½¿ç”¨tryLock() æ–¹æ³•æ¥ç¡®ä¿æˆ‘çš„çº¿ç¨‹ä»…ç­‰å¾…ä¸€å®šçš„æ—¶é—´ï¼Œå¹¶ä¸”å¦‚æœå®ƒæ²¡æœ‰è·å¾—å¯¹è±¡çš„é”ï¼Œé‚£ä¹ˆå®ƒåªæ˜¯åœ¨è®°å½•å¹¶é€€å‡ºã€‚éœ€è¦æ³¨æ„çš„å¦ä¸€ä¸ªé‡è¦ç‚¹æ˜¯ï¼Œå³ä½¿doSomething() æ–¹æ³•è°ƒç”¨å¼•å‘ä»»ä½•å¼‚å¸¸ï¼Œä¹Ÿè¦ä½¿ç”¨<code>try-finally</code>å—æ¥ç¡®ä¿é‡Šæ”¾é”ã€‚</p><h3 id="Java-Lock-ä¸-synchronizedçš„åŒºåˆ«"><a href="#Java-Lock-ä¸-synchronizedçš„åŒºåˆ«" class="headerlink" title="Java Lock ä¸ synchronizedçš„åŒºåˆ«"></a>Java Lock ä¸ synchronizedçš„åŒºåˆ«</h3><p>åŸºäºä»¥ä¸Šç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾å¾—å‡ºJava Lockä¸<code>synchronized</code>ä¹‹é—´çš„å·®å¼‚ï¼š</p><ol><li>Java Lock APIæä¾›äº†æ›´å¤šçš„é”å®šå¯è§æ€§å’Œé€‰é¡¹ï¼Œä¸åŒæ­¥æœºåˆ¶ä¸åŒï¼ŒåŒæ­¥æœºåˆ¶å¯èƒ½å¯¼è‡´çº¿ç¨‹æ— é™æœŸåœ°ç­‰å¾…é”å®šï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨tryLock() æ¥ç¡®ä¿çº¿ç¨‹ä»…åœ¨ç‰¹å®šæ—¶é—´ç­‰å¾…ã€‚</li><li>åŒæ­¥ä»£ç æ›´ç®€æ´ï¼Œæ˜“äºç»´æŠ¤ï¼Œè€Œä½¿ç”¨Lockæ—¶ï¼Œå³ä½¿åœ¨lock() å’Œunlock() æ–¹æ³•è°ƒç”¨ä¹‹é—´å¼•å‘äº†æŸäº›å¼‚å¸¸ï¼Œæˆ‘ä»¬ä¹Ÿä¸å¾—ä¸å°è¯•è¿›è¡Œæœ€åé”å®šï¼Œä»¥ç¡®ä¿é‡Šæ”¾Lockã€‚</li><li>åŒæ­¥å—æˆ–æ–¹æ³•åªèƒ½è¦†ç›–ä¸€ä¸ªæ–¹æ³•ï¼Œè€Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Lock APIåœ¨ä¸€ä¸ªæ–¹æ³•ä¸­è·å–é”å¹¶åœ¨å¦ä¸€æ–¹æ³•ä¸­é‡Šæ”¾é”ã€‚</li><li><code>synchronized</code>å…³é”®å­—ä¸æä¾›å…¬å¹³æ€§ï¼Œè€Œæˆ‘ä»¬åœ¨åˆ›å»º<code>ReentrantLock</code>å¯¹è±¡æ—¶å¯ä»¥å°†å…¬å¹³æ€§è®¾ç½®ä¸ºtrueï¼Œä»¥ä¾¿ç­‰å¾…æ—¶é—´æœ€é•¿çš„çº¿ç¨‹é¦–å…ˆè·å¾—è¯¥é”ã€‚</li><li>æˆ‘ä»¬å¯ä»¥ä¸ºLockåˆ›å»ºä¸åŒçš„æ¡ä»¶ï¼Œå¹¶ä¸”ä¸åŒçš„çº¿ç¨‹å¯ä»¥ä¸ºä¸åŒçš„æ¡ä»¶ä½¿ç”¨await() ã€‚</li></ol><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>Lockæœºåˆ¶çš„æ ¸å¿ƒå°±æ˜¯é€šè¿‡casåŸå­æ“ä½œAQSä¸­çš„stateå±æ€§ï¼Œstate=0è¡¨ç¤ºé”èµ„æºå¯ç”¨ï¼Œè·å–é”å°±æ˜¯é€šè¿‡casåŸå­æ“ä½œå°†stateä»0è®¾ç½®æˆ1ï¼ŒæˆåŠŸå°±è¡¨ç¤ºè·å–é”æˆåŠŸï¼Œå¦‚æœstate&gt;0ï¼Œcasæ“ä½œå°†ä¼šå¤±è´¥ï¼Œå³è¡¨ç¤ºé”å·²è¢«å ç”¨ï¼Œå½“å‰è·å–é”å¤±è´¥ã€‚è·å–é”å¤±è´¥ï¼Œæ ¹æ®æ˜¯å¦æ˜¯å¯ä¸­æ–­ã€å¯è¶…æ—¶ç­‰ç‰¹æ€§ï¼Œå¤„ç†çš„é€»è¾‘ä¸å¤ªä¸€è‡´ï¼Œä½†å¤§è‡´ä¸ºï¼š</p><ol><li>å°†è·å–é”å¤±è´¥çš„çº¿ç¨‹å°è£…æˆNodeï¼Œå°è£…æˆNodeä¸€æ–¹é¢æ˜¯è¦æ„å»ºåŒå‘é˜Ÿåˆ—ï¼Œå¦ä¸€æ–¹é¢æ˜¯Nodeä¸­é¢å¤–æ·»åŠ çŠ¶æ€ä¿¡æ¯å¯¹èŠ‚ç‚¹è¿›è¡Œæ§åˆ¶ã€‚</li><li> åœ¨ä¸€ä¸ªforæ— çº¿å¾ªç¯ä¸­é€šè¿‡Lock.park()è®©çº¿ç¨‹ä¼‘çœ ï¼Œå½“æœ‰é”èµ„æºè¢«é‡Šæ”¾å‘ç”Ÿæ—¶ï¼Œä¼šä»é˜Ÿåˆ—å¤´åˆ°å°¾çš„é¡ºåºä¾æ¬¡å”¤é†’çº¿ç¨‹(ä¼šè·³è¿‡CANCELLEDæ ‡è®°çš„èŠ‚ç‚¹ï¼Œå› ä¸ºè¿™äº›èŠ‚ç‚¹ä»£è¡¨çš„çº¿ç¨‹å·²ç»æ— æ•ˆäº†)ï¼Œæ³¨æ„è¿™é‡Œåªä¼šå”¤é†’ä¸€ä¸ªçº¿ç¨‹ï¼Œå”¤é†’çš„çº¿ç¨‹åªè¡¨ç¤ºè¯¥çº¿ç¨‹å…·æœ‰ç«äº‰é”èµ„æºçš„èµ„æ ¼ï¼Œè¿˜éœ€è¦å’Œæ–°ç”³è¯·ä½†è¿˜æ²¡æœ‰æ”¾å…¥åˆ°Queueä¸­çš„çº¿ç¨‹è¿›è¡Œç«äº‰è¯¥é”èµ„æºï¼Œè¿™å°±æ˜¯éå…¬å¹³é”çš„ç‰¹æ€§ï¼Œè¿™æ ·è®¾è®¡ä¸»è¦æ˜¯ä»æ€§èƒ½æ–¹é¢è€ƒè™‘ï¼Œå¦‚æœç«äº‰æˆåŠŸåˆ™é€€å‡ºforå¾ªç¯è¿”å›ï¼Œå¦åˆ™ç»§ç»­è¿›å…¥ä¼‘çœ çŠ¶æ€ã€‚</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://github.com/user-attachments/assets/79f83b3c-bc5c-4bd5-80c9-e63ea97380a7&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="JavaæŠ€æœ¯" scheme="https://chivalry727.github.io/categories/Java%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="Lock" scheme="https://chivalry727.github.io/tags/Lock/"/>
    
      <category term="ReentrantLock" scheme="https://chivalry727.github.io/tags/ReentrantLock/"/>
    
  </entry>
  
  <entry>
    <title>Java SPI</title>
    <link href="https://chivalry727.github.io/JavaSPI%E6%9C%BA%E5%88%B6/"/>
    <id>https://chivalry727.github.io/JavaSPI%E6%9C%BA%E5%88%B6/</id>
    <published>2020-09-11T14:12:08.000Z</published>
    <updated>2025-02-27T11:25:24.944Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://github.com/user-attachments/assets/316d91ef-6b1a-415d-b712-2707a3ca7b9f"></p><span id="more"></span><h2 id="Java-SPI"><a href="#Java-SPI" class="headerlink" title="Java SPI"></a>Java SPI</h2><h3 id="ä»€ä¹ˆæ˜¯Java-SPI"><a href="#ä»€ä¹ˆæ˜¯Java-SPI" class="headerlink" title="ä»€ä¹ˆæ˜¯Java SPI"></a>ä»€ä¹ˆæ˜¯Java SPI</h3><p>Java SPIï¼ˆæœåŠ¡æä¾›è€…æ¥å£ï¼‰æ˜¯åŠ¨æ€åŠ è½½æœåŠ¡çš„æœºåˆ¶ã€‚é€šè¿‡éµå¾ªç‰¹å®šçš„è§„åˆ™é›†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­å®ç°Java SPIï¼Œå¹¶ä½¿ç”¨ServiceLoaderç±»åŠ è½½æœåŠ¡ã€‚</p><h3 id="Java-SPI-ç»„ä»¶"><a href="#Java-SPI-ç»„ä»¶" class="headerlink" title="Java SPI ç»„ä»¶"></a>Java SPI ç»„ä»¶</h3><p>SPIå®ç°ä¸­åŒ…å«å››ä¸ªç»„ä»¶ï¼š</p><ol><li>æœåŠ¡æä¾›è€…æ¥å£ï¼šå®šä¹‰æœåŠ¡æä¾›è€…å®ç°ç±»çš„åå®šçš„æ¥å£æˆ–æŠ½è±¡ç±»</li><li>æœåŠ¡æä¾›è€…ï¼šå®é™…æä¾›è€…çš„å®ç°ç±»</li><li>SPIé…ç½®æ–‡ä»¶ï¼šä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ï¼Œç”¨äºæä¾›æŸ¥æ‰¾æœåŠ¡å®ç°çš„é€»è¾‘ã€‚æ–‡ä»¶åå¿…é¡»å­˜åœ¨äº<strong>META-INF/services</strong>ç›®å½•ä¸­ã€‚æ–‡ä»¶ååº”ä¸æœåŠ¡æä¾›å•†æ¥å£æ ‡å‡†åç§°å®Œå…¨ç›¸åŒã€‚æ–‡ä»¶ä¸­çš„æ¯ä¸€è¡Œéƒ½æœ‰ä¸€ä¸ªå®ç°æœåŠ¡ç±»è¯¦ç»†ä¿¡æ¯ï¼Œå†æ¬¡æ˜¯æœåŠ¡æä¾›è€…ç±»çš„å®Œå…¨é™å®šåç§°ã€‚</li><li>ServiceLoaderï¼šJava SPIä¸»ç±»ï¼Œç”¨äºä¸ºæœåŠ¡æä¾›è€…æ¥å£åŠ è½½æœåŠ¡ã€‚ServiceLoaderä¸­æœ‰å¤šç§å®ç”¨æ–¹æ³•å¯ç”¨äºè·å–ç‰¹å®šçš„å®ç°ï¼Œå¯¹å…¶è¿›è¡Œè¿­ä»£æˆ–é‡æ–°åŠ è½½æœåŠ¡ã€‚</li></ol><h3 id="Java-æœåŠ¡æä¾›è€…æ¥å£ç¤ºä¾‹"><a href="#Java-æœåŠ¡æä¾›è€…æ¥å£ç¤ºä¾‹" class="headerlink" title="Java æœåŠ¡æä¾›è€…æ¥å£ç¤ºä¾‹"></a>Java æœåŠ¡æä¾›è€…æ¥å£ç¤ºä¾‹</h3><p><code>java.util.spi</code>è½¯ä»¶åŒ…æä¾›äº†è®¸å¤šæœåŠ¡æä¾›è€…æ¥å£ï¼Œå¯ä»¥å°†å…¶å®ç°ä»¥æä¾›æœåŠ¡ã€‚</p><ol><li>ResourceBundleControlProviderï¼šæä¾›<code>ResourceBundle.Control</code>å®ç°çš„æœåŠ¡æä¾›è€…çš„æ¥å£ã€‚</li><li>LocaleServiceProviderï¼ŒCalendarDataProviderï¼ŒCalendarNameProviderï¼ŒCurrencyNameProviderï¼ŒTimeZoneNameProviderå’ŒLocaleNameProviderï¼šç”¨äºå®ç°ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„æœåŠ¡æä¾›è€…ã€‚</li></ol><p><img src="https://github.com/user-attachments/assets/ac5d1f5e-2cef-409c-a3ed-912f089f7c12"></p><h3 id="Java-SPI-ç¤ºä¾‹"><a href="#Java-SPI-ç¤ºä¾‹" class="headerlink" title="Java SPI ç¤ºä¾‹"></a>Java SPI ç¤ºä¾‹</h3><p>è®©æˆ‘ä»¬åˆ›å»ºSPIçš„å®ç°ï¼Œå¹¶ä½¿ç”¨ServiceLoaderç±»åŠ è½½ä¸€äº›æœåŠ¡ã€‚</p><h4 id="æœåŠ¡æä¾›è€…æ¥å£"><a href="#æœåŠ¡æä¾›è€…æ¥å£" class="headerlink" title="æœåŠ¡æä¾›è€…æ¥å£"></a>æœåŠ¡æä¾›è€…æ¥å£</h4><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª<code>MessageServiceProvider</code>æ¥å£ï¼Œç”¨äºå®šä¹‰æœåŠ¡æä¾›è€…å®ç°å‘é€æ¶ˆæ¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¶ˆæ¯æœåŠ¡æä¾›è€…æ¥å£</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-11 23:46:59</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">MessageServiceProvider</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘é€æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> message</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">sendMessage</span><span class="params">(String message)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æœåŠ¡æä¾›è€…å®ç°ç±»"><a href="#æœåŠ¡æä¾›è€…å®ç°ç±»" class="headerlink" title="æœåŠ¡æä¾›è€…å®ç°ç±»"></a>æœåŠ¡æä¾›è€…å®ç°ç±»</h4><p>æˆ‘ä»¬å¸Œæœ›æ”¯æŒç”µå­é‚®ä»¶å’Œæ¨é€é€šçŸ¥æ¶ˆæ¯ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†åˆ›å»º<code>MessageServiceProvider</code>æ¥å£çš„ä¸¤ä¸ªæœåŠ¡æä¾›è€…å®ç°<code>EmailServiceProvider</code>å’Œ<code>PushNotificationServiceProvider</code>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é‚®ä»¶æœåŠ¡æä¾›è€…</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-11 23:47:38</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmailServiceProvider</span> <span class="keyword">implements</span> <span class="title class_">MessageServiceProvider</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMessage</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Sending Email with Message = &quot;</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¨é€é€šçŸ¥æœåŠ¡æä¾›è€…å®ç°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-11 23:48:12</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PushNotificationServiceProvider</span> <span class="keyword">implements</span> <span class="title class_">MessageServiceProvider</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMessage</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Sending Push Notification with Message = &quot;</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æœåŠ¡æä¾›è€…é…ç½®æ–‡ä»¶"><a href="#æœåŠ¡æä¾›è€…é…ç½®æ–‡ä»¶" class="headerlink" title="æœåŠ¡æä¾›è€…é…ç½®æ–‡ä»¶"></a>æœåŠ¡æä¾›è€…é…ç½®æ–‡ä»¶</h4><p>å¿…é¡»åœ¨<strong>META-INF/services</strong>ç›®å½•ä¸­åˆ›å»ºé…ç½®æ–‡ä»¶ã€‚å…¶åç§°åº”ä¸ºâ€œ <strong>com.chivalry.spi.message.MessageServiceProvider</strong> â€ã€‚æˆ‘ä»¬å°†åœ¨æ­¤æ–‡ä»¶ä¸­æŒ‡å®šä¸¤ä¸ªå®ç°ç±»ã€‚</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">com.chivalry.spi.message.EmailServiceProvider</span></span><br><span class="line"><span class="attr">com.chivalry.spi.message.PushNotificationServiceProvider</span></span><br></pre></td></tr></table></figure><h4 id="åŠ è½½æœåŠ¡çš„ServiceLoaderç¤ºä¾‹"><a href="#åŠ è½½æœåŠ¡çš„ServiceLoaderç¤ºä¾‹" class="headerlink" title="åŠ è½½æœåŠ¡çš„ServiceLoaderç¤ºä¾‹"></a>åŠ è½½æœåŠ¡çš„ServiceLoaderç¤ºä¾‹</h4><p>æœ€åï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨ServiceLoaderç±»åŠ è½½æœåŠ¡ã€‚è¿™æ˜¯ä¸€ä¸ªæ˜¾ç¤ºå…¶ç”¨æ³•çš„ç®€å•æµ‹è¯•ç¨‹åºã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &#123;<span class="doctag">@link</span> ServiceLoader&#125; åŠ è½½æœåŠ¡ç¤ºä¾‹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-11 23:53:02</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServiceLoaderTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        ServiceLoader&lt;MessageServiceProvider&gt; serviceProviders = ServiceLoader.load(MessageServiceProvider.class);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// éå†è°ƒç”¨æ‰€æœ‰çš„å®ç°ç±»</span></span><br><span class="line">        <span class="keyword">for</span> (MessageServiceProvider serviceProvider : serviceProviders) &#123;</span><br><span class="line">            serviceProvider.sendMessage(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä½¿ç”¨ Java 8 Optional è·å–ç¬¬ä¸€ä¸ª serviceï¼Œæ³¨æ„ï¼šfindFirst()æ–¹æ³•æ˜¯JDK9ç‰ˆæœ¬æä¾›çš„æ–¹æ³•</span></span><br><span class="line">        Optional&lt;MessageServiceProvider&gt; firstService = serviceProviders.findFirst();</span><br><span class="line">        firstService.ifPresent(messageServiceProvider -&gt; messageServiceProvider.sendMessage(<span class="string">&quot;Hello Friend&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä½¿ç”¨ Java 8 forEach() æ–¹æ³•</span></span><br><span class="line">        serviceProviders.forEach((service) -&gt; service.sendMessage(<span class="string">&quot;Have a Nice Day!&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å·²åŠ è½½æœåŠ¡æ€»æ•°</span></span><br><span class="line">        System.out.println(serviceProviders.stream().count());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬è¿è¡Œä¸Šé¢çš„ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬å¾—åˆ°ä»¥ä¸‹è¾“å‡ºï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Sending Email with Message = Hello</span><br><span class="line">Sending Push Notification with Message = Hello</span><br><span class="line">Sending Email with Message = Hello Friend</span><br><span class="line">Sending Email with Message = Have a Nice Day!</span><br><span class="line">Sending Push Notification with Message = Have a Nice Day!</span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure><p>ä¸‹å›¾æ˜¾ç¤ºäº†æˆ‘ä»¬çš„æœ€ç»ˆé¡¹ç›®ç»“æ„å’ŒSPIç»„ä»¶ï¼š</p><p><img src="https://github.com/user-attachments/assets/3ad86ad6-de26-4026-9deb-afc1fd04da9f"></p><h3 id="ServiceLoader-ç»“æ„"><a href="#ServiceLoader-ç»“æ„" class="headerlink" title="ServiceLoader  ç»“æ„"></a>ServiceLoader  ç»“æ„</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JDK11 ç‰ˆæœ¬çš„ ServiceLoaderï¼Œä¸JDK8çš„ç‰ˆæœ¬ç•¥æœ‰å·®å¼‚</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">ServiceLoader</span>&lt;S&gt; <span class="keyword">implements</span> <span class="title class_">Iterable</span>&lt;S&gt; &#123;</span><br><span class="line">    <span class="comment">// The class or interface representing the service being loaded</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Class&lt;S&gt; service;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// The class of the service type</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String serviceName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// The module layer used to locate providers; null when locating</span></span><br><span class="line">    <span class="comment">// providers using a class loader</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ModuleLayer layer;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// The class loader used to locate, load, and instantiate providers;</span></span><br><span class="line">    <span class="comment">// null when locating provider using a module layer</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ClassLoader loader;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// The access control context taken when the ServiceLoader is created</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> AccessControlContext acc;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// The lazy-lookup iterator for iterator operations</span></span><br><span class="line">    <span class="keyword">private</span> Iterator&lt;Provider&lt;S&gt;&gt; lookupIterator1;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> List&lt;S&gt; instantiatedProviders = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// The lazy-lookup iterator for stream operations</span></span><br><span class="line">    <span class="keyword">private</span> Iterator&lt;Provider&lt;S&gt;&gt; lookupIterator2;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> List&lt;Provider&lt;S&gt;&gt; loadedProviders = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> loadedAllProviders; <span class="comment">// true when all providers loaded</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Incremented when reload is called</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> reloadCount;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> JavaLangAccess LANG_ACCESS;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        LANG_ACCESS = SharedSecrets.getJavaLangAccess();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¯ä»¥çœ‹å‡º ServiceLoader æ˜¯å»¶è¿Ÿåˆå§‹åŒ–æœåŠ¡æ¥å£å®ç°ç±»çš„</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">LazyClassPathLookupIterator</span>&lt;T&gt; <span class="keyword">implements</span> <span class="title class_">Iterator</span>&lt;Provider&lt;T&gt;&gt; &#123;</span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">PREFIX</span> <span class="operator">=</span> <span class="string">&quot;META-INF/services/&quot;</span>;</span><br><span class="line"></span><br><span class="line">        Set&lt;String&gt; providerNames = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();  <span class="comment">// to avoid duplicates</span></span><br><span class="line">        Enumeration&lt;URL&gt; configs;</span><br><span class="line">        Iterator&lt;String&gt; pending;</span><br><span class="line"></span><br><span class="line">        Provider&lt;T&gt; nextProvider;</span><br><span class="line">        ServiceConfigurationError nextError;</span><br><span class="line"></span><br><span class="line">        LazyClassPathLookupIterator() &#123; &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ServiceLoaderç±»çš„é‡è¦æ–¹æ³•ã€‚</p><ul><li>load()ï¼šåŠ è½½ç‰¹å®šSPIæœåŠ¡çš„é™æ€æ–¹æ³•ã€‚</li><li>findFirst()ï¼šè¿”å›å¯ç”¨äºè¯¥æœåŠ¡æä¾›è€…çš„ç¬¬ä¸€ä¸ªæœåŠ¡ã€‚</li><li>forEach()ï¼šå¯¹äºåœ¨æ­¤æœåŠ¡åŠ è½½å™¨å®ä¾‹ä¸­çš„æ¯ä¸ªæœåŠ¡æä¾›è€…è¿è¡Œä¸€äº›ä»£ç å¾ˆæœ‰ç”¨ã€‚</li><li>stream()ï¼šè¿”å›æ­¤æœåŠ¡åŠ è½½å™¨ä¸­æœåŠ¡æä¾›è€…çš„æµã€‚</li><li>iterator()ï¼šè¿”å›æœåŠ¡æä¾›è€…çš„è¿­ä»£å™¨ã€‚</li><li>reload()ï¼šé‡æ–°åŠ è½½æœåŠ¡æä¾›è€…å®ç°ç±»ã€‚å½“æˆ‘ä»¬å³æ—¶æ›´æ”¹æœåŠ¡æä¾›è€…å®ç°ç±»çš„é…ç½®å¹¶å¸Œæœ›é‡æ–°åŠ è½½æœåŠ¡åˆ—è¡¨æ—¶ï¼Œè¿™å¾ˆæœ‰ç”¨ã€‚</li></ul><h3 id="SPI-åœ¨å¼€æºæ¡†æ¶ä¸­çš„åº”ç”¨"><a href="#SPI-åœ¨å¼€æºæ¡†æ¶ä¸­çš„åº”ç”¨" class="headerlink" title="SPI åœ¨å¼€æºæ¡†æ¶ä¸­çš„åº”ç”¨"></a>SPI åœ¨å¼€æºæ¡†æ¶ä¸­çš„åº”ç”¨</h3><ul><li>æ•°æ®åº“é©±åŠ¨åŠ è½½æ¥å£å®ç°ç±»çš„åŠ è½½ï¼šJDBCåŠ è½½ä¸åŒç±»å‹æ•°æ®åº“çš„é©±åŠ¨</li><li>æ—¥å¿—é—¨é¢æ¥å£å®ç°ç±»åŠ è½½ï¼šslf4jåŠ è½½ä¸åŒæä¾›å•†çš„æ—¥å¿—å®ç°ç±»</li><li>Springä¸­å¤§é‡ä½¿ç”¨äº†SPIï¼Œæ¯”å¦‚ï¼šå¯¹servlet3.0è§„èŒƒå¯¹ServletContainerInitializerçš„å®ç°ã€è‡ªåŠ¨ç±»å‹è½¬æ¢Type Conversion SPI(Converter SPIã€Formatter SPI)ç­‰</li><li>Dubboä¸­ä¹Ÿå¤§é‡ä½¿ç”¨SPIçš„æ–¹å¼å®ç°æ¡†æ¶çš„æ‰©å±•, ä¸è¿‡å®ƒå¯¹Javaæä¾›çš„åŸç”ŸSPIåšäº†å°è£…ï¼Œå…è®¸ç”¨æˆ·æ‰©å±•å®ç°Filteræ¥å£</li></ul><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>Java SPIæä¾›äº†ä¸€ç§åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­åŠ¨æ€é…ç½®å’ŒåŠ è½½æœåŠ¡çš„ç®€ä¾¿æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œè¿™åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºæœåŠ¡é…ç½®æ–‡ä»¶ï¼Œå¹¶ä¸”æ–‡ä»¶ä¸­çš„ä»»ä½•æ›´æ”¹éƒ½å¯èƒ½ç ´ååº”ç”¨ç¨‹åºã€‚</p><p>ä½¿ç”¨Java SPIæœºåˆ¶çš„ä¼˜åŠ¿æ˜¯å®ç°è§£è€¦ï¼Œä½¿å¾—ç¬¬ä¸‰æ–¹æœåŠ¡æ¨¡å—çš„è£…é…æ§åˆ¶çš„é€»è¾‘ä¸è°ƒç”¨è€…çš„ä¸šåŠ¡ä»£ç åˆ†ç¦»ï¼Œè€Œä¸æ˜¯è€¦åˆåœ¨ä¸€èµ·ã€‚åº”ç”¨ç¨‹åºå¯ä»¥æ ¹æ®å®é™…ä¸šåŠ¡æƒ…å†µå¯ç”¨æ¡†æ¶æ‰©å±•æˆ–æ›¿æ¢æ¡†æ¶ç»„ä»¶ã€‚</p><p>ç›¸æ¯”ä½¿ç”¨æä¾›æ¥å£jaråŒ…ï¼Œä¾›ç¬¬ä¸‰æ–¹æœåŠ¡æ¨¡å—å®ç°æ¥å£çš„æ–¹å¼ï¼ŒSPIçš„æ–¹å¼ä½¿å¾—æºæ¡†æ¶ï¼Œä¸å¿…å…³å¿ƒæ¥å£çš„å®ç°ç±»çš„è·¯å¾„ï¼Œå¯ä»¥ä¸ç”¨é€šè¿‡ä¸‹é¢çš„æ–¹å¼è·å–æ¥å£å®ç°ç±»ã€‚</p><ul><li>ä»£ç ç¡¬ç¼–ç import å¯¼å…¥å®ç°ç±»</li><li>æŒ‡å®šç±»å…¨è·¯å¾„åå°„è·å–ï¼šä¾‹å¦‚åœ¨JDBC4.0ä¹‹å‰ï¼ŒJDBCä¸­è·å–æ•°æ®åº“é©±åŠ¨ç±»éœ€è¦é€šè¿‡**Class.forName(â€œcom.mysql.jdbc.Driverâ€)**ï¼Œç±»ä¼¼è¯­å¥å…ˆåŠ¨æ€åŠ è½½æ•°æ®åº“ç›¸å…³çš„é©±åŠ¨ï¼Œç„¶åå†è¿›è¡Œè·å–è¿æ¥ç­‰çš„æ“ä½œ</li><li>ç¬¬ä¸‰æ–¹æœåŠ¡æ¨¡å—æŠŠæ¥å£å®ç°ç±»å®ä¾‹æ³¨å†Œåˆ°æŒ‡å®šåœ°æ–¹ï¼Œæºæ¡†æ¶ä»è¯¥å¤„è®¿é—®å®ä¾‹</li></ul><p>é€šè¿‡SPIçš„æ–¹å¼ï¼Œç¬¬ä¸‰æ–¹æœåŠ¡æ¨¡å—å®ç°æ¥å£åï¼Œåœ¨ç¬¬ä¸‰æ–¹çš„é¡¹ç›®ä»£ç çš„<code>META-INF/services</code>ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶æŒ‡å®šå®ç°ç±»çš„å…¨è·¯å¾„åï¼Œæ¡†æ¶å³å¯æ‰¾åˆ°å®ç°ç±»ã€‚</p><h3 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h3><ul><li><a href="https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/util/ServiceLoader.html">ServiceLoader APIæ–‡æ¡£</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://github.com/user-attachments/assets/316d91ef-6b1a-415d-b712-2707a3ca7b9f&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="JavaæŠ€æœ¯" scheme="https://chivalry727.github.io/categories/Java%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="Java SPI" scheme="https://chivalry727.github.io/tags/Java-SPI/"/>
    
  </entry>
  
  <entry>
    <title>é¢è¯•æ€»ç»“ï¼ˆå…¶ä»–ï¼‰</title>
    <link href="https://chivalry727.github.io/%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93%EF%BC%88%E5%85%B6%E4%BB%96%EF%BC%89/"/>
    <id>https://chivalry727.github.io/%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93%EF%BC%88%E5%85%B6%E4%BB%96%EF%BC%89/</id>
    <published>2020-09-10T01:16:48.000Z</published>
    <updated>2025-02-27T11:13:36.032Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://github.com/user-attachments/assets/901d8359-470a-466c-9f9a-ab717480529d"></p><span id="more"></span><h2 id="é¢è¯•æ€»ç»“ï¼ˆå…¶ä»–ï¼‰"><a href="#é¢è¯•æ€»ç»“ï¼ˆå…¶ä»–ï¼‰" class="headerlink" title="é¢è¯•æ€»ç»“ï¼ˆå…¶ä»–ï¼‰"></a>é¢è¯•æ€»ç»“ï¼ˆå…¶ä»–ï¼‰</h2><h3 id="LinkedHashMap-å¦‚ä½•ä¿è¯æœ‰åº"><a href="#LinkedHashMap-å¦‚ä½•ä¿è¯æœ‰åº" class="headerlink" title="LinkedHashMap å¦‚ä½•ä¿è¯æœ‰åº"></a>LinkedHashMap å¦‚ä½•ä¿è¯æœ‰åº</h3><p>LinkedHashMapç»§æ‰¿è‡ªHashMapï¼ŒLinkedHashMapå®šä¹‰äº†Entryç»§æ‰¿è‡ªHashMapçš„Nodeé“¾è¡¨çš„åŸºç¡€ä¸Šå®šä¹‰äº†åŒå‘é“¾è¡¨æ¥ä¿è¯é¡ºåºï¼Œä¸»è¦æ˜¯é€šè¿‡åŒå‘é“¾è¡¨æ¥ä¿è¯æœ‰åºçš„ï¼Œé»˜è®¤æ˜¯æŒ‰ç…§æ’å…¥é¡ºåºï¼Œä¹Ÿå¯ä»¥ç”¨é‡è½½æ–¹æ³•çš„è®¿é—®é¡ºåºæ¥æ’åº</p><h3 id="IO-NIO-AIO-æ¨¡å‹"><a href="#IO-NIO-AIO-æ¨¡å‹" class="headerlink" title="IO/NIO/AIO æ¨¡å‹"></a>IO/NIO/AIO æ¨¡å‹</h3><h4 id="IO-BIOï¼ˆBlocking-I-Oï¼‰"><a href="#IO-BIOï¼ˆBlocking-I-Oï¼‰" class="headerlink" title="IO/BIOï¼ˆBlocking I/Oï¼‰"></a>IO/BIOï¼ˆBlocking I/Oï¼‰</h4><p>åŒæ­¥é˜»å¡I/Oæ¨¡å¼ï¼Œæ•°æ®çš„è¯»å–å†™å…¥å¿…é¡»é˜»å¡åœ¨ä¸€ä¸ªçº¿ç¨‹å†…ç­‰å¾…å…¶å®Œæˆã€‚</p><!-- more --><p>BIOé€šä¿¡ï¼ˆä¸€è¯·æ±‚ä¸€åº”ç­”ï¼‰æ¨¡å‹å›¾å¦‚ä¸‹ï¼š</p><p><img src="https://tva1.sinaimg.cn/large/008aQ1h9ly1gilctcgjxkj310k0ouae4.jpg" alt="WX20200910-103832@2x"></p><h4 id="NIOï¼ˆNon-Blocking-I-Oï¼‰"><a href="#NIOï¼ˆNon-Blocking-I-Oï¼‰" class="headerlink" title="NIOï¼ˆNon-Blocking I/Oï¼‰"></a>NIOï¼ˆNon-Blocking I/Oï¼‰</h4><p>NIOæ˜¯ä¸€ç§åŒæ­¥éé˜»å¡çš„I/Oæ¨¡å‹ï¼Œåœ¨Java 1.4 ä¸­å¼•å…¥äº† NIO æ¡†æ¶ï¼Œå¯¹åº” java.nio åŒ…ï¼Œæä¾›äº† Channel , Selectorï¼ŒBufferç­‰æŠ½è±¡ã€‚</p><p>NIOçº¿ç¨‹æ¨¡å‹å¦‚ä¸‹ï¼š</p><p><img src="https://tva4.sinaimg.cn/large/008aQ1h9ly1gill3zadb6j312s0eodr2.jpg"></p><h4 id="AIOï¼ˆAsynchronous-non-blocking-I-Oï¼‰"><a href="#AIOï¼ˆAsynchronous-non-blocking-I-Oï¼‰" class="headerlink" title="AIOï¼ˆAsynchronous non-blocking I/Oï¼‰"></a>AIOï¼ˆAsynchronous non-blocking I/Oï¼‰</h4><p>AIO ä¹Ÿå°±æ˜¯ NIO 2ã€‚åœ¨ Java 7 ä¸­å¼•å…¥äº† NIO çš„æ”¹è¿›ç‰ˆ NIO 2,å®ƒæ˜¯å¼‚æ­¥éé˜»å¡çš„IOæ¨¡å‹ã€‚å¼‚æ­¥ IO æ˜¯åŸºäºäº‹ä»¶å’Œå›è°ƒæœºåˆ¶å®ç°çš„ï¼Œä¹Ÿå°±æ˜¯åº”ç”¨æ“ä½œä¹‹åä¼šç›´æ¥è¿”å›ï¼Œä¸ä¼šé˜»å¡åœ¨é‚£é‡Œï¼Œå½“åå°å¤„ç†å®Œæˆï¼Œæ“ä½œç³»ç»Ÿä¼šé€šçŸ¥ç›¸åº”çš„çº¿ç¨‹è¿›è¡Œåç»­çš„æ“ä½œã€‚</p><p>AIO æ˜¯å¼‚æ­¥IOçš„ç¼©å†™ï¼Œè™½ç„¶ NIO åœ¨ç½‘ç»œæ“ä½œä¸­ï¼Œæä¾›äº†éé˜»å¡çš„æ–¹æ³•ï¼Œä½†æ˜¯ NIO çš„ IO è¡Œä¸ºè¿˜æ˜¯åŒæ­¥çš„ã€‚å¯¹äº NIO æ¥è¯´ï¼Œæˆ‘ä»¬çš„ä¸šåŠ¡çº¿ç¨‹æ˜¯åœ¨ IO æ“ä½œå‡†å¤‡å¥½æ—¶ï¼Œå¾—åˆ°é€šçŸ¥ï¼Œæ¥ç€å°±ç”±è¿™ä¸ªçº¿ç¨‹è‡ªè¡Œè¿›è¡Œ IO æ“ä½œï¼ŒIOæ“ä½œæœ¬èº«æ˜¯åŒæ­¥çš„ã€‚</p><p>AIOæ¨¡å‹ï¼š</p><p><img src="https://tvax4.sinaimg.cn/large/008aQ1h9ly1gillw8dr81j30is0ky3z3.jpg" alt="20150929202423057"></p><h3 id="åŒæ­¥é˜»å¡-åŒæ­¥éé˜»å¡-å¼‚æ­¥éé˜»å¡æ˜¯åœ¨IOæ¨¡å‹ä¸­çš„å“ªä¸€ç¯èŠ‚"><a href="#åŒæ­¥é˜»å¡-åŒæ­¥éé˜»å¡-å¼‚æ­¥éé˜»å¡æ˜¯åœ¨IOæ¨¡å‹ä¸­çš„å“ªä¸€ç¯èŠ‚" class="headerlink" title="åŒæ­¥é˜»å¡/åŒæ­¥éé˜»å¡/å¼‚æ­¥éé˜»å¡æ˜¯åœ¨IOæ¨¡å‹ä¸­çš„å“ªä¸€ç¯èŠ‚"></a>åŒæ­¥é˜»å¡/åŒæ­¥éé˜»å¡/å¼‚æ­¥éé˜»å¡æ˜¯åœ¨IOæ¨¡å‹ä¸­çš„å“ªä¸€ç¯èŠ‚</h3><ul><li><p>IOçš„åŒæ­¥é˜»å¡æ˜¯åœ¨ accept()   read()ä¼šè¿›è¡Œé˜»å¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// IO Server ç«¯</span></span><br><span class="line"><span class="type">ServerSocket</span> <span class="variable">serverSocket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>();</span><br><span class="line">serverSocket.bind(<span class="keyword">new</span> <span class="title class_">InetSocketAddress</span>(<span class="number">8000</span>))ï¼›<span class="comment">// ç»‘å®šç«¯å£</span></span><br><span class="line"><span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> serverSocket.accept(); <span class="comment">// ä¼šé˜»å¡</span></span><br><span class="line"></span><br><span class="line">socket.getInputStream().read(); <span class="comment">// ä¼šé˜»å¡</span></span><br></pre></td></tr></table></figure></li><li><p>NIOçš„åŒæ­¥éé˜»å¡åœ¨ accept() ä¸ä¼šé˜»å¡çº¿ç¨‹ï¼Œåœ¨select()é˜¶æ®µè¿˜æ˜¯ä¼šé˜»å¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// NIO Server ç«¯</span></span><br><span class="line"><span class="type">ServerSocketChannel</span> <span class="variable">serverSocketChannel</span> <span class="operator">=</span> ServerSocketChannel.open();</span><br><span class="line"><span class="type">Selector</span> <span class="variable">selector</span> <span class="operator">=</span> Selector.open();</span><br><span class="line">serverSocketChannel.bind(<span class="keyword">new</span> <span class="title class_">InetSocketAddress</span>(<span class="number">8000</span>)); <span class="comment">// ç»‘å®šç«¯å£</span></span><br><span class="line">serverSocketChannel.configureBlocking(<span class="literal">false</span>); <span class="comment">// è®¾ç½®éé˜»å¡</span></span><br><span class="line">serverSocketChannel.register(selector, SelectionKey.OP_ACCEPT); <span class="comment">// æ³¨å†Œäº‹ä»¶</span></span><br><span class="line"><span class="comment">// é˜»å¡ç­‰å¾…å®¢æˆ·ç«¯Channel</span></span><br><span class="line">selector.select();</span><br><span class="line"><span class="type">SocketChannel</span> <span class="variable">channel</span> <span class="operator">=</span> serverSocketChannel.accept(); <span class="comment">// éé˜»å¡</span></span><br></pre></td></tr></table></figure></li><li><p>AIOçš„å¼‚æ­¥éé˜»å¡åœ¨accept() ä¼šç›´æ¥è¿”å›ï¼Œä¸ä¼šç­‰å¾…</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AIO Server ç«¯</span></span><br><span class="line"><span class="type">AsynchronousServerSocketChannel</span> <span class="variable">socketChannel</span> <span class="operator">=</span> AsynchronousServerSocketChannel.open();</span><br><span class="line">socketChannel.bind(<span class="keyword">new</span> <span class="title class_">InetSocketAddress</span>(<span class="number">8080</span>)); <span class="comment">// ç»‘å®šç«¯å£</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// éé˜»å¡ï¼Œç­‰å¾…oså›è°ƒå¤„ç†</span></span><br><span class="line">socketChannel.accept(<span class="literal">null</span>, <span class="keyword">new</span> <span class="title class_">CompletionHandler</span>&lt;AsynchronousSocketChannel, Object&gt;() &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">completed</span><span class="params">(AsynchronousSocketChannel result, Object attachment)</span> &#123;</span><br><span class="line">    <span class="comment">// ç»§ç»­ç›‘å¬ä¸‹ä¸€ä¸ªè¯·æ±‚</span></span><br><span class="line">    socketChannel.accept(attachment, <span class="built_in">this</span>);</span><br><span class="line">    <span class="comment">// å¤„ç†æ•°æ®</span></span><br><span class="line">    handler(result);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">failed</span><span class="params">(Throwable exc, Object attachment)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;æœåŠ¡å‡ºç°å¼‚å¸¸ï¼š&quot;</span> + exc.getMessage());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul><h3 id="GC-Roots-æ˜¯ä»€ä¹ˆ"><a href="#GC-Roots-æ˜¯ä»€ä¹ˆ" class="headerlink" title="GC Roots æ˜¯ä»€ä¹ˆ"></a>GC Roots æ˜¯ä»€ä¹ˆ</h3><ul><li>è™šæ‹Ÿæœºæ ˆä¸­å¼•ç”¨çš„å¯¹è±¡ï¼Œæ¯”å¦‚å„çº¿ç¨‹è°ƒç”¨æ–¹æ³•å †æ ˆä¸­ä½¿ç”¨çš„å‚æ•°ã€å±€éƒ¨å˜é‡ã€ä¸´æ—¶å˜é‡ç­‰</li><li>æ–¹æ³•åŒºä¸­ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²å¸¸é‡æ± é‡Œçš„å¼•ç”¨å’ŒJavaç±»çš„å¼•ç”¨ç±»å‹é™æ€å˜é‡</li><li>æœ¬åœ°æ–¹æ³•æ ˆä¸­JNIå¼•ç”¨çš„å¯¹è±¡</li><li>Javaè™šæ‹Ÿæœºå†…éƒ¨çš„å¼•ç”¨ï¼Œæ¯”å¦‚ï¼šåŸºæœ¬æ•°æ®ç±»å‹å¯¹åº”çš„Classå¯¹è±¡ï¼Œä»¥åŠä¸€äº›å¼‚å¸¸å¯¹è±¡ï¼ˆNPEã€OOMï¼‰ç­‰ï¼Œè¿˜æœ‰ç³»ç»Ÿç±»åŠ è½½å™¨</li><li>æ‰€æœ‰è¢«åŒæ­¥é”ï¼ˆsynchronizedå…³é”®å­—ï¼‰æŒæœ‰çš„å¯¹è±¡</li><li>åæ˜ Javaè™šæ‹Ÿæœºå†…éƒ¨æƒ…å†µçš„JMXBeanã€JVMTIä¸­æ³¨å†Œçš„å›è°ƒã€æœ¬åœ°ä»£ç ç¼“å­˜ç­‰</li></ul><h3 id="æ ˆç©ºé—´å¦‚ä½•è®¾ç½®å¤§å°ï¼Œæ ˆç©ºé—´è¿‡å¤§ä¼šæœ‰ä»€ä¹ˆå½±å“"><a href="#æ ˆç©ºé—´å¦‚ä½•è®¾ç½®å¤§å°ï¼Œæ ˆç©ºé—´è¿‡å¤§ä¼šæœ‰ä»€ä¹ˆå½±å“" class="headerlink" title="æ ˆç©ºé—´å¦‚ä½•è®¾ç½®å¤§å°ï¼Œæ ˆç©ºé—´è¿‡å¤§ä¼šæœ‰ä»€ä¹ˆå½±å“"></a>æ ˆç©ºé—´å¦‚ä½•è®¾ç½®å¤§å°ï¼Œæ ˆç©ºé—´è¿‡å¤§ä¼šæœ‰ä»€ä¹ˆå½±å“</h3><p>-Xss128kï¼šè®¾ç½®æ¯ä¸ªçº¿ç¨‹çš„æ ˆå¤§å°ã€‚JDK5.0ä»¥åæ¯ä¸ªçº¿ç¨‹æ ˆå¤§å°ä¸º1Mï¼Œä»¥å‰æ¯ä¸ªçº¿ç¨‹æ ˆå¤§å°ä¸º256Kã€‚æ ¹æ®åº”ç”¨çš„çº¿ç¨‹æ‰€éœ€å†…å­˜å¤§å°è¿›è¡Œè°ƒæ•´ã€‚åœ¨ç›¸åŒç‰©ç†å†…å­˜ä¸‹ï¼Œå‡å°è¿™ä¸ªå€¼èƒ½ç”Ÿæˆæ›´å¤šçš„çº¿ç¨‹ã€‚ä½†æ˜¯æ“ä½œç³»ç»Ÿå¯¹ä¸€ä¸ªè¿›ç¨‹å†…çš„çº¿ç¨‹æ•°è¿˜æ˜¯æœ‰é™åˆ¶çš„ï¼Œä¸èƒ½æ— é™ç”Ÿæˆï¼Œç»éªŒå€¼åœ¨3000~5000å·¦å³ã€‚éšç€çº¿ç¨‹æ ˆçš„å¤§å°è¶Šå¤§ï¼Œèƒ½å¤Ÿæ”¯æŒè¶Šå¤šçš„æ–¹æ³•è°ƒç”¨ï¼Œä¹Ÿå³æ˜¯èƒ½å¤Ÿå­˜å‚¨æ›´å¤šçš„æ ˆå¸§ã€‚</p><p>çº¿ç¨‹æ ˆçš„å¤§å°æ˜¯ä¸ªåŒåˆƒå‰‘ï¼Œå¦‚æœè®¾ç½®è¿‡å°ï¼Œå¯èƒ½ä¼šå‡ºç°æ ˆæº¢å‡ºï¼Œç‰¹åˆ«æ˜¯åœ¨è¯¥çº¿ç¨‹å†…æœ‰é€’å½’ã€å¤§çš„å¾ªç¯æ—¶å‡ºç°æº¢å‡ºçš„å¯èƒ½æ€§æ›´å¤§ï¼›å¦‚æœè¯¥å€¼è®¾ç½®è¿‡å¤§ï¼Œå°±æœ‰å½±å“åˆ°åˆ›å»ºæ ˆå¸§çš„æ•°é‡ï¼Œå¦‚æœæ˜¯å¤šçº¿ç¨‹çš„åº”ç”¨ï¼Œå°±ä¼šå‡ºç°å†…å­˜æº¢å‡ºçš„é”™è¯¯.</p><h3 id="é›¶æ‹·è´ï¼ˆZero-Copyï¼‰åŸç†"><a href="#é›¶æ‹·è´ï¼ˆZero-Copyï¼‰åŸç†" class="headerlink" title="é›¶æ‹·è´ï¼ˆZero-Copyï¼‰åŸç†"></a>é›¶æ‹·è´ï¼ˆZero-Copyï¼‰åŸç†</h3><p>é›¶æ‹·è´ï¼ˆZero-copyï¼‰æŠ€æœ¯æŒ‡åœ¨è®¡ç®—æœºæ‰§è¡Œæ“ä½œæ—¶ï¼ŒCPU ä¸éœ€è¦å…ˆå°†æ•°æ®ä»ä¸€ä¸ªå†…å­˜åŒºåŸŸå¤åˆ¶åˆ°å¦ä¸€ä¸ªå†…å­˜åŒºåŸŸï¼Œä»è€Œå¯ä»¥å‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢ä»¥åŠ CPU çš„æ‹·è´æ—¶é—´ã€‚å®ƒçš„ä½œç”¨æ˜¯åœ¨æ•°æ®æŠ¥ä»ç½‘ç»œè®¾å¤‡åˆ°ç”¨æˆ·ç¨‹åºç©ºé—´ä¼ é€’çš„è¿‡ç¨‹ä¸­ï¼Œå‡å°‘æ•°æ®æ‹·è´æ¬¡æ•°ï¼Œå‡å°‘ç³»ç»Ÿè°ƒç”¨ï¼Œå®ç° CPU çš„é›¶å‚ä¸ï¼Œå½»åº•æ¶ˆé™¤ CPU åœ¨è¿™æ–¹é¢çš„è´Ÿè½½ã€‚å®ç°é›¶æ‹·è´ç”¨åˆ°çš„æœ€ä¸»è¦æŠ€æœ¯æ˜¯ DMA æ•°æ®ä¼ è¾“æŠ€æœ¯å’Œå†…å­˜åŒºåŸŸæ˜ å°„æŠ€æœ¯ã€‚</p><ul><li>é›¶æ‹·è´æœºåˆ¶å¯ä»¥å‡å°‘æ•°æ®åœ¨å†…æ ¸ç¼“å†²åŒºå’Œç”¨æˆ·è¿›ç¨‹ç¼“å†²åŒºä¹‹é—´åå¤çš„ I/O æ‹·è´æ“ä½œã€‚</li><li>é›¶æ‹·è´æœºåˆ¶å¯ä»¥å‡å°‘ç”¨æˆ·è¿›ç¨‹åœ°å€ç©ºé—´å’Œå†…æ ¸åœ°å€ç©ºé—´ä¹‹é—´å› ä¸ºä¸Šä¸‹æ–‡åˆ‡æ¢è€Œå¸¦æ¥çš„ CPU å¼€é”€ã€‚</li></ul><h3 id="CMS-å’Œ-G1-çš„å¼‚åŒ"><a href="#CMS-å’Œ-G1-çš„å¼‚åŒ" class="headerlink" title="CMS å’Œ G1 çš„å¼‚åŒ"></a>CMS å’Œ G1 çš„å¼‚åŒ</h3><p>æŒ‰åˆ†ä»£æ”¶é›†æ¥è¯´ï¼ŒCMSæ˜¯è€å¹´ä»£æ”¶é›†å™¨ï¼ŒG1åˆ™æ˜¯æ··åˆæ”¶é›†ï¼Œå®ƒå¼€åˆ›äº†æ··åˆæ”¶é›†çš„æ¨¡å¼ï¼Œè¡¡é‡æ ‡å‡†ä¸åœ¨æ˜¯å±äºå“ªä¸ªåˆ†ä»£ï¼Œè€Œæ˜¯å“ªå—å†…å­˜å€¼å¾—æ”¶é›†ï¼Œå“ªå—å†…å­˜ä¸­å­˜æ”¾çš„åƒåœ¾æ•°é‡æœ€å¤šï¼Œå›æ”¶æ”¶ç›Šæœ€å¤§æ¥è¿›è¡Œæ”¶é›†ã€‚</p><p>æŒ‰æ”¶é›†ç®—æ³•æ¥è¯´ï¼ŒCMSæ”¶é›†å™¨æ˜¯åŸºäºæ ‡è®°-æ¸…é™¤çš„åƒåœ¾æ”¶é›†å™¨ï¼Œç”±äºCMSæ˜¯ä¸€æ¬¾åŸºäºâ€œæ ‡è®°-æ¸…é™¤â€ç®—æ³•å®ç°çš„æ”¶é›†å™¨ï¼Œå°±ä¼šé€ æˆå¤§é‡ç©ºé—´ç¢ç‰‡äº§ç”Ÿï¼Œå¦‚æœç©ºé—´ç¢ç‰‡è¿‡å¤šæ—¶ï¼Œå½“éœ€è¦è¶³å¤Ÿå¤§å¤§è¿ç»­ç©ºé—´æ¥åˆ†é…å¤§å¯¹è±¡å¤§æ—¶å€™ï¼Œä¼šä¸å¾—ä¸æå‰è§¦å‘Full GCçš„æƒ…å†µï¼›è€ŒG1ä»æ•´ä½“æ¥çœ‹æ˜¯åŸºäºâ€œæ ‡è®°-æ•´ç†â€ç®—æ³•å®ç°çš„æ”¶é›†å™¨ï¼Œä»å±€éƒ¨ä¸Šçœ‹ï¼ˆä¸¤ä¸ªRegionä¹‹é—´ï¼‰åˆæ˜¯åŸºäºâ€œæ ‡è®°-å¤åˆ¶â€ç®—æ³•å®ç°ï¼Œæ— è®ºå¦‚ä½•ï¼Œè¿™ä¸¤ç§ç®—æ³•åœ¨è¿è¡ŒæœŸé—´éƒ½ä¸ä¼šäº§ç”Ÿå†…å­˜ç©ºé—´ç¢ç‰‡ï¼Œåƒåœ¾æ”¶é›†å®Œæˆä¹‹åèƒ½æä¾›è§„æ•´çš„å¯ç”¨å†…å­˜ã€‚</p><h3 id="G1-ä»€ä¹ˆæ—¶å€™å¼•å‘-Full-GC"><a href="#G1-ä»€ä¹ˆæ—¶å€™å¼•å‘-Full-GC" class="headerlink" title="G1 ä»€ä¹ˆæ—¶å€™å¼•å‘ Full GC"></a>G1 ä»€ä¹ˆæ—¶å€™å¼•å‘ Full GC</h3><p><code>G1 Full GC</code>çš„åŸå› ä¸€èˆ¬æœ‰ï¼š</p><ul><li><code>Mixed GC</code>èµ¶ä¸ä¸Šå†…å­˜åˆ†é…çš„é€Ÿåº¦ï¼Œåªèƒ½é€šè¿‡<code>Full GC</code>æ¥é‡Šæ”¾å†…å­˜</li><li><code>MetaSpace</code>ä¸è¶³ï¼Œå¯¹äºå¤§é‡ä½¿ç”¨åå°„ï¼ŒåŠ¨æ€ä»£ç†çš„ç±»ï¼Œç”±äºåŠ¨æ€ä»£ç†çš„æ¯ä¸ªç±»éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ç±»ï¼ŒåŒæ—¶<code>class</code>ä¿¡æ¯ä¼šå­˜æ”¾åœ¨å…ƒç©ºé—´ï¼Œå› æ­¤å¦‚æœå…ƒç©ºé—´ä¸è¶³ï¼Œ<code>G1</code>ä¼šé <code>Full GC</code>æ¥æ‰©å®¹å…ƒç©ºé—´ï¼Œè¿™ç§æƒ…å†µè§£å†³æ–¹æ¡ˆå°±æ˜¯æ‰©å¤§åˆå§‹å…ƒç©ºé—´å¤§å°ã€‚</li><li><code>Humongous</code>åˆ†é…å¤±è´¥ï¼Œå‰é¢è¯´è¿‡<code>G1</code>åˆ†é…å¤§å¯¹è±¡æ—¶ï¼Œå›æ”¶æ˜¯é <code>Concurrent Marking</code>æˆ–<code>Full GC</code>ï¼Œå› æ­¤å¦‚æœå¤§å¯¹è±¡åˆ†é…å¤±è´¥ï¼Œåˆ™å¯èƒ½ä¼šå¼•å‘<code>Full GC</code></li></ul><h3 id="è¯´ä¸€ä¸ªæœ€ç†Ÿæ‚‰çš„åƒåœ¾å›æ”¶ç®—æ³•"><a href="#è¯´ä¸€ä¸ªæœ€ç†Ÿæ‚‰çš„åƒåœ¾å›æ”¶ç®—æ³•" class="headerlink" title="è¯´ä¸€ä¸ªæœ€ç†Ÿæ‚‰çš„åƒåœ¾å›æ”¶ç®—æ³•"></a>è¯´ä¸€ä¸ªæœ€ç†Ÿæ‚‰çš„åƒåœ¾å›æ”¶ç®—æ³•</h3><p>å¯ä»¥é€šè¿‡è‡ªå·±ç†Ÿæ‚‰çš„åƒåœ¾å›æ”¶ç®—æ³•å¼•ç”³ä¸€ä¸‹è¯¥ç®—æ³•ç›¸åº”çš„åƒåœ¾æ”¶é›†å™¨å®ç°ï¼Œæ¯”å¦‚ï¼Œ<strong>æ ‡è®°â€“å¤åˆ¶</strong>ç®—æ³•ï¼Œè¿™æ˜¯ HotSpot è™šæ‹Ÿæœºæ–°ç”Ÿä»£åƒåœ¾æ”¶é›†å™¨å¸¸ç”¨çš„å›æ”¶ç®—æ³•ï¼Œå¯¹åº”çš„å®ç°æœ‰ Serialã€Parallel Scavengeï¼Œåœ¨æ¯”å¦‚<strong>æ ‡è®°â€“æ¸…é™¤</strong>ç®—æ³•ï¼Œå¯¹åº”çš„åƒåœ¾æ”¶é›†å™¨å®ç°æœ‰ CMS ç­‰ç­‰ã€‚</p><h3 id="åé‡ä¼˜å…ˆå’Œå“åº”æ—¶é—´ä¼˜å…ˆçš„å›æ”¶å™¨æœ‰å“ªäº›"><a href="#åé‡ä¼˜å…ˆå’Œå“åº”æ—¶é—´ä¼˜å…ˆçš„å›æ”¶å™¨æœ‰å“ªäº›" class="headerlink" title="åé‡ä¼˜å…ˆå’Œå“åº”æ—¶é—´ä¼˜å…ˆçš„å›æ”¶å™¨æœ‰å“ªäº›"></a>åé‡ä¼˜å…ˆå’Œå“åº”æ—¶é—´ä¼˜å…ˆçš„å›æ”¶å™¨æœ‰å“ªäº›</h3><ul><li>Parallel Scavenge</li><li>Parallel Old</li><li>G1</li></ul><h3 id="æ€ä¹ˆåˆ¤æ–­å†…å­˜æ³„æ¼"><a href="#æ€ä¹ˆåˆ¤æ–­å†…å­˜æ³„æ¼" class="headerlink" title="æ€ä¹ˆåˆ¤æ–­å†…å­˜æ³„æ¼"></a>æ€ä¹ˆåˆ¤æ–­å†…å­˜æ³„æ¼</h3><h3 id="è®²ä¸€ä¸‹-CMS-çš„æµç¨‹"><a href="#è®²ä¸€ä¸‹-CMS-çš„æµç¨‹" class="headerlink" title="è®²ä¸€ä¸‹ CMS çš„æµç¨‹"></a>è®²ä¸€ä¸‹ CMS çš„æµç¨‹</h3><h3 id="ä¸ºä»€ä¹ˆå‹ç¼©æŒ‡é’ˆè¶…è¿‡32Gå¤±æ•ˆ"><a href="#ä¸ºä»€ä¹ˆå‹ç¼©æŒ‡é’ˆè¶…è¿‡32Gå¤±æ•ˆ" class="headerlink" title="ä¸ºä»€ä¹ˆå‹ç¼©æŒ‡é’ˆè¶…è¿‡32Gå¤±æ•ˆ"></a>ä¸ºä»€ä¹ˆå‹ç¼©æŒ‡é’ˆè¶…è¿‡32Gå¤±æ•ˆ</h3><h3 id="ä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼ï¼ŸGC-è°ƒä¼˜æœ‰ç»éªŒå—ï¼Ÿä¸€èˆ¬å‡ºç°-GC-é—®é¢˜ä½ æ€ä¹ˆè§£å†³ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼ï¼ŸGC-è°ƒä¼˜æœ‰ç»éªŒå—ï¼Ÿä¸€èˆ¬å‡ºç°-GC-é—®é¢˜ä½ æ€ä¹ˆè§£å†³ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼ï¼ŸGC è°ƒä¼˜æœ‰ç»éªŒå—ï¼Ÿä¸€èˆ¬å‡ºç° GC é—®é¢˜ä½ æ€ä¹ˆè§£å†³ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼ï¼ŸGC è°ƒä¼˜æœ‰ç»éªŒå—ï¼Ÿä¸€èˆ¬å‡ºç° GC é—®é¢˜ä½ æ€ä¹ˆè§£å†³ï¼Ÿ</h3><h3 id="ThreadLocal-æœ‰æ²¡æœ‰å†…å­˜æ³„æ¼é—®é¢˜"><a href="#ThreadLocal-æœ‰æ²¡æœ‰å†…å­˜æ³„æ¼é—®é¢˜" class="headerlink" title="ThreadLocal æœ‰æ²¡æœ‰å†…å­˜æ³„æ¼é—®é¢˜"></a>ThreadLocal æœ‰æ²¡æœ‰å†…å­˜æ³„æ¼é—®é¢˜</h3><h3 id="G1-ä¸¤ä¸ª-Region-ä¸æ˜¯è¿ç»­çš„ï¼Œè€Œä¸”ä¹‹é—´è¿˜æœ‰å¯è¾¾çš„å¼•ç”¨ï¼Œæˆ‘ç°åœ¨è¦å›æ”¶å¦ä¸€ä¸ªæ€ä¹ˆå¤„ç†ï¼Ÿ"><a href="#G1-ä¸¤ä¸ª-Region-ä¸æ˜¯è¿ç»­çš„ï¼Œè€Œä¸”ä¹‹é—´è¿˜æœ‰å¯è¾¾çš„å¼•ç”¨ï¼Œæˆ‘ç°åœ¨è¦å›æ”¶å¦ä¸€ä¸ªæ€ä¹ˆå¤„ç†ï¼Ÿ" class="headerlink" title="G1 ä¸¤ä¸ª Region ä¸æ˜¯è¿ç»­çš„ï¼Œè€Œä¸”ä¹‹é—´è¿˜æœ‰å¯è¾¾çš„å¼•ç”¨ï¼Œæˆ‘ç°åœ¨è¦å›æ”¶å¦ä¸€ä¸ªæ€ä¹ˆå¤„ç†ï¼Ÿ"></a>G1 ä¸¤ä¸ª Region ä¸æ˜¯è¿ç»­çš„ï¼Œè€Œä¸”ä¹‹é—´è¿˜æœ‰å¯è¾¾çš„å¼•ç”¨ï¼Œæˆ‘ç°åœ¨è¦å›æ”¶å¦ä¸€ä¸ªæ€ä¹ˆå¤„ç†ï¼Ÿ</h3><h3 id="è®²ä¸€ä¸‹-JVM-å †å†…å­˜ç®¡ç†ï¼ˆå¯¹è±¡åˆ†é…è¿‡ç¨‹ï¼‰"><a href="#è®²ä¸€ä¸‹-JVM-å †å†…å­˜ç®¡ç†ï¼ˆå¯¹è±¡åˆ†é…è¿‡ç¨‹ï¼‰" class="headerlink" title="è®²ä¸€ä¸‹ JVM å †å†…å­˜ç®¡ç†ï¼ˆå¯¹è±¡åˆ†é…è¿‡ç¨‹ï¼‰"></a>è®²ä¸€ä¸‹ JVM å †å†…å­˜ç®¡ç†ï¼ˆå¯¹è±¡åˆ†é…è¿‡ç¨‹ï¼‰</h3><h3 id="å¬è¯´è¿‡-CMS-çš„å¹¶å‘é¢„å¤„ç†å’Œå¹¶å‘å¯ä¸­æ–­é¢„å¤„ç†å—"><a href="#å¬è¯´è¿‡-CMS-çš„å¹¶å‘é¢„å¤„ç†å’Œå¹¶å‘å¯ä¸­æ–­é¢„å¤„ç†å—" class="headerlink" title="å¬è¯´è¿‡ CMS çš„å¹¶å‘é¢„å¤„ç†å’Œå¹¶å‘å¯ä¸­æ–­é¢„å¤„ç†å—"></a>å¬è¯´è¿‡ CMS çš„å¹¶å‘é¢„å¤„ç†å’Œå¹¶å‘å¯ä¸­æ–­é¢„å¤„ç†å—</h3><h3 id="åˆ°åº•å¤šå¤§çš„å¯¹è±¡ä¼šè¢«ç›´æ¥æ‰”åˆ°è€å¹´ä»£"><a href="#åˆ°åº•å¤šå¤§çš„å¯¹è±¡ä¼šè¢«ç›´æ¥æ‰”åˆ°è€å¹´ä»£" class="headerlink" title="åˆ°åº•å¤šå¤§çš„å¯¹è±¡ä¼šè¢«ç›´æ¥æ‰”åˆ°è€å¹´ä»£"></a>åˆ°åº•å¤šå¤§çš„å¯¹è±¡ä¼šè¢«ç›´æ¥æ‰”åˆ°è€å¹´ä»£</h3><p>JVMè™šæ‹Ÿæœºæä¾›äº†ä¸€ä¸ª<code>-XX:PretenureSizeThreshold</code>å‚æ•°ï¼Œä»¤å¤§äºè¿™ä¸ªè®¾ç½®å€¼çš„å¯¹è±¡ç›´æ¥åœ¨è€å¹´ä»£åˆ†é…ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯é¿å…åœ¨EdenåŒºåŠä¸¤ä¸ªSurvivoråŒºä¹‹é—´å‘ç”Ÿå¤§é‡çš„å†…å­˜å¤åˆ¶ã€‚</p><p>æ‰€è°“çš„å¤§å¯¹è±¡æ˜¯æŒ‡ï¼Œéœ€è¦å¤§é‡è¿ç»­å†…å­˜ç©ºé—´çš„Javaå¯¹è±¡ï¼Œæœ€å…¸å‹çš„å¤§å¯¹è±¡å°±æ˜¯é‚£ç§å¾ˆé•¿çš„å­—ç¬¦ä¸²ä»¥åŠæ•°ç»„ã€‚</p><p>æ³¨æ„ï¼š<code>PretenureSizeThreshold</code>å‚æ•°åªå¯¹Serialå’ŒParNewä¸¤æ¬¾æ”¶é›†å™¨æœ‰æ•ˆï¼ŒParallel Scavengeæ”¶é›†å™¨ä¸è®¤è¯†è¿™ä¸ªå‚æ•°ï¼ŒParallel Scavengeæ”¶é›†å™¨ä¸€èˆ¬å¹¶ä¸éœ€è¦è®¾ç½®ã€‚å¦‚æœé‡åˆ°å¿…é¡»ä½¿ç”¨æ­¤å‚æ•°çš„åœºåˆï¼Œå¯ä»¥è€ƒè™‘ParNewåŠ CMSçš„æ”¶é›†å™¨ç»„åˆã€‚</p><h3 id="mysql-åŸå­æ€§å’ŒæŒä¹…æ€§æ€ä¹ˆä¿è¯"><a href="#mysql-åŸå­æ€§å’ŒæŒä¹…æ€§æ€ä¹ˆä¿è¯" class="headerlink" title="mysql åŸå­æ€§å’ŒæŒä¹…æ€§æ€ä¹ˆä¿è¯"></a>mysql åŸå­æ€§å’ŒæŒä¹…æ€§æ€ä¹ˆä¿è¯</h3><p>Mysqlæ˜¯åˆ©ç”¨Innodbçš„undo logæ—¥å¿—æ¥ä¿è¯åŸå­æ€§çš„ï¼›undo logåä¸ºå›æ»šæ—¥å¿—ï¼Œæ˜¯å®ç°åŸå­æ€§çš„å…³é”®ï¼Œå½“äº‹åŠ¡å›æ»šæ—¶èƒ½å¤Ÿæ’¤é”€æ‰€æœ‰å·²ç»æˆåŠŸæ‰§è¡Œçš„sqlè¯­å¥ï¼Œä»–éœ€è¦è®°å½•ä½ è¦å›æ»šçš„ç›¸åº”æ—¥å¿—ä¿¡æ¯redo log</p><p>Mysqlæ˜¯åˆ©ç”¨Innodbçš„redo logæ¥ä¿è¯æŒä¹…æ€§ï¼›å½“åšæ•°æ®ä¿®æ”¹çš„æ—¶å€™ï¼Œä¸ä»…åœ¨å†…å­˜ä¸­æ“ä½œï¼Œè¿˜ä¼šåœ¨redo logä¸­è®°å½•è¿™æ¬¡æ“ä½œã€‚å½“äº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œä¼šå°†redo logæ—¥å¿—è¿›è¡Œåˆ·ç›˜(redo logä¸€éƒ¨åˆ†åœ¨å†…å­˜ä¸­ï¼Œä¸€éƒ¨åˆ†åœ¨ç£ç›˜ä¸Š)ã€‚å½“æ•°æ®åº“å®•æœºé‡å¯çš„æ—¶å€™ï¼Œä¼šå°†redo logä¸­çš„å†…å®¹æ¢å¤åˆ°æ•°æ®åº“ä¸­ï¼Œå†æ ¹æ®undo logå’Œbinlogå†…å®¹å†³å®šå›æ»šæ•°æ®è¿˜æ˜¯æäº¤æ•°æ®</p><h3 id="Mysql-Innodb-å’Œ-mylsam-å­˜å‚¨å¼•æ“åŒºåˆ«"><a href="#Mysql-Innodb-å’Œ-mylsam-å­˜å‚¨å¼•æ“åŒºåˆ«" class="headerlink" title="Mysql Innodb å’Œ mylsam å­˜å‚¨å¼•æ“åŒºåˆ«"></a>Mysql Innodb å’Œ mylsam å­˜å‚¨å¼•æ“åŒºåˆ«</h3><table><thead><tr><th align="center">åŒºåˆ«</th><th align="center">InnoDB</th><th align="center">MylSam</th></tr></thead><tbody><tr><td align="center">äº‹åŠ¡</td><td align="center">æ”¯æŒ</td><td align="center">ä¸æ”¯æŒ</td></tr><tr><td align="center">å¤–é”®</td><td align="center">æ”¯æŒ</td><td align="center">ä¸æ”¯æŒ</td></tr><tr><td align="center">é”çš„ç²’åº¦</td><td align="center">è¡Œé”</td><td align="center">è¡¨é”</td></tr><tr><td align="center">ç´¢å¼•</td><td align="center">èšé›†ç´¢å¼•</td><td align="center">éèšé›†ç´¢å¼•</td></tr><tr><td align="center">è¡¨çš„å…·ä½“è¡Œæ•°</td><td align="center">ä¸æä¾›</td><td align="center">æä¾›</td></tr><tr><td align="center">CURDæ“ä½œ</td><td align="center">é€‚åˆinsertæˆ–updateåœºæ™¯</td><td align="center">é€‚åˆå¤§é‡selectåœºæ™¯</td></tr><tr><td align="center"></td><td align="center"></td><td align="center"></td></tr></tbody></table><h3 id="ç´¢å¼•åˆ†ç±»"><a href="#ç´¢å¼•åˆ†ç±»" class="headerlink" title="ç´¢å¼•åˆ†ç±»"></a>ç´¢å¼•åˆ†ç±»</h3><h3 id="Innodb-å­˜å‚¨å¼•æ“çš„åº•å±‚æ•°æ®ç»“æ„"><a href="#Innodb-å­˜å‚¨å¼•æ“çš„åº•å±‚æ•°æ®ç»“æ„" class="headerlink" title="Innodb å­˜å‚¨å¼•æ“çš„åº•å±‚æ•°æ®ç»“æ„"></a>Innodb å­˜å‚¨å¼•æ“çš„åº•å±‚æ•°æ®ç»“æ„</h3><p> ä½¿ç”¨çš„æ˜¯B+æ ‘</p><h3 id="ä¸ºä»€ä¹ˆåº•å±‚ä½¿ç”¨-B-æ ‘ä¸ç”¨-B-æ ‘"><a href="#ä¸ºä»€ä¹ˆåº•å±‚ä½¿ç”¨-B-æ ‘ä¸ç”¨-B-æ ‘" class="headerlink" title="ä¸ºä»€ä¹ˆåº•å±‚ä½¿ç”¨ B+æ ‘ä¸ç”¨ B æ ‘"></a>ä¸ºä»€ä¹ˆåº•å±‚ä½¿ç”¨ B+æ ‘ä¸ç”¨ B æ ‘</h3><p>å‚è€ƒå¦ä¸€ä¸ªé¢è¯•æ€»ç»“</p><h3 id="å¿«é€Ÿæ’åºçš„ç®—æ³•åŸç†ä»¥åŠæ—¶é—´å¤æ‚åº¦"><a href="#å¿«é€Ÿæ’åºçš„ç®—æ³•åŸç†ä»¥åŠæ—¶é—´å¤æ‚åº¦" class="headerlink" title="å¿«é€Ÿæ’åºçš„ç®—æ³•åŸç†ä»¥åŠæ—¶é—´å¤æ‚åº¦"></a>å¿«é€Ÿæ’åºçš„ç®—æ³•åŸç†ä»¥åŠæ—¶é—´å¤æ‚åº¦</h3><p>ä½¿ç”¨åˆ†æ²»æ³•ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å¤§çš„æ’åœ¨å³è¾¹ï¼Œå°çš„æ’åœ¨å·¦è¾¹ï¼Œç„¶åä¸¤è¾¹ç»§ç»­æŒ‰ç…§è¿™ä¸ªåˆ†æ²»æ³•ç»§ç»­é€’å½’ï¼Œç›´åˆ°å®Œæˆæ’åº</p><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n*logn)</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://github.com/user-attachments/assets/901d8359-470a-466c-9f9a-ab717480529d&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="é¢è¯•æ€»ç»“" scheme="https://chivalry727.github.io/categories/%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="é¢è¯•æ€»ç»“" scheme="https://chivalry727.github.io/tags/%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹çŠ¶æ€æ¨¡å¼</title>
    <link href="https://chivalry727.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F/"/>
    <id>https://chivalry727.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F/</id>
    <published>2020-09-06T12:13:34.000Z</published>
    <updated>2025-02-27T11:09:04.299Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://github.com/user-attachments/assets/9cb4fe19-db49-4c0a-8751-e26c0367d212"></p><span id="more"></span><h2 id="è®¾è®¡æ¨¡å¼ä¹‹çŠ¶æ€æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼ä¹‹çŠ¶æ€æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¹‹çŠ¶æ€æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼ä¹‹çŠ¶æ€æ¨¡å¼</h2><h3 id="ç³–æœæœºçš„éœ€æ±‚"><a href="#ç³–æœæœºçš„éœ€æ±‚" class="headerlink" title="ç³–æœæœºçš„éœ€æ±‚"></a>ç³–æœæœºçš„éœ€æ±‚</h3><p>æˆ‘ä»¬å…¬å¸æ¥åˆ°ç³–æœå…¬å¸çš„éœ€æ±‚ï¼Œè¦è®¾è®¡ä¸€ä¸ªç³–æœæœºçš„ç¨‹åºï¼Œç³–æœæœºæœ‰å››ä¸ªçŠ¶æ€ï¼ŒæœªæŠ•å¸ï¼Œå·²æŠ•å¸ï¼Œå”®å‡ºï¼Œå”®ç½„è¿™å››ä¸ªçŠ¶æ€ï¼Œå½“å®¢æˆ·æŠ•å¸åï¼Œå°±å¼€å§‹è½¬åŠ¨æ›²æŸ„ï¼Œç„¶åå‘æ”¾ç³–æœã€‚å½“ç³–æœå”®ç½„æ—¶ï¼Œå°±ä¸åœ¨å…è®¸æŠ•å…¥å¸äº†ã€‚æ‰€ä»¥å¸Œæœ›æˆ‘ä»¬è®¾è®¡èƒ½å¤Ÿå°½é‡æœ‰å¼¹æ€§è€Œä¸”å¥½ç»´æŠ¤çš„ç¨‹åºï¼Œåœ¨å°†æ¥æœ‰å¯èƒ½å¢åŠ æ›´å¤šçš„è¡Œä¸ºã€‚</p><h3 id="ç³–æœæœºåˆç‰ˆä»£ç å®ç°"><a href="#ç³–æœæœºåˆç‰ˆä»£ç å®ç°" class="headerlink" title="ç³–æœæœºåˆç‰ˆä»£ç å®ç°"></a>ç³–æœæœºåˆç‰ˆä»£ç å®ç°</h3><p>ç°åœ¨æˆ‘ä»¬æ¥å®ç°ç³–æœæœºã€‚æˆ‘ä»¬çŸ¥é“è¦åˆ©ç”¨å®ä¾‹å˜é‡æŒæœ‰å½“å‰çš„çŠ¶æ€ï¼Œç„¶åéœ€è¦å¤„ç†æ‰€æœ‰å¯èƒ½å‘ç”Ÿçš„åŠ¨ä½œã€è¡Œä¸ºå’ŒçŠ¶æ€çš„è½¬æ¢ã€‚æˆ‘ä»¬éœ€è¦å®ç°çš„å·¥ä½œåŒ…æ‹¬ï¼šæŠ•å¸ã€é€€å¸ã€è½¬åŠ¨æ›²æŸ„å’Œå‘æ”¾ç³–æœï¼›ä¹Ÿéœ€è¦æ£€æŸ¥ç³–æœæ˜¯å¦å”®ç½„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç³–æœæœº</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-06 21:18:14</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GumballMachine</span> &#123;</span><br><span class="line">    <span class="comment">// å”®ç½„</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">SOLD_OUT</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// æ²¡æœ‰æŠ•å¸</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">NO_QUARTER</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// å·²æŠ•å¸</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">HAS_QUARTER</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">    <span class="comment">// å”®å‡º</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">SOLD</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line">    <span class="comment">// å½“å‰çŠ¶æ€</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">state</span> <span class="operator">=</span> SOLD_OUT;</span><br><span class="line">    <span class="comment">// ç³–æœæ•°é‡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">GumballMachine</span><span class="params">(<span class="type">int</span> count)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.count = count;</span><br><span class="line">        <span class="keyword">if</span> (count &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            state = NO_QUARTER;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŠ•å¸æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertQuarter</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (state == HAS_QUARTER) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;You can&#x27;t insert another quarter.&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (state == NO_QUARTER) &#123;</span><br><span class="line">            state = HAS_QUARTER;</span><br><span class="line">            System.out.println(<span class="string">&quot;You inserted a quarter.&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (state == SOLD_OUT) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;You cant&#x27;t insert a quarter, the machine is sold out.&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (state == SOLD) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Please wait, we&#x27;re already giving you a gumball.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€€å¸æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">ejectQuarter</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (state == HAS_QUARTER) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Quarter returned.&quot;</span>);</span><br><span class="line">            state = NO_QUARTER;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (state == NO_QUARTER) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;You haven&#x27;t inserted a quarter.&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (state == SOLD) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Sorry, you already turned the crank.&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (state == SOLD_OUT) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;You can&#x27;t eject, you haven&#x27;t inserted a quarter yet.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è½¬åŠ¨æ›²æŸ„æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">turnCrank</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (state == SOLD) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Turning twice doesn&#x27;t get you another gumball.&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (state == NO_QUARTER) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;You turned but there&#x27;s no quarter.&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (state == SOLD_OUT) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;You turned, but there are no gumballs.&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (state == HAS_QUARTER) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;You turned...&quot;</span>);</span><br><span class="line">            state = SOLD;</span><br><span class="line">            dispense();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘æ”¾ç³–æœæ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dispense</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (state == SOLD) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;A gumball comes rolling out the solt.&quot;</span>);</span><br><span class="line">            count--;</span><br><span class="line">            <span class="keyword">if</span> (count == <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Oops, out of gumballs.&quot;</span>);</span><br><span class="line">                state = SOLD_OUT;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                state = NO_QUARTER;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (state == NO_QUARTER) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;You need to pay first.&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (state == SOLD_OUT) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;No gumball dispensed.&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (state == HAS_QUARTER) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;No gumball dispensed.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;GumballMachine&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;state=&quot;</span> + state +</span><br><span class="line">                <span class="string">&quot;, count=&quot;</span> + count +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•ç³–æœæœº"><a href="#æµ‹è¯•ç³–æœæœº" class="headerlink" title="æµ‹è¯•ç³–æœæœº"></a>æµ‹è¯•ç³–æœæœº</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GumballMachineTestDrive</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºè£…æœ‰5ä¸ªç³–æœçš„ç³–æœæœº</span></span><br><span class="line">        <span class="type">GumballMachine</span> <span class="variable">gumballMachine</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GumballMachine</span>(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‰“å°æœºå™¨çŠ¶æ€</span></span><br><span class="line">        System.out.println(gumballMachine);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æŠ•å¸</span></span><br><span class="line">        gumballMachine.insertQuarter();</span><br><span class="line">        <span class="comment">// è½¬åŠ¨æ›²æŸ„</span></span><br><span class="line">        gumballMachine.turnCrank();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å†æ¬¡æ‰“å°æœºå™¨çŠ¶æ€</span></span><br><span class="line">        System.out.println(gumballMachine);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æŠ•å¸</span></span><br><span class="line">        gumballMachine.insertQuarter();</span><br><span class="line">        <span class="comment">// é€€å¸</span></span><br><span class="line">        gumballMachine.ejectQuarter();</span><br><span class="line">        <span class="comment">// è½¬åŠ¨æ›²æŸ„</span></span><br><span class="line">        gumballMachine.turnCrank();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å†æ¬¡æ‰“å°æœºå™¨çŠ¶æ€</span></span><br><span class="line">        System.out.println(gumballMachine);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ–°çš„éœ€æ±‚"><a href="#æ–°çš„éœ€æ±‚" class="headerlink" title="æ–°çš„éœ€æ±‚"></a>æ–°çš„éœ€æ±‚</h3><p>ç³–æœå…¬å¸åœ¨ç¨‹åºè¿è¡Œä¸€æ®µæ—¶é—´åï¼Œæƒ³è¦æ–°å¢ä¸€ä¸ªåŠŸèƒ½ï¼Œæœ‰ä¸€ä¸ªå¹¸è¿ç©å®¶ï¼Œå°±æ˜¯å”®å‡ºç³–æœçš„æ—¶å€™ï¼Œæœ‰10%çš„å‡ ç‡ä¼šæ‰å‡º2è¯¾ç³–æœï¼Œè€Œä¸æ˜¯ä¸€é¢—ã€‚</p><p>é¢å¯¹åŸæœ‰çš„ç¨‹åºï¼Œæˆ‘ä»¬å°±å¿…é¡»è¦æ–°å¢ä¸€ä¸ªçŠ¶æ€ï¼Œç§°ä¸ºâ€œèµ¢å®¶â€ã€‚è¿˜ä¸å¤ªéº»çƒ¦ï¼Œä¸è¿‡åœ¨æ¯ä¸ªæ–¹æ³•çš„æ¡ä»¶åˆ¤æ–­é‡Œå¤„ç†â€œèµ¢å®¶â€çŠ¶æ€ï¼›è¿™å¯æœ‰çš„å¿™äº†ã€‚éšç€æ–°çš„è¡Œä¸ºå‡ºç°ï¼Œè¿™ä¸ªç¨‹åºè¶Šæ¥è¶Šéš¾ä»¥é€‚ç”¨ã€‚</p><h3 id="æ–°çš„è®¾è®¡"><a href="#æ–°çš„è®¾è®¡" class="headerlink" title="æ–°çš„è®¾è®¡"></a>æ–°çš„è®¾è®¡</h3><p>æˆ‘ä»¬çš„è®¡åˆ’æ˜¯ï¼šä¸è¦ç»´æŠ¤æˆ‘ä»¬ç°æœ‰çš„ä»£ç ï¼Œæˆ‘ä»¬é‡å†™å®ƒä»¥ä¾¿äºå°†çŠ¶æ€å¯¹è±¡å°è£…åœ¨å„è‡ªçš„ç±»ä¸­ï¼Œç„¶ååœ¨åŠ¨ä½œå‘ç”Ÿæ—¶å§”æ‰˜ç»™å½“å‰çŠ¶æ€ã€‚</p><ol><li>é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªStateæ¥å£ã€‚åœ¨è¿™ä¸ªæ¥å£å†…ï¼Œç³–æœæœºçš„æ¯ä¸ªåŠ¨ä½œéƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„æ–¹æ³•ã€‚</li><li>ç„¶åä¸ºæœºå™¨ä¸­çš„æ¯ä¸ªçŠ¶æ€å®ç°çŠ¶æ€ç±»ã€‚è¿™äº›ç±»å°†è´Ÿè´£å¯¹åº”çš„çŠ¶æ€ä¸‹è¿›è¡Œæœºå™¨çš„è¡Œä¸º</li><li>æœ€åï¼Œæˆ‘ä»¬è¦æ‘†è„±æ—§çš„æ¡ä»¶ä»£ç ï¼Œå–è€Œä»£ä¹‹çš„æ–¹å¼æ˜¯ï¼Œå°†åŠ¨ä½œå§”æ‰˜åˆ°çŠ¶æ€ç±»ã€‚</li></ol><h3 id="å®šä¹‰çŠ¶æ€æ¨¡å¼"><a href="#å®šä¹‰çŠ¶æ€æ¨¡å¼" class="headerlink" title="å®šä¹‰çŠ¶æ€æ¨¡å¼"></a>å®šä¹‰çŠ¶æ€æ¨¡å¼</h3><p><strong>çŠ¶æ€æ¨¡å¼</strong>ï¼šå…è®¸å¯¹è±¡åœ¨å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸ºï¼Œå¯¹è±¡çœ‹èµ·æ¥å¥½åƒä¿®æ”¹äº†å®ƒçš„ç±»ã€‚</p><h3 id="å®ç°çŠ¶æ€ç±»"><a href="#å®ç°çŠ¶æ€ç±»" class="headerlink" title="å®ç°çŠ¶æ€ç±»"></a>å®ç°çŠ¶æ€ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * çŠ¶æ€æ¥å£</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-06 22:00:14</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">State</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŠ•å¸</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">insertQuarter</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€€å¸æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">ejectQuarter</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è½¬åŠ¨æ›²æŸ„æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">turnCrank</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘æ”¾ç³–æœæ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">dispense</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æœªæŠ•å¸çŠ¶æ€</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-06 22:01:26</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NoQuarterState</span> <span class="keyword">implements</span> <span class="title class_">State</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> GumballMachine gumballMachine;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">NoQuarterState</span><span class="params">(GumballMachine gumballMachine)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gumballMachine = gumballMachine;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertQuarter</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;You inserted a quarter.&quot;</span>);</span><br><span class="line">        gumballMachine.setState(gumballMachine.getHasQuarterState());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">ejectQuarter</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;You haven&#x27;t inserted a quarter.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">turnCrank</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;You turned, but there&#x27;s no quarter.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dispense</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;You need to pay first.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å·²æŠ•å¸çŠ¶æ€</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-06 22:09:08</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HasQuarterState</span> <span class="keyword">implements</span> <span class="title class_">State</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> GumballMachine gumballMachine;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Random</span> <span class="variable">random</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>(System.currentTimeMillis());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">HasQuarterState</span><span class="params">(GumballMachine gumballMachine)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gumballMachine = gumballMachine;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertQuarter</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;You can&#x27;t insert another quarter.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">ejectQuarter</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Quarter returned.&quot;</span>);</span><br><span class="line">        gumballMachine.setState(gumballMachine.getNoQuarterState());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">turnCrank</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;You turned...&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">winner</span> <span class="operator">=</span> random.nextInt(<span class="number">10</span>);</span><br><span class="line">        <span class="keyword">if</span> (winner == <span class="number">0</span> &amp;&amp; gumballMachine.getCount() &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            gumballMachine.setState(gumballMachine.getWinnerState());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            gumballMachine.setState(gumballMachine.getSoldState());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dispense</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;No gumball dispensed.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å”®ç½„çŠ¶æ€</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-06 22:08:39</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SoldOutState</span> <span class="keyword">implements</span> <span class="title class_">State</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> GumballMachine gumballMachine;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SoldOutState</span><span class="params">(GumballMachine gumballMachine)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gumballMachine = gumballMachine;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertQuarter</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;You can&#x27;t insert a quarter, the machine is sold out.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">ejectQuarter</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;You can&#x27;t eject, you haven&#x27;t inserted a quarter yet.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">turnCrank</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;You turned, but there are no gumballs.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dispense</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;No gumball dispensed.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å”®å‡ºçŠ¶æ€</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-06 22:09:19</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SoldState</span> <span class="keyword">implements</span> <span class="title class_">State</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> GumballMachine gumballMachine;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SoldState</span><span class="params">(GumballMachine gumballMachine)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gumballMachine = gumballMachine;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertQuarter</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Please wait, we&#x27;re already giving you a gumball.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">ejectQuarter</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Sorry, you already turned the crank.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">turnCrank</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Turning twice doesn&#x27;t get you another gumball.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dispense</span><span class="params">()</span> &#123;</span><br><span class="line">        gumballMachine.releaseBall();</span><br><span class="line">        <span class="keyword">if</span> (gumballMachine.getCount() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            gumballMachine.setState(gumballMachine.getNoQuarterState());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Oops, out of gumballs!&quot;</span>);</span><br><span class="line">            gumballMachine.setState(gumballMachine.getSoldOutState());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¹¸è¿ç©å®¶çŠ¶æ€</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-06 22:20:51</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WinnerState</span> <span class="keyword">implements</span> <span class="title class_">State</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> GumballMachine gumballMachine;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">WinnerState</span><span class="params">(GumballMachine gumballMachine)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gumballMachine = gumballMachine;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertQuarter</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// çœç•¥...</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">ejectQuarter</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// çœç•¥...</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">turnCrank</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// çœç•¥...</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dispense</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;YOU&#x27;RE A WINNER! You get two gumballs for you quarter.&quot;</span>);</span><br><span class="line">        gumballMachine.releaseBall();</span><br><span class="line">        <span class="keyword">if</span> (gumballMachine.getCount() == <span class="number">0</span>) &#123;</span><br><span class="line">             gumballMachine.setState(gumballMachine.getSoldOutState());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            gumballMachine.releaseBall();</span><br><span class="line">            <span class="keyword">if</span> (gumballMachine.getCount() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                gumballMachine.setState(gumballMachine.getNoQuarterState());</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Oops, out of gumballsï¼&quot;</span>);</span><br><span class="line">                gumballMachine.setState(gumballMachine.getSoldOutState());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ”¹é€ ç³–æœæœº"><a href="#æ”¹é€ ç³–æœæœº" class="headerlink" title="æ”¹é€ ç³–æœæœº"></a>æ”¹é€ ç³–æœæœº</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç³–æœæœº</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-09-06 21:18:14</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GumballMachine</span> &#123;</span><br><span class="line">    <span class="comment">// å”®ç½„</span></span><br><span class="line">    <span class="keyword">private</span> State soldOutState;</span><br><span class="line">    <span class="comment">// æ²¡æœ‰æŠ•å¸</span></span><br><span class="line">    <span class="keyword">private</span> State noQuarterState;</span><br><span class="line">    <span class="comment">// å·²æŠ•å¸</span></span><br><span class="line">    <span class="keyword">private</span> State hasQuarterState;</span><br><span class="line">    <span class="comment">// å”®å‡º</span></span><br><span class="line">    <span class="keyword">private</span> State soldState;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// èµ¢å®¶</span></span><br><span class="line">    <span class="keyword">private</span> State winnerState;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å½“å‰çŠ¶æ€</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">State</span> <span class="variable">state</span> <span class="operator">=</span> soldOutState;</span><br><span class="line">    <span class="comment">// ç³–æœæ•°é‡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">GumballMachine</span><span class="params">(<span class="type">int</span> count)</span> &#123;</span><br><span class="line">        soldOutState = <span class="keyword">new</span> <span class="title class_">SoldOutState</span>(<span class="built_in">this</span>);</span><br><span class="line">        noQuarterState = <span class="keyword">new</span> <span class="title class_">NoQuarterState</span>(<span class="built_in">this</span>);</span><br><span class="line">        hasQuarterState = <span class="keyword">new</span> <span class="title class_">HasQuarterState</span>(<span class="built_in">this</span>);</span><br><span class="line">        soldState = <span class="keyword">new</span> <span class="title class_">SoldState</span>(<span class="built_in">this</span>);</span><br><span class="line">        winnerState = <span class="keyword">new</span> <span class="title class_">WinnerState</span>(<span class="built_in">this</span>);</span><br><span class="line">        <span class="built_in">this</span>.count = count;</span><br><span class="line">        <span class="keyword">if</span> (count &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            state = noQuarterState;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŠ•å¸æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertQuarter</span><span class="params">()</span> &#123;</span><br><span class="line">        state.insertQuarter();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€€å¸æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">ejectQuarter</span><span class="params">()</span> &#123;</span><br><span class="line">        state.ejectQuarter();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è½¬åŠ¨æ›²æŸ„æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">turnCrank</span><span class="params">()</span> &#123;</span><br><span class="line">        state.turnCrank();</span><br><span class="line">        state.dispense();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘æ”¾ç³–æœæ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dispense</span><span class="params">()</span> &#123;</span><br><span class="line">        state.dispense();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">releaseBall</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;A gumball comes rolling out the slot.&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (count != <span class="number">0</span>) &#123;</span><br><span class="line">            count--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setState</span><span class="params">(State state)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.state = state;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> State <span class="title function_">getState</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> state;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> State <span class="title function_">getSoldOutState</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> soldOutState;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> State <span class="title function_">getNoQuarterState</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> noQuarterState;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> State <span class="title function_">getHasQuarterState</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> hasQuarterState;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> State <span class="title function_">getSoldState</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> soldState;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> State <span class="title function_">getWinnerState</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> winnerState;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å±•ç¤ºæ–°ç¨‹åº"><a href="#å±•ç¤ºæ–°ç¨‹åº" class="headerlink" title="å±•ç¤ºæ–°ç¨‹åº"></a>å±•ç¤ºæ–°ç¨‹åº</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GumballMachineTestDrive</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">GumballMachine</span> <span class="variable">gumballMachine</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GumballMachine</span>(<span class="number">5</span>);</span><br><span class="line">        <span class="comment">// æ‰“å°æœºå™¨çŠ¶æ€</span></span><br><span class="line">        System.out.println(gumballMachine);</span><br><span class="line"></span><br><span class="line">        gumballMachine.insertQuarter();</span><br><span class="line">        gumballMachine.turnCrank();</span><br><span class="line"><span class="comment">// æ‰“å°æœºå™¨çŠ¶æ€</span></span><br><span class="line">        System.out.println(gumballMachine);</span><br><span class="line"></span><br><span class="line">        gumballMachine.insertQuarter();</span><br><span class="line">        gumballMachine.turnCrank();</span><br><span class="line"><span class="comment">// æ‰“å°æœºå™¨çŠ¶æ€</span></span><br><span class="line">        System.out.println(gumballMachine);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li>çŠ¶æ€æ¨¡å¼å…è®¸ä¸€ä¸ªå¯¹è±¡åŸºäºå†…éƒ¨çŠ¶æ€è€Œæ‹¥æœ‰ä¸åŒçš„è¡Œä¸º</li><li>å’Œç¨‹åºçŠ¶æ€æœºä¸åŒï¼ŒçŠ¶æ€æ¨¡å¼ç”¨ç±»ä»£è¡¨çŠ¶æ€</li><li>Contextä¼šå°†è¡Œä¸ºå§”æ‰˜ç»™å½“å‰çŠ¶æ€å¯¹è±¡</li><li>é€šè¿‡å°†æ¯ä¸ªçŠ¶æ€å°è£…è¿›ä¸€ä¸ªç±»ï¼Œæˆ‘ä»¬æŠŠä»¥åéœ€è¦åšçš„ä»»ä½•æ”¹å˜å±€éƒ¨åŒ–äº†</li><li>çŠ¶æ€æ¨¡å¼å’Œç­–ç•¥æ¨¡å¼æœ‰ä¸åŒçš„ç±»å›¾ï¼Œä½†æ˜¯å®ƒä»¬çš„æ„å›¾ä¸åŒ</li><li>ç­–ç•¥æ¨¡å¼é€šå¸¸ä¼šç”¨è¡Œä¸ºæˆ–ç®—æ³•æ¥é…ç½®Contextç±»</li><li>çŠ¶æ€æ¨¡å¼å…è®¸Contextéšç€çŠ¶æ€çš„æ”¹å˜è€Œæ”¹å˜è¡Œä¸º</li><li>çŠ¶æ€æ¨¡å¼å¯ä»¥ç”±Stateç±»æˆ–Contextç±»æ§åˆ¶</li><li>ä½¿ç”¨çŠ¶æ€æ¨¡å¼é€šå¸¸ä¼šå¯¼è‡´è®¾è®¡ä¸­çš„ç±»æ•°ç›®å¤§é‡å¢åŠ </li><li>çŠ¶æ€ç±»å¯ä»¥è¢«å¤šä¸ªContextå®ä¾‹å…±äº«</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://github.com/user-attachments/assets/9cb4fe19-db49-4c0a-8751-e26c0367d212&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://chivalry727.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="çŠ¶æ€æ¨¡å¼" scheme="https://chivalry727.github.io/tags/%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F/"/>
    
      <category term="State Design Pattern" scheme="https://chivalry727.github.io/tags/State-Design-Pattern/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹è¿­ä»£å™¨æ¨¡å¼</title>
    <link href="https://chivalry727.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/"/>
    <id>https://chivalry727.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/</id>
    <published>2020-08-30T06:17:57.000Z</published>
    <updated>2025-02-26T12:08:01.052Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://github.com/user-attachments/assets/3eb66a89-c105-4574-8670-e499b5a2fe2b"></p><span id="more"></span><h2 id="è®¾è®¡æ¨¡å¼ä¹‹è¿­ä»£å™¨æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼ä¹‹è¿­ä»£å™¨æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¹‹è¿­ä»£å™¨æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼ä¹‹è¿­ä»£å™¨æ¨¡å¼</h2><h3 id="ç®¡ç†è‰¯å¥½çš„é›†åˆ"><a href="#ç®¡ç†è‰¯å¥½çš„é›†åˆ" class="headerlink" title="ç®¡ç†è‰¯å¥½çš„é›†åˆ"></a>ç®¡ç†è‰¯å¥½çš„é›†åˆ</h3><p>æœ‰è®¸å¤šç§æ–¹æ³•å¯ä»¥æŠŠå¯¹è±¡å †èµ·æ¥æˆä¸ºä¸€ä¸ªé›†åˆã€‚ä½ å¯ä»¥æŠŠå®ƒä»¬æ”¾è¿›æ•°ç»„ã€å †æ ˆã€åˆ—è¡¨æˆ–è€…æ˜¯æ•£åˆ—è¡¨ä¸­ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šå­¦ä¹ å¦‚ä½•è®©å®¢æˆ·éå†ä½ çš„å¯¹è±¡è€Œåˆæ— æ³•çª¥è§†ä½ å­˜å‚¨å¯¹è±¡çš„æ–¹å¼ï¼›ä¹Ÿå°†å­¦ä¹ å¦‚ä½•åˆ›å»ºä¸€äº›å¯¹è±¡è¶…é›†åˆï¼Œèƒ½å¤Ÿä¸€å£æ°”å°±è·³è¿‡æŸäº›è®©äººæœ›è€Œç”Ÿç•çš„æ•°æ®ç»“æ„ã€‚</p><h3 id="é¤å…å’Œç…é¥¼å±‹åˆå¹¶äº†"><a href="#é¤å…å’Œç…é¥¼å±‹åˆå¹¶äº†" class="headerlink" title="é¤å…å’Œç…é¥¼å±‹åˆå¹¶äº†"></a>é¤å…å’Œç…é¥¼å±‹åˆå¹¶äº†</h3><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥å»åŒä¸€åœ°æ–¹å°±å¯ä»¥äº«ç”¨ç…é¥¼æ—©é¤ï¼Œå’Œåˆé¤äº†ã€‚ä½†æ˜¯ï¼Œå¥½åƒæœ‰ä¸€ç‚¹å„¿éº»çƒ¦ã€‚ã€‚ã€‚å› ä¸ºç…é¥¼å±‹ä½¿ç”¨çš„<code>ArrayList</code>ï¼Œè€Œé¤å…ä½¿ç”¨çš„æ˜¯æ•°ç»„ï¼Œå®ƒä»¬éƒ½ä¸æƒ³æ”¹å˜å®ç°ï¼Œæ¯•ç«Ÿæœ‰å¤ªå¤šçš„ä»£ç ä¾èµ–äºå®ƒä»¬äº†ã€‚</p><h3 id="æŸ¥çœ‹èœå•é¡¹"><a href="#æŸ¥çœ‹èœå•é¡¹" class="headerlink" title="æŸ¥çœ‹èœå•é¡¹"></a>æŸ¥çœ‹èœå•é¡¹</h3><p>è®©æˆ‘ä»¬æ£€æŸ¥æ¯ä»½èœå•ä¸Šçš„é¡¹ç›®å’Œå®ç°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * èœå•é¡¹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-08-30 21:13:06</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MenuItem</span> &#123;</span><br><span class="line">    <span class="comment">// èœå</span></span><br><span class="line">    String name;</span><br><span class="line">    <span class="comment">// æè¿°</span></span><br><span class="line">    String description;</span><br><span class="line">    <span class="comment">// æ˜¯å¦ç´ é£Ÿ</span></span><br><span class="line">    <span class="type">boolean</span> vegetarian;</span><br><span class="line">    <span class="comment">// ä»·æ ¼</span></span><br><span class="line">    <span class="type">double</span> price;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MenuItem</span><span class="params">(String name, String description, <span class="type">boolean</span> vegetarian, <span class="type">double</span> price)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.description = description;</span><br><span class="line">        <span class="built_in">this</span>.vegetarian = vegetarian;</span><br><span class="line">        <span class="built_in">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// çœç•¥ get/setæ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç…é¥¼å±‹èœå•å®ç°"><a href="#ç…é¥¼å±‹èœå•å®ç°" class="headerlink" title="ç…é¥¼å±‹èœå•å®ç°"></a>ç…é¥¼å±‹èœå•å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç…é¥¼å±‹çš„èœå•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-08-30 21:15:37</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PancakeHouseMenu</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿™é‡Œä½¿ç”¨ArrayList å®ç°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ArrayList&lt;MenuItem&gt; menuItems;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PancakeHouseMenu</span><span class="params">()</span> &#123;</span><br><span class="line">        menuItems = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        addItem(<span class="string">&quot;ç…é¥¼æ—©é¤&quot;</span>, <span class="string">&quot;ç‚’é¸¡è›‹ç…é¥¼ï¼ŒåŠ é¢åŒ…&quot;</span>, <span class="literal">true</span>, <span class="number">2.99</span>);</span><br><span class="line">        addItem(<span class="string">&quot;å¸¸è§„ç…é¥¼æ—©é¤&quot;</span>, <span class="string">&quot;ç…é¥¼é…ç…è›‹ï¼Œé¦™è‚ &quot;</span>, <span class="literal">false</span>, <span class="number">2.99</span>);</span><br><span class="line">        addItem(<span class="string">&quot;è“è“ç…é¥¼&quot;</span>, <span class="string">&quot;ç”¨æ–°é²œè“è“åˆ¶æˆçš„ç…é¥¼&quot;</span>, <span class="literal">true</span>, <span class="number">3.49</span>);</span><br><span class="line">        addItem(<span class="string">&quot;åå¤«é¥¼&quot;</span>, <span class="string">&quot;åå¤«é¥¼ï¼Œæ‚¨å¯ä»¥é€‰æ‹©è“è“æˆ–è‰è“&quot;</span>, <span class="literal">true</span>, <span class="number">3.59</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–°å¢èœå•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> description</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> vegetarian</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> price</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addItem</span><span class="params">(String name, String description, <span class="type">boolean</span> vegetarian, <span class="type">double</span> price)</span> &#123;</span><br><span class="line">        <span class="type">MenuItem</span> <span class="variable">menuItem</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MenuItem</span>(name, description, vegetarian, price);</span><br><span class="line">        menuItems.add(menuItem);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›èœå•åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> ArrayList&lt;MenuItem&gt; <span class="title function_">getMenuItems</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> menuItems;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é¤å…èœå•å®ç°"><a href="#é¤å…èœå•å®ç°" class="headerlink" title="é¤å…èœå•å®ç°"></a>é¤å…èœå•å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ™šé¤èœå•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-08-30 21:26:39</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DinerMenu</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">MAX_ITEMS</span> <span class="operator">=</span> <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">numberOfItems</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> MenuItem[] menuItems;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DinerMenu</span><span class="params">()</span> &#123;</span><br><span class="line">        menuItems = <span class="keyword">new</span> <span class="title class_">MenuItem</span>[MAX_ITEMS];</span><br><span class="line"></span><br><span class="line">        addItem(<span class="string">&quot;Vegetarian BLT&quot;</span>, <span class="string">&quot;å…¨éº¦åŸ¹æ ¹è´è‹£å’Œç•ªèŒ„&quot;</span>, <span class="literal">true</span>, <span class="number">2.99</span>);</span><br><span class="line">        addItem(<span class="string">&quot;BLT&quot;</span>, <span class="string">&quot;åŸ¹æ ¹é…ç”Ÿèœå’Œç•ªèŒ„å…¨éº¦&quot;</span>, <span class="literal">false</span>, <span class="number">2.99</span>);</span><br><span class="line">        addItem(<span class="string">&quot;å½“å¤©çš„æ±¤&quot;</span>, <span class="string">&quot;å½“å¤©çš„æ±¤ï¼Œé…ä»¥åœŸè±†æ²™æ‹‰&quot;</span>, <span class="literal">false</span>, <span class="number">3.29</span>);</span><br><span class="line">        addItem(<span class="string">&quot;çƒ­ç‹—&quot;</span>, <span class="string">&quot;çƒ­ç‹—, é…é…¸èœï¼Œè°ƒå‘³ï¼Œæ´‹è‘±ï¼ŒåŠ å¥¶é…ª&quot;</span>, <span class="literal">false</span>, <span class="number">3.99</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–°å¢èœå•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> description</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> vegetarian</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> price</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addItem</span><span class="params">(String name, String description, <span class="type">boolean</span> vegetarian, <span class="type">double</span> price)</span> &#123;</span><br><span class="line">        <span class="type">MenuItem</span> <span class="variable">menuItem</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MenuItem</span>(name, description, vegetarian, price);</span><br><span class="line">        <span class="keyword">if</span> (numberOfItems &gt;= MAX_ITEMS) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Sorry, menu is full! Can&#x27;t add item to menu&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            menuItems[numberOfItems] = menuItem;</span><br><span class="line">            numberOfItems++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›èœå•åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> MenuItem[] getMenuItems() &#123;</span><br><span class="line">        <span class="keyword">return</span> menuItems;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æœåŠ¡å‘˜æ‰“å°èœå•"><a href="#æœåŠ¡å‘˜æ‰“å°èœå•" class="headerlink" title="æœåŠ¡å‘˜æ‰“å°èœå•"></a>æœåŠ¡å‘˜æ‰“å°èœå•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Waitress</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> PancakeHouseMenu pancakeHouseMenu;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> DinerMenu dinerMenu;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Waitress</span><span class="params">(PancakeHouseMenu pancakeHouseMenu, DinerMenu dinerMenu)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.pancakeHouseMenu = pancakeHouseMenu;</span><br><span class="line">        <span class="built_in">this</span>.dinerMenu = dinerMenu;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰“å°åˆå¹¶åçš„é¤å…èœå•é¡¹</span></span><br><span class="line">    <span class="comment">// æˆ‘ä»¬æ€»æ˜¯è¦å¤„ç†ä¸¤ä¸ªèœå•ï¼Œå¹¶ä¸”ç”¨ä¸¤ä¸ªå¾ªç¯éå†è¿™äº›é¡¹ã€‚å¦‚æœè¿˜æœ‰ç¬¬ä¸‰å®¶é¤å…ä»¥ä¸åŒçš„å®ç°ï¼Œæˆ‘ä»¬å°±éœ€è¦æœ‰ä¸‰ä¸ªå¾ªç¯ã€‚ã€‚</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printMenu</span><span class="params">()</span> &#123;</span><br><span class="line">        ArrayList&lt;MenuItem&gt; pancakeHouseMenuMenuItems = pancakeHouseMenu.getMenuItems();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; pancakeHouseMenuMenuItems.size(); i++) &#123;</span><br><span class="line">            <span class="type">MenuItem</span> <span class="variable">menuItem</span> <span class="operator">=</span> pancakeHouseMenuMenuItems.get(i);</span><br><span class="line">            System.out.print(menuItem.getName() + <span class="string">&quot; &quot;</span>);</span><br><span class="line">            System.out.println(menuItem.getPrice() + <span class="string">&quot; &quot;</span>);</span><br><span class="line">            System.out.println(menuItem.getDescription());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        MenuItem[] dinerMenuMenuItems = dinerMenu.getMenuItems();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; dinerMenuMenuItems.length; i++) &#123;</span><br><span class="line">            <span class="type">MenuItem</span> <span class="variable">menuItem</span> <span class="operator">=</span> dinerMenuMenuItems[i];</span><br><span class="line">            System.out.print(menuItem.getName() + <span class="string">&quot; &quot;</span>);</span><br><span class="line">            System.out.println(menuItem.getPrice() + <span class="string">&quot; &quot;</span>);</span><br><span class="line">            System.out.println(menuItem.getDescription());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¯ä»¥å°è£…éå†å—ï¼Ÿ"><a href="#å¯ä»¥å°è£…éå†å—ï¼Ÿ" class="headerlink" title="å¯ä»¥å°è£…éå†å—ï¼Ÿ"></a>å¯ä»¥å°è£…éå†å—ï¼Ÿ</h3><p>æˆ‘ä»¬å¯ä»¥å°è£…å˜åŒ–çš„éƒ¨åˆ†ã€‚å¾ˆæ˜æ˜¾ï¼Œåœ¨è¿™é‡Œå‘ç”Ÿå˜åŒ–çš„æ˜¯ï¼šç”±ä¸åŒçš„é›†åˆç±»å‹æ‰€é€ æˆçš„éå†ã€‚</p><h3 id="åœ¨é¤å…åŠ å…¥ä¸€ä¸ªè¿­ä»£å™¨"><a href="#åœ¨é¤å…åŠ å…¥ä¸€ä¸ªè¿­ä»£å™¨" class="headerlink" title="åœ¨é¤å…åŠ å…¥ä¸€ä¸ªè¿­ä»£å™¨"></a>åœ¨é¤å…åŠ å…¥ä¸€ä¸ªè¿­ä»£å™¨</h3><p>æƒ³è¦åœ¨é¤å…ä¸­åŠ å…¥ä¸€ä¸ªè¿­ä»£å™¨ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå®šä¹‰è¿­ä»£å™¨æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¿­ä»£å™¨æ¥å£</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-08-30 21:45:06</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Iterator</span> &#123;</span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span>;</span><br><span class="line">    Object <span class="title function_">next</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ç°å…·ä½“çš„è¿­ä»£å™¨ï¼Œä¸ºé¤å…èœå•æœåŠ¡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DinerMenuIterator</span> <span class="keyword">implements</span> <span class="title class_">Iterator</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> MenuItem[] items;</span><br><span class="line">    <span class="comment">// è®°å½•å½“å‰æ•°ç»„éå†çš„ä½ç½®</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">position</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DinerMenuIterator</span><span class="params">(MenuItem[] items)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.items = items;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (position &gt;= items.length || items[position] == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">MenuItem</span> <span class="variable">item</span> <span class="operator">=</span> items[position];</span><br><span class="line">        position++;</span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PancakeHouseIterator</span> <span class="keyword">implements</span> <span class="title class_">Iterator</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ArrayList&lt;MenuItem&gt; menuItems;</span><br><span class="line">    <span class="type">int</span> <span class="variable">position</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PancakeHouseIterator</span><span class="params">(ArrayList&lt;MenuItem&gt; menuItems)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.menuItems = menuItems;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (position &gt;= menuItems.size() || menuItems.get(position) == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">MenuItem</span> <span class="variable">menuItem</span> <span class="operator">=</span> menuItems.get(position);</span><br><span class="line">        position++;</span><br><span class="line">        <span class="keyword">return</span> menuItem;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç”¨è¿­ä»£å™¨æ”¹å†™é¤å…èœå•"><a href="#ç”¨è¿­ä»£å™¨æ”¹å†™é¤å…èœå•" class="headerlink" title="ç”¨è¿­ä»£å™¨æ”¹å†™é¤å…èœå•"></a>ç”¨è¿­ä»£å™¨æ”¹å†™é¤å…èœå•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ™šé¤èœå•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-08-30 21:26:39</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DinerMenu</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">MAX_ITEMS</span> <span class="operator">=</span> <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">numberOfItems</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> MenuItem[] menuItems;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// çœç•¥å…¶ä»–æ–¹æ³•...</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›èœå•åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> MenuItem[] getMenuItems() &#123;</span><br><span class="line">        <span class="keyword">return</span> menuItems;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›ä¸€ä¸ªè¿­ä»£å™¨çš„å®ç°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Iterator <span class="title function_">createIterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">DinerMenuIterator</span>(getMenuItems());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PancakeHouseMenu</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿™é‡Œä½¿ç”¨ArrayList å®ç°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ArrayList&lt;MenuItem&gt; menuItems;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// çœç•¥å…¶ä»–æ–¹æ³•...</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›èœå•åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> ArrayList&lt;MenuItem&gt; <span class="title function_">getMenuItems</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> menuItems;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Iterator <span class="title function_">createIterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PancakeHouseIterator</span>(getMenuItems());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ­£æœåŠ¡å‘˜æ‰“å°èœå•"><a href="#ä¿®æ­£æœåŠ¡å‘˜æ‰“å°èœå•" class="headerlink" title="ä¿®æ­£æœåŠ¡å‘˜æ‰“å°èœå•"></a>ä¿®æ­£æœåŠ¡å‘˜æ‰“å°èœå•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Waitress</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> PancakeHouseMenu pancakeHouseMenu;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> DinerMenu dinerMenu;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Waitress</span><span class="params">(PancakeHouseMenu pancakeHouseMenu, DinerMenu dinerMenu)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.pancakeHouseMenu = pancakeHouseMenu;</span><br><span class="line">        <span class="built_in">this</span>.dinerMenu = dinerMenu;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printMenu</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Iterator</span> <span class="variable">iterator</span> <span class="operator">=</span> pancakeHouseMenu.createIterator();</span><br><span class="line">        printMenu(iterator);</span><br><span class="line">        <span class="type">Iterator</span> <span class="variable">dinerMenuIterator</span> <span class="operator">=</span> dinerMenu.createIterator();</span><br><span class="line">        printMenu(dinerMenuIterator);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printMenu</span><span class="params">(Iterator iterator)</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            <span class="type">MenuItem</span> <span class="variable">menuItem</span> <span class="operator">=</span> (MenuItem) iterator.next();</span><br><span class="line">            System.out.print(menuItem.getName() + <span class="string">&quot; &quot;</span>);</span><br><span class="line">            System.out.println(menuItem.getPrice() + <span class="string">&quot; --&quot;</span>);</span><br><span class="line">            System.out.println(menuItem.getDescription());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•æˆ‘ä»¬çš„ä»£ç "><a href="#æµ‹è¯•æˆ‘ä»¬çš„ä»£ç " class="headerlink" title="æµ‹è¯•æˆ‘ä»¬çš„ä»£ç "></a>æµ‹è¯•æˆ‘ä»¬çš„ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MenuTestDrive</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">PancakeHouseMenu</span> <span class="variable">pancakeHouseMenu</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PancakeHouseMenu</span>();</span><br><span class="line">        <span class="type">DinerMenu</span> <span class="variable">dinerMenu</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DinerMenu</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">Waitress</span> <span class="variable">waitress</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Waitress</span>(pancakeHouseMenu, dinerMenu);</span><br><span class="line">        waitress.printMenu();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨Javaçš„Iteratoræ¥å£æ”¹è‰¯èœå•"><a href="#ä½¿ç”¨Javaçš„Iteratoræ¥å£æ”¹è‰¯èœå•" class="headerlink" title="ä½¿ç”¨Javaçš„Iteratoræ¥å£æ”¹è‰¯èœå•"></a>ä½¿ç”¨Javaçš„Iteratoræ¥å£æ”¹è‰¯èœå•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Menu</span> &#123;</span><br><span class="line">    <span class="comment">// ç®€å•æ¥å£ï¼Œè®©å®¢æˆ·èƒ½å¤Ÿå–å¾—ä¸€ä¸ªèœå•é¡¹è¿­ä»£å™¨</span></span><br><span class="line">    Iterator <span class="title function_">createIterator</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç…é¥¼å±‹çš„èœå•</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-08-30 21:15:37</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PancakeHouseMenu</span> <span class="keyword">implements</span> <span class="title class_">Menu</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿™é‡Œä½¿ç”¨ArrayList å®ç°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ArrayList&lt;MenuItem&gt; menuItems;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// çœç•¥å…¶ä»–æ–¹æ³•...</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator <span class="title function_">createIterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> menuItems.iterator();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DinerMenuIterator</span> <span class="keyword">implements</span> <span class="title class_">Iterator</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> MenuItem[] items;</span><br><span class="line">    <span class="comment">// è®°å½•å½“å‰æ•°ç»„éå†çš„ä½ç½®</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">position</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DinerMenuIterator</span><span class="params">(MenuItem[] items)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.items = items;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (position &gt;= items.length || items[position] == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">MenuItem</span> <span class="variable">item</span> <span class="operator">=</span> items[position];</span><br><span class="line">        position++;</span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (position &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>(<span class="string">&quot;You can&#x27;t remove an item until you&#x27;ve done at least one next()&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (items[position - <span class="number">1</span>] != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> position - <span class="number">1</span>; i &lt; (items.length - <span class="number">1</span>); i++) &#123;</span><br><span class="line">                items[i] = items[i + <span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            items[items.length - <span class="number">1</span>] = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ”¹é€ æˆ‘ä»¬çš„æœåŠ¡å‘˜ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Waitress</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Menu pancakeHouseMenu;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Menu dinerMenu;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Waitress</span><span class="params">(Menu pancakeHouseMenu, Menu dinerMenu)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.pancakeHouseMenu = pancakeHouseMenu;</span><br><span class="line">        <span class="built_in">this</span>.dinerMenu = dinerMenu;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printMenu</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Iterator</span> <span class="variable">iterator</span> <span class="operator">=</span> pancakeHouseMenu.createIterator();</span><br><span class="line">        printMenu(iterator);</span><br><span class="line">        <span class="type">Iterator</span> <span class="variable">dinerMenuIterator</span> <span class="operator">=</span> dinerMenu.createIterator();</span><br><span class="line">        printMenu(dinerMenuIterator);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">printMenu</span><span class="params">(Iterator iterator)</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            <span class="type">MenuItem</span> <span class="variable">menuItem</span> <span class="operator">=</span> (MenuItem) iterator.next();</span><br><span class="line">            System.out.print(menuItem.getName() + <span class="string">&quot; &quot;</span>);</span><br><span class="line">            System.out.println(menuItem.getPrice() + <span class="string">&quot; &quot;</span>);</span><br><span class="line">            System.out.println(menuItem.getDescription());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ”¹è‰¯çš„å¥½å¤„"><a href="#æ”¹è‰¯çš„å¥½å¤„" class="headerlink" title="æ”¹è‰¯çš„å¥½å¤„"></a>æ”¹è‰¯çš„å¥½å¤„</h3><p>ç…é¥¼å±‹èœå•å’Œé¤å…èœå•çš„ç±»ï¼Œéƒ½å®ç°äº†Menuæ¥å£ï¼ŒæœåŠ¡å‘˜ç±»å¯ä»¥åˆ©ç”¨æ¥å£ï¼ˆè€Œä¸æ˜¯å…·ä½“ç±»ï¼‰å¼•ç”¨æ¯ä¸€ä¸ªèœå•å¯¹è±¡ã€‚è¿™æ ·ï¼Œé€šè¿‡â€œé’ˆå¯¹æ¥å£ç¼–ç¨‹ï¼Œè€Œä¸æ˜¯é’ˆå¯¹å®ç°ç¼–ç¨‹â€ï¼Œè¿™æ ·å°±å¯ä»¥å‡å°‘æœåŠ¡å‘˜ç±»ä¸å…·ä½“ç±»ä¹‹é—´çš„ä¾èµ–ã€‚</p><h3 id="å®šä¹‰è¿­ä»£å™¨æ¨¡å¼"><a href="#å®šä¹‰è¿­ä»£å™¨æ¨¡å¼" class="headerlink" title="å®šä¹‰è¿­ä»£å™¨æ¨¡å¼"></a>å®šä¹‰è¿­ä»£å™¨æ¨¡å¼</h3><p><strong>è¿­ä»£å™¨æ¨¡å¼</strong>æä¾›ä¸€ç§æ–¹æ³•é¡ºåºè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­çš„å„ä¸ªå…ƒç´ ï¼Œè€Œåˆä¸æš´éœ²å…¶å†…éƒ¨çš„è¡¨ç¤ºã€‚</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li>è¿­ä»£å™¨å…è®¸è®¿é—®èšåˆçš„å…ƒç´ ï¼Œè€Œä¸éœ€è¦æš´éœ²å®ƒçš„å†…éƒ¨ç»“æ„</li><li>è¿­ä»£å™¨å°†éå†èšåˆçš„å·¥ä½œå°è£…è¿›ä¸€ä¸ªå¯¹è±¡ä¸­</li><li>å½“ä½¿ç”¨è¿­ä»£å™¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¾èµ–èšåˆæä¾›éå†</li><li>è¿­ä»£å™¨æä¾›äº†ä¸€ä¸ªé€šç”¨çš„æ¥å£ï¼Œè®©æˆ‘ä»¬éå†èšåˆé¡¹ï¼Œå½“æˆ‘ä»¬ç¼–ç ä½¿ç”¨èšåˆçš„é¡¹æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨å¤šæ€æœºåˆ¶</li><li>æˆ‘ä»¬åº”è¯¥åŠªåŠ›è®©ä¸€ä¸ªç±»åªåˆ†é…ä¸€ä¸ªè´£ä»»</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://github.com/user-attachments/assets/3eb66a89-c105-4574-8670-e499b5a2fe2b&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://chivalry727.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="è¿­ä»£å™¨æ¨¡å¼" scheme="https://chivalry727.github.io/tags/%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/"/>
    
      <category term="Iterator Design Pattern" scheme="https://chivalry727.github.io/tags/Iterator-Design-Pattern/"/>
    
  </entry>
  
  <entry>
    <title>é¢è¯•æ€»ç»“ï¼ˆæŸåœ°äº§ï¼‰</title>
    <link href="https://chivalry727.github.io/%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93%EF%BC%88%E6%9F%90%E5%9C%B0%E4%BA%A7%EF%BC%89/"/>
    <id>https://chivalry727.github.io/%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93%EF%BC%88%E6%9F%90%E5%9C%B0%E4%BA%A7%EF%BC%89/</id>
    <published>2020-08-26T07:45:27.000Z</published>
    <updated>2025-02-27T11:13:21.685Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://github.com/user-attachments/assets/901d8359-470a-466c-9f9a-ab717480529d"></p><span id="more"></span><h2 id="é¢è¯•æ€»ç»“ï¼ˆæŸåœ°äº§ï¼‰"><a href="#é¢è¯•æ€»ç»“ï¼ˆæŸåœ°äº§ï¼‰" class="headerlink" title="é¢è¯•æ€»ç»“ï¼ˆæŸåœ°äº§ï¼‰"></a>é¢è¯•æ€»ç»“ï¼ˆæŸåœ°äº§ï¼‰</h2><h3 id="gRPC-å¦‚ä½•åšè´Ÿè½½çš„"><a href="#gRPC-å¦‚ä½•åšè´Ÿè½½çš„" class="headerlink" title="gRPC å¦‚ä½•åšè´Ÿè½½çš„"></a>gRPC å¦‚ä½•åšè´Ÿè½½çš„</h3><p>gRPCè´Ÿè½½å‡è¡¡ï¼Œå®˜æ–¹åªæä¾›äº†<code>pick_first</code>å’Œ<code>round_robin</code>ä¸¤ç§è´Ÿè½½å‡è¡¡ç­–ç•¥</p><h3 id="gRPC-é™æµæ€ä¹ˆåšçš„"><a href="#gRPC-é™æµæ€ä¹ˆåšçš„" class="headerlink" title="gRPC é™æµæ€ä¹ˆåšçš„"></a>gRPC é™æµæ€ä¹ˆåšçš„</h3><p>å¯ä»¥é€šè¿‡ä¿¡å·é‡æ¥åšé™æµ</p><h3 id="Dubbo-çš„æ•´ä½“æ¶æ„è®¾è®¡æœ‰å“ªäº›åˆ†å±‚"><a href="#Dubbo-çš„æ•´ä½“æ¶æ„è®¾è®¡æœ‰å“ªäº›åˆ†å±‚" class="headerlink" title="Dubbo çš„æ•´ä½“æ¶æ„è®¾è®¡æœ‰å“ªäº›åˆ†å±‚?"></a>Dubbo çš„æ•´ä½“æ¶æ„è®¾è®¡æœ‰å“ªäº›åˆ†å±‚?</h3><ul><li><strong>æ¥å£æœåŠ¡å±‚( Service)</strong>:è¯¥å±‚ä¸ä¸šåŠ¡é€»è¾‘ç›¸å…³ï¼Œæ ¹æ® provider å’Œ consumer çš„ä¸šåŠ¡è®¾ è®¡å¯¹åº”çš„æ¥å£å’Œå®ç°</li><li><strong>é…ç½®å±‚( Config)</strong>:å¯¹å¤–é…ç½®æ¥å£ï¼Œä»¥ ServiceConfig å’Œ ReferenceConfig ä¸ºä¸­å¿ƒ <strong>æœåŠ¡ä»£ç†å±‚( Proxy)</strong>:æœåŠ¡æ¥å£é€æ˜ä»£ç†ï¼Œç”ŸæˆæœåŠ¡çš„å®¢æˆ·ç«¯ Stub å’Œ æœåŠ¡ç«¯çš„ Skeletonï¼Œ ä»¥ ServiceProxy ä¸ºä¸­å¿ƒï¼Œ æ‰©å±•æ¥å£ä¸º ProxyFactory</li><li><strong>æœåŠ¡æ³¨å†Œå±‚( Registry)</strong> : å°è£…æœåŠ¡åœ°å€çš„æ³¨å†Œå’Œå‘ç°ï¼Œ ä»¥æœåŠ¡ URL ä¸ºä¸­å¿ƒï¼Œ æ‰©å±• æ¥å£ä¸º RegistryFactoryã€Registryã€RegistryService</li><li><strong>è·¯ç”±å±‚( Cluster)</strong>: å°è£…å¤šä¸ªæä¾›è€…çš„è·¯ç”±å’Œè´Ÿè½½å‡è¡¡ï¼Œ å¹¶æ¡¥æ¥æ³¨å†Œä¸­å¿ƒï¼Œ ä»¥ Invoker ä¸ºä¸­å¿ƒï¼Œ æ‰©å±•æ¥å£ä¸º Clusterã€Directoryã€Router å’Œ LoadBlancce</li><li><strong>ç›‘æ§å±‚( Monitor)</strong>:RPC è°ƒç”¨æ¬¡æ•°å’Œè°ƒç”¨æ—¶é—´ç›‘æ§ï¼Œ ä»¥ Statistics ä¸ºä¸­å¿ƒï¼Œ æ‰© å±•æ¥å£ä¸º MonitorFactoryã€Monitor å’Œ MonitorService</li><li><strong>è¿œç¨‹è°ƒç”¨å±‚(Protocal)</strong>:å°è£… RPC è°ƒç”¨ï¼Œä»¥ Invocation å’Œ Result ä¸ºä¸­å¿ƒï¼Œ æ‰©å±•æ¥å£ä¸º Protocalã€Invoker å’Œ Exporter</li><li><strong>ä¿¡æ¯äº¤æ¢å±‚( Exchange</strong>): å°è£…è¯·æ±‚å“åº”æ¨¡å¼ï¼Œ åŒæ­¥è½¬å¼‚æ­¥ã€‚ä»¥ Request å’Œ Response ä¸ºä¸­å¿ƒï¼Œ æ‰©å±•æ¥å£ä¸º Exchangerã€ExchangeChannelã€ExchangeClient å’Œ ExchangeServer</li><li><strong>ç½‘ç»œä¼ è¾“å±‚( Transport)</strong>:æŠ½è±¡ mina å’Œ netty ä¸ºç»Ÿä¸€æ¥å£ï¼Œä»¥ Message ä¸ºä¸­å¿ƒï¼Œ æ‰©å±•æ¥å£ä¸º Channelã€Transporterã€Clientã€Server å’Œ Codec</li><li><strong>æ•°æ®åºåˆ—åŒ–å±‚( Serialize)</strong>: å¯å¤ç”¨çš„ä¸€äº›å·¥å…·ï¼Œ æ‰©å±•æ¥å£ä¸º Serializationã€ ObjectInputã€ObjectOutput å’Œ ThreadPool</li></ul><h3 id="Dubbo-å¦‚ä½•åšè´Ÿè½½çš„"><a href="#Dubbo-å¦‚ä½•åšè´Ÿè½½çš„" class="headerlink" title="Dubbo å¦‚ä½•åšè´Ÿè½½çš„"></a>Dubbo å¦‚ä½•åšè´Ÿè½½çš„</h3><p>dubboçš„è´Ÿè½½å‡è¡¡å…¨éƒ¨ç”±AbstractLoadBalanceçš„å­ç±»æ¥å®ç°ï¼ŒDubboé»˜è®¤é‡‡ç”¨çš„æ˜¯éšæœºè´Ÿè½½ç­–ç•¥</p><h3 id="Dubboçš„è´Ÿè½½å‡è¡¡ç­–ç•¥"><a href="#Dubboçš„è´Ÿè½½å‡è¡¡ç­–ç•¥" class="headerlink" title="Dubboçš„è´Ÿè½½å‡è¡¡ç­–ç•¥"></a>Dubboçš„è´Ÿè½½å‡è¡¡ç­–ç•¥</h3><p>dubbo æ€»å…±æœ‰å››ç§è´Ÿè½½å‡è¡¡ç­–ç•¥</p><ul><li>RandomLoadBalance éšæœºï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œdubbo æ˜¯ random load balance éšæœºè°ƒç”¨å®ç°è´Ÿè½½å‡è¡¡ï¼Œå¯ä»¥å¯¹ provider ä¸åŒå®ä¾‹è®¾ç½®ä¸åŒçš„æƒé‡ï¼Œä¼šæŒ‰ç…§æƒé‡æ¥è´Ÿè½½å‡è¡¡ï¼Œæƒé‡è¶Šå¤§åˆ†é…æµé‡è¶Šé«˜ï¼Œä¸€èˆ¬å°±ç”¨è¿™ä¸ªé»˜è®¤çš„å°±å¯ä»¥äº†ã€‚</li><li>RoundRobinLoadBalance è½®è¯¢ï¼šè¿™ä¸ªçš„è¯é»˜è®¤å°±æ˜¯å‡åŒ€åœ°å°†æµé‡æ‰“åˆ°å„ä¸ªæœºå™¨ä¸Šå»ï¼Œä½†æ˜¯å¦‚æœå„ä¸ªæœºå™¨çš„æ€§èƒ½ä¸ä¸€æ ·ï¼Œå®¹æ˜“å¯¼è‡´æ€§èƒ½å·®çš„æœºå™¨è´Ÿè½½è¿‡é«˜ã€‚æ‰€ä»¥æ­¤æ—¶éœ€è¦è°ƒæ•´æƒé‡ï¼Œè®©æ€§èƒ½å·®çš„æœºå™¨æ‰¿è½½æƒé‡å°ä¸€äº›ï¼Œæµé‡å°‘ä¸€äº›ã€‚</li><li>LeastActiveLoadBalance æœ€å°‘æ´»è·ƒè°ƒç”¨æ•°ï¼šè¿™ä¸ªå°±æ˜¯è‡ªåŠ¨æ„ŸçŸ¥ä¸€ä¸‹ï¼Œå¦‚æœæŸä¸ªæœºå™¨æ€§èƒ½è¶Šå·®ï¼Œé‚£ä¹ˆæ¥æ”¶çš„è¯·æ±‚è¶Šå°‘ï¼Œè¶Šä¸æ´»è·ƒï¼Œæ­¤æ—¶å°±ä¼šç»™ä¸æ´»è·ƒçš„æ€§èƒ½å·®çš„æœºå™¨æ›´å°‘çš„è¯·æ±‚ã€‚</li><li>ConsistentHashLoadBalance ä¸€è‡´æ€§ Hashï¼šä¸€è‡´æ€§ Hash ç®—æ³•ï¼Œç›¸åŒå‚æ•°çš„è¯·æ±‚ä¸€å®šåˆ†å‘åˆ°ä¸€ä¸ª provider ä¸Šå»ï¼Œprovider æŒ‚æ‰çš„æ—¶å€™ï¼Œä¼šåŸºäºè™šæ‹ŸèŠ‚ç‚¹å‡åŒ€åˆ†é…å‰©ä½™çš„æµé‡ï¼ŒæŠ–åŠ¨ä¸ä¼šå¤ªå¤§ã€‚å¦‚æœä½ éœ€è¦çš„ä¸æ˜¯éšæœºè´Ÿè½½å‡è¡¡ï¼Œæ˜¯è¦ä¸€ç±»è¯·æ±‚éƒ½åˆ°ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‚£å°±èµ°è¿™ä¸ªä¸€è‡´æ€§ Hash ç­–ç•¥ã€‚</li></ul><h3 id="Dubbo-çš„å®¹é”™ç­–ç•¥"><a href="#Dubbo-çš„å®¹é”™ç­–ç•¥" class="headerlink" title="Dubbo çš„å®¹é”™ç­–ç•¥"></a>Dubbo çš„å®¹é”™ç­–ç•¥</h3><p>dubbo é›†ç¾¤çš„å…­ç§å®¹é”™ç­–ç•¥ï¼š</p><ol><li>failover cluster æ¨¡å¼ï¼šå¤±è´¥è‡ªåŠ¨åˆ‡æ¢ï¼Œè‡ªåŠ¨é‡è¯•å…¶ä»–æœºå™¨ï¼Œé»˜è®¤å°±æ˜¯è¿™ä¸ªï¼Œå¸¸è§äºè¯»æ“ä½œã€‚ï¼ˆå¤±è´¥é‡è¯•å…¶å®ƒæœºå™¨ï¼‰</li><li>failfast clusteræ¨¡å¼ï¼šä¸€æ¬¡è°ƒç”¨å¤±è´¥å°±ç«‹å³å¤±è´¥ï¼Œå¸¸è§äºå†™æ“ä½œã€‚ï¼ˆè°ƒç”¨å¤±è´¥å°±ç«‹å³å¤±è´¥ï¼‰</li><li>failsafe cluster æ¨¡å¼ï¼šå‡ºç°å¼‚å¸¸æ—¶å¿½ç•¥æ‰ï¼Œå¸¸ç”¨äºä¸é‡è¦çš„æ¥å£è°ƒç”¨ï¼Œæ¯”å¦‚è®°å½•æ—¥å¿—ã€‚</li><li>failback cluster æ¨¡å¼ï¼šå¤±è´¥äº†åå°è‡ªåŠ¨è®°å½•è¯·æ±‚ï¼Œç„¶åå®šæ—¶é‡å‘ï¼Œæ¯”è¾ƒé€‚åˆäºå†™æ¶ˆæ¯é˜Ÿåˆ—è¿™ç§ã€‚</li><li>forking cluster æ¨¡å¼ï¼šå¹¶è¡Œè°ƒç”¨å¤šä¸ª providerï¼Œåªè¦ä¸€ä¸ªæˆåŠŸå°±ç«‹å³è¿”å›ã€‚</li><li>broadcacst clusterï¼šé€ä¸ªè°ƒç”¨æ‰€æœ‰çš„ providerã€‚</li></ol><h3 id="Spring-å¾ªç¯ä¾èµ–æ€ä¹ˆè§£å†³çš„ï¼Œä¸ºä»€ä¹ˆä½¿ç”¨ä¸‰çº§ç¼“å­˜ï¼Ÿ"><a href="#Spring-å¾ªç¯ä¾èµ–æ€ä¹ˆè§£å†³çš„ï¼Œä¸ºä»€ä¹ˆä½¿ç”¨ä¸‰çº§ç¼“å­˜ï¼Ÿ" class="headerlink" title="Spring å¾ªç¯ä¾èµ–æ€ä¹ˆè§£å†³çš„ï¼Œä¸ºä»€ä¹ˆä½¿ç”¨ä¸‰çº§ç¼“å­˜ï¼Ÿ"></a>Spring å¾ªç¯ä¾èµ–æ€ä¹ˆè§£å†³çš„ï¼Œä¸ºä»€ä¹ˆä½¿ç”¨ä¸‰çº§ç¼“å­˜ï¼Ÿ</h3><p>Springæ— æ³•è§£å†³æ„é€ å™¨æ³¨å…¥çš„å¾ªç¯ä¾èµ–ï¼Œå¯ä»¥è§£å†³setteræ³¨å…¥çš„å¾ªç¯ä¾èµ–å¹¶ä¸”åªèƒ½è§£å†³å•ä¾‹beançš„å¾ªç¯ä¾èµ–</p><ol><li>å…ˆä»ä¸€çº§ç¼“å­˜singletonObjectsä¸­å»è·å–ã€‚ï¼ˆå¦‚æœè·å–åˆ°å°±ç›´æ¥returnï¼‰</li><li>å¦‚æœè·å–ä¸åˆ°æˆ–è€…å¯¹è±¡æ­£åœ¨åˆ›å»ºä¸­ï¼ˆisSingletonCurrentlyInCreation()ï¼‰ï¼Œé‚£å°±å†ä»äºŒçº§ç¼“å­˜earlySingletonObjectsä¸­è·å–ã€‚ï¼ˆå¦‚æœè·å–åˆ°å°±ç›´æ¥returnï¼‰</li><li>å¦‚æœè¿˜æ˜¯è·å–ä¸åˆ°ï¼Œä¸”å…è®¸singletonFactoriesï¼ˆallowEarlyReference=trueï¼‰é€šè¿‡getObject()è·å–ã€‚å°±ä»ä¸‰çº§ç¼“å­˜singletonFactory.getObject()è·å–ã€‚ï¼ˆå¦‚æœè·å–åˆ°äº†å°±ä»singletonFactoriesä¸­ç§»é™¤ï¼Œå¹¶ä¸”æ”¾è¿›earlySingletonObjectsã€‚å…¶å®ä¹Ÿå°±æ˜¯ä»ä¸‰çº§ç¼“å­˜ç§»åŠ¨ï¼ˆæ˜¯å‰ªåˆ‡ã€ä¸æ˜¯å¤åˆ¶å“¦~ï¼‰åˆ°äº†äºŒçº§ç¼“å­˜ï¼‰</li></ol><h3 id="Spring-Bean-ç”Ÿå‘½å‘¨æœŸ"><a href="#Spring-Bean-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Spring Bean ç”Ÿå‘½å‘¨æœŸ"></a>Spring Bean ç”Ÿå‘½å‘¨æœŸ</h3><p><a href="https://chivalry727.github.io/%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93-2/#more">å‚è€ƒé¢è¯•æ€»ç»“2</a>é‡Œçš„Spring Beanç”Ÿå‘½å‘¨æœŸæ€»ç»“</p><h3 id="Spring-ä¸¤ç§åŠ¨æ€ä»£ç†åŒºåˆ«"><a href="#Spring-ä¸¤ç§åŠ¨æ€ä»£ç†åŒºåˆ«" class="headerlink" title="Spring ä¸¤ç§åŠ¨æ€ä»£ç†åŒºåˆ«"></a>Spring ä¸¤ç§åŠ¨æ€ä»£ç†åŒºåˆ«</h3><ul><li>Spring JDKåŸç”ŸåŠ¨æ€ä»£ç†æ˜¯åŸºäºJavaåå°„å®ç°çš„ï¼ŒJavaåŠ¨æ€ä»£ç†æ˜¯åŸºäºæ¥å£çš„ï¼Œå¦‚æœå¯¹è±¡æ²¡æœ‰å®ç°æ¥å£ï¼ŒSpringå°±ä¼šä½¿ç”¨CGLIBåŠ¨æ€ä»£ç†</li></ul><ul><li>CGLIBæ˜¯ä¸€ä¸ªåŸºäºASMçš„å­—èŠ‚ç ç”Ÿæˆåº“ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨è¿è¡Œæ—¶å¯¹å­—èŠ‚ç è¿›è¡Œä¿®æ”¹å’ŒåŠ¨æ€ç”Ÿæˆã€‚CGLIBé€šè¿‡ç»§æ‰¿æ–¹å¼å®ç°ä»£ç†</li></ul><h3 id="Springçš„BeanPostProcessorå’ŒBeanFactoryPostProcessoråŒºåˆ«"><a href="#Springçš„BeanPostProcessorå’ŒBeanFactoryPostProcessoråŒºåˆ«" class="headerlink" title="Springçš„BeanPostProcessorå’ŒBeanFactoryPostProcessoråŒºåˆ«"></a>Springçš„BeanPostProcessorå’ŒBeanFactoryPostProcessoråŒºåˆ«</h3><p>BeanPostProcessoræ¥å£ï¼šåç½®beanå¤„ç†å™¨ï¼Œå…è®¸è‡ªå®šä¹‰ä¿®æ”¹æ–°çš„beanå®ä¾‹ï¼Œåº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡å¯ä»¥åœ¨å…¶beanå®šä¹‰ä¸­è‡ªåŠ¨æ£€æµ‹BeanPostProcessorç±»å‹çš„beanï¼Œå¹¶å°†å®ƒä»¬åº”ç”¨äºéšååˆ›å»ºçš„ä»»ä½•beanã€‚ï¼ˆä¾‹å¦‚ï¼šé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œäº†ä¸€ä¸ªè‡ªå®šä¹‰BeanPostProcessorç±»å‹çš„beanï¼Œä¸€ä¸ªUserç±»å‹çš„beanï¼Œåº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ä¼šåœ¨åˆ›å»ºUserå®ä¾‹ä¹‹åå¯¹Useråº”ç”¨BeanPostProcessorï¼‰ã€‚</p><p>BeanFactoryPostProcessoræ¥å£ï¼šåç½®å·¥å‚å¤„ç†å™¨ï¼Œå…è®¸è‡ªå®šä¹‰ä¿®æ”¹åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡çš„beanå®šä¹‰ï¼Œè°ƒæ•´beanå±æ€§å€¼ã€‚åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡å¯ä»¥åœ¨å…¶beanå®šä¹‰ä¸­è‡ªåŠ¨æ£€æµ‹BeanFactoryPostProcessorï¼Œå¹¶åœ¨åˆ›å»ºä»»ä½•éBeanFactoryPostProcessorç±»å‹beanä¹‹å‰åº”ç”¨å®ƒä»¬ï¼ˆä¾‹å¦‚ï¼šé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œäº†ä¸€ä¸ªè‡ªå®šä¹‰BeanFactoryPostProcessorç±»å‹çš„beanï¼Œä¸€ä¸ªUserç±»å‹çš„beanï¼Œåº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ä¼šåœ¨åˆ›å»ºUserå®ä¾‹ä¹‹å‰å¯¹Useråº”ç”¨BeanFactoryPostProcessorï¼‰</p><h3 id="Spring-AOP-å’Œ-AspectJ-AOP-åŒºåˆ«"><a href="#Spring-AOP-å’Œ-AspectJ-AOP-åŒºåˆ«" class="headerlink" title="Spring AOP å’Œ AspectJ AOP åŒºåˆ«"></a>Spring AOP å’Œ AspectJ AOP åŒºåˆ«</h3><h4 id="Spring-AOP"><a href="#Spring-AOP" class="headerlink" title="Spring AOP"></a>Spring AOP</h4><ol><li>Springæ˜¯åŸºäºåŠ¨æ€ä»£ç†æ¥å®ç°çš„AOPï¼Œé»˜è®¤å¦‚æœä½¿ç”¨æ¥å£ï¼Œå°±ç”¨JDKæä¾›çš„åŠ¨æ€ä»£ç†å®ç°ï¼›å¦‚æœæ˜¯æ–¹æ³•åˆ™ä½¿ç”¨CGLIBå®ç°</li><li>Spring AOPéœ€è¦ä¾èµ–IoCå®¹å™¨æ¥ç®¡ç†ï¼Œå¹¶ä¸”åªèƒ½ä½œç”¨äºSpringå®¹å™¨ï¼Œä½¿ç”¨çº¯Javaä»£ç å®ç°</li><li>åœ¨æ€§èƒ½ä¸Šï¼Œç”±äºSpring AOPæ˜¯åŸºäºåŠ¨æ€ä»£ç†æ¥å®ç°çš„ï¼Œåœ¨å®¹å™¨å¯åŠ¨æ—¶éœ€è¦ç”Ÿæˆä»£ç†å®ä¾‹ï¼Œåœ¨æ–¹æ³•è°ƒç”¨ä¸Šä¹Ÿä¼šå¢åŠ æ ˆçš„æ·±åº¦ï¼Œä½¿å¾—Spring AOPçš„æ€§èƒ½ä¸å¦‚AspectJ</li></ol><h4 id="AspectJ"><a href="#AspectJ" class="headerlink" title="AspectJ"></a>AspectJ</h4><ul><li>AspectJæ¥è‡ªäºEclipseåŸºé‡‘ä¼š</li><li>AspectJå±äºé™æ€ç»‡å…¥ï¼Œé€šè¿‡ä¿®æ”¹ä»£ç æ¥å®ç°ï¼Œæœ‰å¦‚ä¸‹å‡ ä¸ªç»‡å…¥çš„æ—¶æœºï¼š<ol><li>ç¼–è¯‘æœŸç»‡å…¥ï¼ˆCompile-time weavingï¼‰ï¼šå¦‚ç±»Aä½¿ç”¨AspectJæ·»åŠ ä¸€ä¸ªå±æ€§ï¼Œç±»Bå¼•ç”¨äº†å®ƒï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ç¼–è¯‘æœŸçš„æ—¶å€™è¿›è¡Œç»‡å…¥ï¼Œå¦åˆ™æ²¡æ³•ç¼–è¯‘ç±»B</li><li>ç¼–è¯‘åç»‡å…¥ï¼ˆPost-compile weavingï¼‰ï¼šä¹Ÿå°±æ˜¯ç”Ÿæˆäº†<code>.class</code>æ–‡ä»¶æˆ–å·²ç»æ‰“æˆäº†jaråŒ…ï¼Œè¿™ç§æƒ…å†µæˆ‘ä»¬éœ€è¦å¢å¼ºå¤„ç†çš„è¯ï¼Œå°±è¦ç”¨åˆ°ç¼–è¯‘åç»‡å…¥</li><li>ç±»åŠ è½½åç»‡å…¥ï¼ˆLoad-time weavingï¼‰ï¼šæŒ‡çš„æ˜¯åœ¨åŠ è½½ç±»çš„æ—¶å€™è¿›è¡Œç»‡å…¥ï¼Œè¦å®ç°è¿™ä¸ªæ—¶æœŸçš„ç»‡å…¥ï¼Œæœ‰å‡ ç§å¸¸è§çš„æ–¹æ³•ï¼š<ol><li>è‡ªå®šä¹‰ç±»åŠ è½½å™¨æ¥å¹²è¿™ä¸ªï¼Œè¿™ä¸ªåº”è¯¥æ˜¯æœ€å®¹æ˜“æƒ³åˆ°çš„åŠæ³•ï¼Œåœ¨è¢«ç»‡å…¥ç±»åŠ è½½åˆ°JVMå‰å»å¯¹å®ƒè¿›è¡ŒåŠ è½½ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨åŠ è½½åˆ°æ—¶å€™å®šä¹‰è¡Œä¸ºæ¥</li><li>åœ¨JVMå¯åŠ¨çš„æ—¶å€™æŒ‡å®šAspectJæä¾›çš„agent:<code>-javaagent:xxx/xxx/aspectjweaver.jar</code></li></ol></li></ol></li><li>AspectJå¯ä»¥åšSpring AOPå¹²ä¸äº†çš„äº‹æƒ…ï¼Œå®ƒæ˜¯AOPç¼–ç¨‹çš„å®Œå…¨è§£å†³æ–¹æ¡ˆï¼ŒSpring AOPåˆ™è‡´åŠ›äºè§£å†³ä¼ä¸šçº§å¼€å‘ä¸­æœ€æ™®éçš„AOPï¼ˆæ–¹æ³•ç»‡å…¥ï¼‰ã€‚è€Œä¸æ˜¯æˆä¸ºåƒAspectJä¸€æ ·çš„AOPæ–¹æ¡ˆ</li><li>å› ä¸ºAspectJåœ¨å®é™…è¿è¡Œä¹‹å‰å°±å®Œæˆäº†ç»‡å…¥ï¼Œæ‰€ä»¥è¯´å®ƒç”Ÿæˆçš„ç±»æ˜¯æ²¡æœ‰é¢å¤–è¿è¡Œæ—¶å¼€é”€çš„</li></ul><h3 id="HashMap-å¦‚ä½•è§£å†³hashç¢°æ’ï¼Œä»¥åŠä½•æ—¶æ‰©å®¹çš„"><a href="#HashMap-å¦‚ä½•è§£å†³hashç¢°æ’ï¼Œä»¥åŠä½•æ—¶æ‰©å®¹çš„" class="headerlink" title="HashMap å¦‚ä½•è§£å†³hashç¢°æ’ï¼Œä»¥åŠä½•æ—¶æ‰©å®¹çš„"></a>HashMap å¦‚ä½•è§£å†³hashç¢°æ’ï¼Œä»¥åŠä½•æ—¶æ‰©å®¹çš„</h3><p><strong>Hashå†²çª</strong>ï¼šç”±äºç”¨äºè®¡ç®—çš„æ•°æ®æ˜¯æ— é™çš„<code>H(key),keyå±äº(-âˆ,+âˆ)</code>,è€Œæ˜ å°„åˆ°åŒºé—´æ˜¯æœ‰é™çš„ï¼Œæ‰€ä»¥è‚¯å®šä¼šå­˜åœ¨ä¸¤ä¸ªkey:key1,key2ï¼ŒH(key1)=H(key2)ï¼Œè¿™å°±æ˜¯hashå†²çªã€‚ä¸€èˆ¬çš„è§£å†³Hashå†²çªæ–¹æ³•æœ‰:å¼€æ”¾å®šå€æ³•ã€å†å“ˆå¸Œæ³•ã€é“¾åœ°å€æ³•ï¼ˆæ‹‰é“¾æ³•ï¼‰ã€å»ºç«‹å…¬å…±æº¢å‡ºåŒºã€‚</p><p><strong>å¼€æ”¾åœ°å€æ³•</strong>ï¼šä¹Ÿç§°ä¸º<code>å†æ•£åˆ—æ³•</code>ï¼ŒåŸºæœ¬æ€æƒ³å°±æ˜¯ï¼Œå¦‚æœ<code>p=H(key)</code>å‡ºç°å†²çªæ—¶ï¼Œåˆ™ä»¥<code>p</code>ä¸ºåŸºç¡€ï¼Œå†æ¬¡hashï¼Œ<code>p1=H(p)</code>,å¦‚æœp1å†æ¬¡å‡ºç°å†²çªï¼Œåˆ™ä»¥p1ä¸ºåŸºç¡€ï¼Œä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªä¸å†²çªçš„å“ˆå¸Œåœ°å€<code>pi</code>ã€‚ å› æ­¤å¼€æ”¾å®šå€æ³•æ‰€éœ€è¦çš„hashè¡¨çš„é•¿åº¦è¦å¤§äºç­‰äºæ‰€éœ€è¦å­˜æ”¾çš„å…ƒç´ ï¼Œè€Œä¸”å› ä¸ºå­˜åœ¨å†æ¬¡hashï¼Œæ‰€ä»¥<code>åªèƒ½åœ¨åˆ é™¤çš„èŠ‚ç‚¹ä¸Šåšæ ‡è®°ï¼Œè€Œä¸èƒ½çœŸæ­£åˆ é™¤èŠ‚ç‚¹ã€‚</code></p><p>ç¼ºç‚¹ï¼šå®¹æ˜“äº§ç”Ÿå †ç§¯é—®é¢˜;ä¸é€‚åˆå¤§è§„æ¨¡çš„æ•°æ®å­˜å‚¨;æ’å…¥æ—¶ä¼šå‘ç”Ÿå¤šæ¬¡å†²çªçš„æƒ…å†µ;åˆ é™¤æ—¶è¦è€ƒè™‘ä¸è¦åˆ é™¤å…ƒç´ äº’ç›¸å†²çªçš„å¦ä¸€ä¸ªå…ƒç´ ï¼Œæ¯”è¾ƒå¤æ‚ã€‚</p><p><strong>å†å“ˆå¸Œæ³•ï¼ˆåŒé‡æ•£åˆ—ï¼Œå¤šé‡æ•£åˆ—ï¼‰</strong>ï¼šæä¾›å¤šä¸ªä¸åŒçš„hashå‡½æ•°ï¼Œå½“<code>R1=H1(key1)</code>å‘ç”Ÿå†²çªæ—¶ï¼Œå†è®¡ç®—<code>R2=H2(key1)</code>ï¼Œç›´åˆ°æ²¡æœ‰å†²çªä¸ºæ­¢ã€‚ è¿™æ ·åšè™½ç„¶ä¸æ˜“äº§ç”Ÿå †é›†ï¼Œä½†å¢åŠ äº†è®¡ç®—çš„æ—¶é—´ã€‚</p><p><strong>é“¾åœ°å€æ³•ï¼ˆæ‹‰é“¾æ³•ï¼‰</strong>ï¼šå°†å“ˆå¸Œå€¼ç›¸åŒçš„å…ƒç´ æ„æˆä¸€ä¸ªåŒä¹‰è¯çš„å•é“¾è¡¨,å¹¶å°†å•é“¾è¡¨çš„å¤´æŒ‡é’ˆå­˜æ”¾åœ¨å“ˆå¸Œè¡¨çš„ç¬¬iä¸ªå•å…ƒä¸­ï¼ŒæŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤ä¸»è¦åœ¨åŒä¹‰è¯é“¾è¡¨ä¸­è¿›è¡Œã€‚é“¾è¡¨æ³•é€‚ç”¨äºç»å¸¸è¿›è¡Œæ’å…¥å’Œåˆ é™¤çš„æƒ…å†µã€‚HashMapé‡‡ç”¨çš„å°±æ˜¯é“¾åœ°å€æ³•æ¥è§£å†³hashå†²çªã€‚(é“¾è¡¨é•¿åº¦å¤§äºç­‰äº8æ—¶è½¬ä¸ºçº¢é»‘æ ‘)</p><p><strong>å»ºç«‹å…¬å…±æº¢å‡ºåŒº</strong>ï¼šå°†å“ˆå¸Œè¡¨åˆ†ä¸ºå…¬å…±è¡¨å’Œæº¢å‡ºè¡¨ï¼Œå½“æº¢å‡ºå‘ç”Ÿæ—¶ï¼Œå°†æ‰€æœ‰æº¢å‡ºæ•°æ®ç»Ÿä¸€æ”¾åˆ°æº¢å‡ºåŒºã€‚</p><p><strong>ä½•æ—¶æ‰©å®¹</strong>ï¼šHashMapçš„å®¹é‡æ˜¯æœ‰é™çš„ã€‚å½“ç»è¿‡å¤šæ¬¡å…ƒç´ æ’å…¥çš„æ—¶å€™ï¼Œä½¿å¾—HashMapè¾¾åˆ°ä¸€å®šçš„é¥±å’Œåº¦ï¼ŒKeyæ˜ å°„ä½ç½®çš„å‡ ç‡ä¸æ–­å˜å¤§ã€‚è¿™ä¸ªæ—¶å€™ï¼ŒHashMapå°±éœ€è¦æ‰©å®¹äº†ï¼Œä¹Ÿå°±æ˜¯Resizeã€‚<strong>å½“ HashMap.size &gt;= Capacity*LoadFactor æ—¶ï¼ŒHashMapå¯èƒ½ä¼šè¿›è¡ŒResizeã€‚</strong></p><p>Hashmapçš„æ‰©å®¹éœ€è¦æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š<strong>å½“å‰æ•°æ®å­˜å‚¨çš„æ•°é‡ï¼ˆå³size()ï¼‰å¤§å°å¿…é¡»å¤§äºç­‰äºé˜ˆå€¼ï¼›å½“å‰åŠ å…¥çš„æ•°æ®æ˜¯å¦å‘ç”Ÿäº†hashå†²çªã€‚</strong></p><h3 id="ArrayListä¸LinkedListåŒºåˆ«"><a href="#ArrayListä¸LinkedListåŒºåˆ«" class="headerlink" title="ArrayListä¸LinkedListåŒºåˆ«"></a>ArrayListä¸LinkedListåŒºåˆ«</h3><ul><li>ArrayListåŸºäºæ•°ç»„å®ç°çš„åˆ—è¡¨</li></ul><ul><li>LinkeddListåŸºäºé“¾è¡¨å®ç°çš„åˆ—è¡¨</li></ul><h3 id="LinkedHashMapå¦‚ä½•å®ç°æœ‰åºçš„"><a href="#LinkedHashMapå¦‚ä½•å®ç°æœ‰åºçš„" class="headerlink" title="LinkedHashMapå¦‚ä½•å®ç°æœ‰åºçš„"></a>LinkedHashMapå¦‚ä½•å®ç°æœ‰åºçš„</h3><p>LinkedHashMapæ˜¯ç»§æ‰¿äºHashMapï¼Œæ˜¯åŸºäºHashMapå’ŒåŒå‘é“¾è¡¨æ¥å®ç°çš„ã€‚</p><p>HashMapæ˜¯æ— åºçš„ï¼›LinkedHashMapæœ‰åºçš„ï¼Œå¯åˆ†ä¸ºæ’å…¥é¡ºåºå’Œè®¿é—®é¡ºåºä¸¤ç§ã€‚å¦‚æœæ˜¯è®¿é—®é¡ºåºï¼Œé‚£putå’Œgetæ“ä½œå·²å­˜åœ¨çš„Entryæ—¶ï¼Œéƒ½ä¼šæŠŠEntryç§»åŠ¨åˆ°åŒå‘é“¾è¡¨çš„è¡¨å°¾(å…¶å®æ˜¯å…ˆåˆ é™¤å†æ’å…¥)ã€‚</p><p>LinkedHashMapå­˜å–æ•°æ®ï¼Œè¿˜æ˜¯è·ŸHashMapä¸€æ ·ä½¿ç”¨çš„Entry[]çš„æ–¹å¼ï¼ŒåŒå‘é“¾è¡¨åªæ˜¯ä¸ºäº†ä¿è¯é¡ºåºã€‚</p><h3 id="Queueçš„é˜»å¡é˜Ÿåˆ—ç”¨è¿‡å“ªå‡ ç§"><a href="#Queueçš„é˜»å¡é˜Ÿåˆ—ç”¨è¿‡å“ªå‡ ç§" class="headerlink" title="Queueçš„é˜»å¡é˜Ÿåˆ—ç”¨è¿‡å“ªå‡ ç§"></a>Queueçš„é˜»å¡é˜Ÿåˆ—ç”¨è¿‡å“ªå‡ ç§</h3><p>Javaæä¾›äº†7ä¸ªé˜»å¡é˜Ÿåˆ—ï¼š</p><ul><li>ArrayBlockingQueueï¼šä¸€ä¸ªç”±æ•°ç»„ç»“æ„ç»„æˆçš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—<ul><li>ArrayBlockingQueueæŒ‰ç…§å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„åŸåˆ™å¯¹å…ƒç´ è¿›è¡Œæ’åº</li><li>é»˜è®¤æƒ…å†µä¸‹ä¸ä¿è¯çº¿ç¨‹å…¬å¹³çš„è®¿é—®é˜Ÿåˆ—ï¼Œæ‰€è°“å…¬å¹³è®¿é—®é˜Ÿåˆ—æ˜¯æŒ‡é˜»å¡çš„çº¿ç¨‹ï¼Œå¯ä»¥æŒ‰ç…§å…ˆåé¡ºåºè®¿é—®é˜Ÿåˆ—</li><li>éå…¬å¹³æ€§æ˜¯å¯¹å…ˆç­‰å¾…çš„çº¿ç¨‹æ˜¯éå…¬å¹³çš„ï¼Œå½“é˜Ÿåˆ—å¯ç”¨æ—¶ï¼Œé˜»å¡çš„çº¿ç¨‹éƒ½å¯ä»¥äº‰å¤ºè®¿é—®é˜Ÿåˆ—çš„èµ„æ ¼</li><li>ä¸ºäº†ä¿è¯å…¬å¹³æ€§ï¼Œé€šå¸¸ä¼šé™ä½ååé‡</li></ul></li><li>LinkedBlockingQueueï¼šä¸€ä¸ªç”±é“¾è¡¨ç»“æ„ç»„æˆçš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—<ul><li>LinkedBlockingQueueé˜Ÿåˆ—é»˜è®¤å’Œæœ€å¤§é•¿åº¦ä¸ºInteger.MAX_VALUE</li><li>æ­¤é˜Ÿåˆ—ä¹Ÿæ˜¯æŒ‰ç…§å…ˆå…¥å…ˆå‡ºï¼ˆFIFOï¼‰çš„åŸåˆ™å¯¹å…ƒç´ è¿›è¡Œæ’åº</li></ul></li><li>PriorityBlockingQueueï¼šä¸€ä¸ªæ”¯æŒä¼˜å…ˆçº§æ’åºçš„æ— ç•Œé˜»å¡é˜Ÿåˆ—<ul><li>é»˜è®¤æƒ…å†µä¸‹å…ƒç´ é‡‡å–è‡ªç„¶é¡ºåºå‡åºæ’åˆ—</li><li>ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å®ç°compareTo()æ–¹æ³•æ¥æŒ‡å®šå…ƒç´ æ’åºè§„åˆ™ï¼Œæˆ–è€…åˆå§‹åŒ–æ—¶ï¼ŒæŒ‡å®šæ„é€ å‚æ•°Comparatoræ¥å¯¹å…ƒç´ è¿›è¡Œæ’åº</li><li>éœ€è¦æ³¨æ„çš„æ˜¯ä¸èƒ½ä¿è¯åŒä¼˜å…ˆçº§å…ƒç´ çš„é¡ºåº</li></ul></li><li>DelayQueueï¼šä¸€ä¸ªæ”¯æŒå»¶æ—¶è·å–å…ƒç´ çš„æ— ç•Œé˜»å¡é˜Ÿåˆ—<ul><li>DelayQueueé˜Ÿåˆ—ä½¿ç”¨PriorityQueueæ¥å®ç°</li><li>é˜Ÿåˆ—ä¸­çš„å…ƒç´ å¿…é¡»å®ç°Delayedæ¥å£ï¼Œåœ¨åˆ›å»ºå…ƒç´ æ—¶å¯ä»¥æŒ‡å®šå¤šä¹…æ‰èƒ½ä»é˜Ÿåˆ—ä¸­è·å–å½“å‰å…ƒç´ </li><li>åªæœ‰åœ¨å»¶è¿ŸæœŸæ»¡æ—¶æ‰èƒ½ä»é˜Ÿåˆ—ä¸­æå–å…ƒç´ </li></ul></li><li>SynchronousQueueï¼šä¸€ä¸ªä¸å­˜å‚¨å…ƒç´ çš„é˜»å¡é˜Ÿåˆ—<ul><li>æ˜¯ä¸€ä¸ªä¸å­˜å‚¨å…ƒç´ çš„é˜»å¡é˜Ÿåˆ—</li><li>æ¯ä¸ªputæ“ä½œå¿…é¡»ç­‰å¾…ä¸€ä¸ªtakeæ“ä½œï¼Œå¦åˆ™ä¸èƒ½ç»§ç»­æ·»åŠ å…ƒç´ </li><li>å®ƒæ”¯æŒå…¬å¹³è®¿é—®é˜Ÿåˆ—ï¼Œé»˜è®¤é‡‡ç”¨éå…¬å¹³æ€§ç­–ç•¥è®¿é—®é˜Ÿåˆ—</li><li>è¯¥é˜Ÿåˆ—éå¸¸é€‚åˆä¼ é€’æ€§åœºæ™¯</li></ul></li><li>LinkedTransferQueueï¼šä¸€ä¸ªç”±é“¾è¡¨ç»“æ„ç»„æˆçš„æ— ç•Œé˜»å¡é˜Ÿåˆ—<ul><li>æ˜¯ä¸€ä¸ªç”±é“¾è¡¨ç»“æ„ç»„æˆçš„æ— ç•Œé˜»å¡TransferQueueé˜Ÿåˆ—</li><li>ç›¸æ¯”äºå…¶ä»–é˜»å¡é˜Ÿåˆ—ï¼ŒLinkedTransferQueueå¤šä¸ªtryTransferå’Œtransferæ–¹æ³•</li></ul></li><li>LinkedBlockingDequeï¼šä¸€ä¸ªç”±é“¾è¡¨ç»“æ„ç»„æˆçš„åŒå‘é˜»å¡é˜Ÿåˆ—<ul><li>æ˜¯ä¸€ä¸ªç”±é“¾è¡¨ç»“æ„ç»„æˆçš„åŒå‘é˜»å¡é˜Ÿåˆ—</li><li>æ‰€è°“åŒå‘é˜Ÿåˆ—æŒ‡çš„æ˜¯å¯ä»¥ä»é˜Ÿåˆ—çš„ä¸¤ç«¯æ’å…¥å’Œç§»å‡ºå…ƒç´ </li><li>åŒå‘é˜Ÿåˆ—å› ä¸ºå¤šäº†ä¸€ä¸ªæ“ä½œé˜Ÿåˆ—çš„å…¥å£ã€åœ¨å¤šçº¿ç¨‹åŒæ—¶å…¥é˜Ÿæ—¶ï¼Œä¹Ÿå°±å‡å°‘äº†ä¸€åŠçš„ç«äº‰</li><li>åœ¨åˆå§‹åŒ–LinkedBlockingDequeæ—¶å¯ä»¥è®¾ç½®å®¹é‡é˜²æ­¢å…¶è¿‡åº¦è†¨èƒ€</li><li>å¦å¤–åŒå‘é˜»å¡é˜Ÿåˆ—å¯ä»¥è¿ç”¨åœ¨â€œå·¥ä½œçªƒå–â€æ¨¡å¼ä¸­</li></ul></li></ul><h3 id="AQSçš„å®ç°åŸç†"><a href="#AQSçš„å®ç°åŸç†" class="headerlink" title="AQSçš„å®ç°åŸç†"></a>AQSçš„å®ç°åŸç†</h3><h4 id="ä»€ä¹ˆæ˜¯AQS"><a href="#ä»€ä¹ˆæ˜¯AQS" class="headerlink" title="ä»€ä¹ˆæ˜¯AQS"></a>ä»€ä¹ˆæ˜¯AQS</h4><p>AQSå…¨ç§°ä¸ºAbstractQueuedSynchronizerï¼Œå®ƒæä¾›äº†ä¸€ä¸ªFIFOé˜Ÿåˆ—ï¼Œå¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªç”¨æ¥å®ç°åŒæ­¥é”ä»¥åŠå…¶ä»–æ¶‰åŠåˆ°åŒæ­¥åŠŸèƒ½çš„æ ¸å¿ƒç»„ä»¶ï¼Œå¸¸è§çš„æœ‰ï¼šReentrantLockã€CountDownLatchã€ä¿¡å·é‡ç­‰ã€‚AQSæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä¸»è¦æ˜¯é€šè¿‡ç»§æ‰¿çš„æ–¹å¼æ¥ä½¿ç”¨ï¼Œå®ƒæœ¬èº«æ²¡æœ‰å®ç°ä»»ä½•çš„åŒæ­¥æ¥å£ï¼Œä»…ä»…æ˜¯å®šä¹‰äº†åŒæ­¥çŠ¶æ€çš„è·å–ä»¥åŠé‡Šæ”¾çš„æ–¹æ³•æ¥æä¾›è‡ªå®šä¹‰çš„åŒæ­¥ç»„ä»¶ã€‚</p><h4 id="AQSæä¾›çš„åŠŸèƒ½"><a href="#AQSæä¾›çš„åŠŸèƒ½" class="headerlink" title="AQSæä¾›çš„åŠŸèƒ½"></a>AQSæä¾›çš„åŠŸèƒ½</h4><p>ä»ä½¿ç”¨å±‚é¢æ¥è¯´ï¼ŒAQSçš„åŠŸèƒ½åˆ†ä¸ºä¸¤ç§ï¼šç‹¬å å’Œå…±äº«</p><ul><li>ç‹¬å é”ï¼šæ¯æ¬¡åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹æŒæœ‰é”ï¼Œå¦‚ï¼šReentrantLock</li><li>å…±äº«é”ï¼šå…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶è·å–é”ï¼Œå¹¶å‘è®¿é—®å…±äº«èµ„æºï¼Œå¦‚ï¼šReentrantReadWriteLock</li></ul><h4 id="AQSçš„å†…éƒ¨å®ç°"><a href="#AQSçš„å†…éƒ¨å®ç°" class="headerlink" title="AQSçš„å†…éƒ¨å®ç°"></a>AQSçš„å†…éƒ¨å®ç°</h4><p>AQSçš„å®ç°ä¾èµ–å†…éƒ¨çš„åŒæ­¥é˜Ÿåˆ—,ä¹Ÿå°±æ˜¯FIFOçš„åŒå‘é˜Ÿåˆ—ï¼Œå¦‚æœå½“å‰çº¿ç¨‹ç«äº‰é”å¤±è´¥ï¼Œé‚£ä¹ˆAQSä¼šæŠŠå½“å‰çº¿ç¨‹ä»¥åŠç­‰å¾…çŠ¶æ€ä¿¡æ¯æ„é€ æˆä¸€ä¸ªNodeåŠ å…¥åˆ°åŒæ­¥é˜Ÿåˆ—ä¸­ï¼ŒåŒæ—¶å†é˜»å¡è¯¥çº¿ç¨‹ã€‚å½“è·å–é”çš„çº¿ç¨‹é‡Šæ”¾é”ä»¥åï¼Œä¼šä»é˜Ÿåˆ—ä¸­å”¤é†’ä¸€ä¸ªé˜»å¡çš„èŠ‚ç‚¹(çº¿ç¨‹)ã€‚</p><p>AQSé˜Ÿåˆ—å†…éƒ¨ç»´æŠ¤çš„æ˜¯ä¸€ä¸ªFIFOçš„åŒå‘é“¾è¡¨ï¼Œè¿™ç§ç»“æ„çš„ç‰¹ç‚¹æ˜¯æ¯ä¸ªæ•°æ®ç»“æ„éƒ½æœ‰ä¸¤ä¸ªæŒ‡é’ˆï¼Œåˆ†åˆ«æŒ‡å‘ç›´æ¥çš„åç»§èŠ‚ç‚¹å’Œç›´æ¥å‰é©±èŠ‚ç‚¹ã€‚æ‰€ä»¥åŒå‘é“¾è¡¨å¯ä»¥ä»ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹å¾ˆæ–¹ä¾¿çš„è®¿é—®å‰é©±å’Œåç»§ã€‚æ¯ä¸ªNodeå…¶å®æ˜¯ç”±çº¿ç¨‹å°è£…ï¼Œå½“çº¿ç¨‹äº‰æŠ¢é”å¤±è´¥åä¼šå°è£…æˆNodeåŠ å…¥åˆ°ASQé˜Ÿåˆ—ä¸­å»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        <span class="comment">/** æŒ‡ç¤ºèŠ‚ç‚¹æ­£åœ¨å…±äº«æ¨¡å¼ä¸‹ç­‰å¾…çš„æ ‡è®° */</span></span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Node</span> <span class="variable">SHARED</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>();</span><br><span class="line">        <span class="comment">/** æŒ‡ç¤ºèŠ‚ç‚¹æ­£åœ¨ä»¥ç‹¬å æ¨¡å¼ç­‰å¾…çš„æ ‡è®° */</span></span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Node</span> <span class="variable">EXCLUSIVE</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/** waitStatuså€¼ï¼ŒæŒ‡ç¤ºçº¿ç¨‹å·²å–æ¶ˆ */</span></span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">CANCELLED</span> <span class="operator">=</span>  <span class="number">1</span>;</span><br><span class="line">        <span class="comment">/** waitStatuså€¼ï¼ŒæŒ‡ç¤ºåç»­çº¿ç¨‹éœ€è¦é‡Šæ”¾ */</span></span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">SIGNAL</span>    <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="comment">/** waitStatuså€¼ï¼ŒæŒ‡ç¤ºçº¿ç¨‹æ­£åœ¨ç­‰å¾…æ¡ä»¶ */</span></span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">CONDITION</span> <span class="operator">=</span> -<span class="number">2</span>;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * waitStatuså€¼ï¼ŒæŒ‡ç¤ºä¸‹ä¸€ä¸ªacquireSharedåº”è¯¥æ— æ¡ä»¶ä¼ æ’­</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">PROPAGATE</span> <span class="operator">=</span> -<span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">volatile</span> <span class="type">int</span> waitStatus;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// å‰é©±èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">volatile</span> Node prev;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åç½®èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">volatile</span> Node next;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * ä½¿è¯¥èŠ‚ç‚¹æ’é˜Ÿçš„çº¿ç¨‹ã€‚ åœ¨æ„é€ ä¸Šåˆå§‹åŒ–ï¼Œä½¿ç”¨åæ¶ˆå¤±ã€‚</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">volatile</span> Thread thread;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å­˜å‚¨åœ¨conditioné˜Ÿåˆ—ä¸­çš„åç»§èŠ‚ç‚¹</span></span><br><span class="line">        Node nextWaiter;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * å¦‚æœèŠ‚ç‚¹åœ¨å…±äº«æ¨¡å¼ä¸‹ç­‰å¾…ï¼Œåˆ™è¿”å›trueã€‚</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">final</span> <span class="type">boolean</span> <span class="title function_">isShared</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> nextWaiter == SHARED;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * è¿”å›ä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœä¸ºnullï¼Œåˆ™æŠ›å‡ºNullPointerExceptionã€‚ </span></span><br><span class="line"><span class="comment">         * ç©ºæ£€æŸ¥å¯èƒ½ä¼šè¢«å¿½ç•¥ï¼Œä½†æ˜¯å®ƒå¯ä»¥å¸®åŠ©VMã€‚</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@return</span> the predecessor of this node</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">final</span> Node <span class="title function_">predecessor</span><span class="params">()</span> <span class="keyword">throws</span> NullPointerException &#123;</span><br><span class="line">            <span class="type">Node</span> <span class="variable">p</span> <span class="operator">=</span> prev;</span><br><span class="line">            <span class="keyword">if</span> (p == <span class="literal">null</span>)</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NullPointerException</span>();</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="keyword">return</span> p;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Node() &#123;    <span class="comment">// ç”¨äºå»ºç«‹åˆå§‹æ ‡å¤´æˆ–SHAREDæ ‡è®°</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Node(Thread thread, Node mode) &#123;     <span class="comment">// ç”±addWaiterä½¿ç”¨</span></span><br><span class="line">            <span class="built_in">this</span>.nextWaiter = mode;</span><br><span class="line">            <span class="built_in">this</span>.thread = thread;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Node(Thread thread, <span class="type">int</span> waitStatus) &#123; <span class="comment">// æ ¹æ®æ¡ä»¶ä½¿ç”¨</span></span><br><span class="line">            <span class="built_in">this</span>.waitStatus = waitStatus;</span><br><span class="line">            <span class="built_in">this</span>.thread = thread;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="CASçš„åŸç†"><a href="#CASçš„åŸç†" class="headerlink" title="CASçš„åŸç†"></a>CASçš„åŸç†</h3><p>CASå…¨ç§°æ˜¯Compare and Swapï¼Œå³æ¯”è¾ƒå¹¶äº¤æ¢ï¼Œæ˜¯é€šè¿‡åŸå­æŒ‡ä»¤æ¥å®ç°å¤šçº¿ç¨‹çš„åŒæ­¥åŠŸèƒ½ï¼Œå°†è·å–å­˜å‚¨åœ¨å†…å­˜åœ°å€çš„åŸå€¼å’ŒæŒ‡å®šçš„å†…å­˜åœ°å€è¿›è¡Œæ¯”è¾ƒï¼Œåªæœ‰å½“ä»–ä»¬ç›¸ç­‰æ—¶ï¼Œäº¤æ¢æŒ‡å®šçš„é¢„æœŸå€¼å’Œå†…å­˜ä¸­çš„å€¼ï¼Œè¿™ä¸ªæ“ä½œæ˜¯åŸå­æ“ä½œï¼Œè‹¥ä¸ç›¸ç­‰ï¼Œåˆ™é‡æ–°è·å–å­˜å‚¨åœ¨å†…å­˜åœ°å€çš„åŸå€¼ã€‚</p><p>CASæ“ä½œéƒ½æ˜¯ä½¿ç”¨çš„Unsafeç±»çš„æ–¹æ³•é‡Œè®¾ç½®ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> <span class="type">boolean</span> <span class="title function_">compareAndSwapObject</span><span class="params">(Object var1, <span class="type">long</span> var2, Object var4, Object var5)</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> <span class="type">boolean</span> <span class="title function_">compareAndSwapInt</span><span class="params">(Object var1, <span class="type">long</span> var2, <span class="type">int</span> var4, <span class="type">int</span> var5)</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">native</span> <span class="type">boolean</span> <span class="title function_">compareAndSwapLong</span><span class="params">(Object var1, <span class="type">long</span> var2, <span class="type">long</span> var4, <span class="type">long</span> var6)</span>;</span><br></pre></td></tr></table></figure><h3 id="äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Œä»¥åŠåˆ†åˆ«è§£å†³äº†ä»€ä¹ˆ"><a href="#äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Œä»¥åŠåˆ†åˆ«è§£å†³äº†ä»€ä¹ˆ" class="headerlink" title="äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Œä»¥åŠåˆ†åˆ«è§£å†³äº†ä»€ä¹ˆ"></a>äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Œä»¥åŠåˆ†åˆ«è§£å†³äº†ä»€ä¹ˆ</h3><table><thead><tr><th align="center">äº‹åŠ¡éš”ç¦»çº§åˆ«</th><th align="center">è„è¯»</th><th align="center">ä¸å¯é‡å¤è¯»</th><th align="center">å¹»è¯»</th></tr></thead><tbody><tr><td align="center">Read-uncommitted</td><td align="center">æ˜¯</td><td align="center">æ˜¯</td><td align="center">æ˜¯</td></tr><tr><td align="center">Read-committed</td><td align="center">å¦</td><td align="center">æ˜¯</td><td align="center">æ˜¯</td></tr><tr><td align="center">Repeatable-read</td><td align="center">å¦</td><td align="center">å¦</td><td align="center">æ˜¯</td></tr><tr><td align="center">Serializable</td><td align="center">å¦</td><td align="center">å¦</td><td align="center">å¦</td></tr></tbody></table><h3 id="Mysqlé™¤äº†å¯é‡å¤è¯»çš„éš”ç¦»çº§åˆ«è¿˜æœ‰å“ªäº›ï¼Ÿ"><a href="#Mysqlé™¤äº†å¯é‡å¤è¯»çš„éš”ç¦»çº§åˆ«è¿˜æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="Mysqlé™¤äº†å¯é‡å¤è¯»çš„éš”ç¦»çº§åˆ«è¿˜æœ‰å“ªäº›ï¼Ÿ"></a>Mysqlé™¤äº†å¯é‡å¤è¯»çš„éš”ç¦»çº§åˆ«è¿˜æœ‰å“ªäº›ï¼Ÿ</h3><p>è¿˜æœ‰è¯»æœªæäº¤ã€è¯»å·²æäº¤ã€ä¸²è¡ŒåŒ–è¿™äº›éš”ç¦»çº§åˆ«</p><h3 id="Mysql-æ—¥å¿—ç±»å‹"><a href="#Mysql-æ—¥å¿—ç±»å‹" class="headerlink" title="Mysql æ—¥å¿—ç±»å‹"></a>Mysql æ—¥å¿—ç±»å‹</h3><p>é‡åšæ—¥å¿—ï¼ˆredo logï¼‰ï¼šç¡®ä¿äº‹åŠ¡çš„æŒä¹…æ€§ã€‚redoæ—¥å¿—è®°å½•äº‹åŠ¡æ‰§è¡Œåçš„çŠ¶æ€ï¼Œç”¨æ¥æ¢å¤æœªå†™å…¥data fileçš„å·²æˆåŠŸäº‹åŠ¡æ›´æ–°çš„æ•°æ®ã€‚é˜²æ­¢åœ¨å‘ç”Ÿæ•…éšœçš„æ—¶é—´ç‚¹ï¼Œå°šæœ‰è„é¡µæœªå†™å…¥ç£ç›˜ï¼Œåœ¨é‡å¯<a href="https://www.2cto.com/database/MySQL/">mysql</a>æœåŠ¡çš„æ—¶å€™ï¼Œæ ¹æ®redo logè¿›è¡Œé‡åšï¼Œä»è€Œè¾¾åˆ°äº‹åŠ¡çš„æŒä¹…æ€§è¿™ä¸€ç‰¹æ€§ã€‚</p><p>å›æ»šæ—¥å¿—ï¼ˆundo logï¼‰ï¼šä¿è¯æ•°æ®çš„åŸå­æ€§ï¼Œä¿å­˜äº†äº‹åŠ¡å‘ç”Ÿä¹‹å‰çš„æ•°æ®çš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œå¯ä»¥ç”¨äºå›æ»šï¼ŒåŒæ—¶å¯ä»¥æä¾›å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ä¸‹çš„è¯»ï¼ˆMVCCï¼‰ï¼Œä¹Ÿå³éé”å®šè¯»ã€‚</p><p>äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆbinlogï¼‰ï¼šç”¨äºå¤åˆ¶ï¼Œåœ¨ä¸»ä»å¤åˆ¶ä¸­ï¼Œä»åº“åˆ©ç”¨ä¸»åº“ä¸Šçš„binlogè¿›è¡Œé‡æ’­ï¼Œå®ç°ä¸»ä»åŒæ­¥ã€‚ç”¨äºæ•°æ®åº“çš„åŸºäºæ—¶é—´ç‚¹çš„è¿˜åŸã€‚</p><p>é”™è¯¯æ—¥å¿—ï¼ˆerrorlogï¼‰ï¼šé”™è¯¯æ—¥å¿—è®°å½•ç€mysqldå¯åŠ¨å’Œåœæ­¢,ä»¥åŠæœåŠ¡å™¨åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿçš„é”™è¯¯çš„ç›¸å…³ä¿¡æ¯ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œç³»ç»Ÿè®°å½•é”™è¯¯æ—¥å¿—çš„åŠŸèƒ½æ˜¯å…³é—­çš„ï¼Œé”™è¯¯ä¿¡æ¯è¢«è¾“å‡ºåˆ°æ ‡å‡†é”™è¯¯è¾“å‡ºã€‚</p><p>æ…¢æŸ¥è¯¢æ—¥å¿—ï¼ˆslow query logï¼‰ï¼šæ…¢æ—¥å¿—è®°å½•æ‰§è¡Œæ—¶é—´è¿‡é•¿å’Œæ²¡æœ‰ä½¿ç”¨ç´¢å¼•çš„æŸ¥è¯¢è¯­å¥ï¼ŒæŠ¥é”™selectã€updateã€deleteä»¥åŠinsertè¯­å¥ï¼Œæ…¢æ—¥å¿—åªä¼šè®°å½•æ‰§è¡ŒæˆåŠŸçš„è¯­å¥ã€‚</p><p>ä¸€èˆ¬æŸ¥è¯¢æ—¥å¿—ï¼ˆgeneral logï¼‰ï¼šè®°å½•äº†æœåŠ¡å™¨æ¥æ”¶åˆ°çš„æ¯ä¸€ä¸ªæŸ¥è¯¢æˆ–æ˜¯å‘½ä»¤ï¼Œæ— è®ºè¿™äº›æŸ¥è¯¢æˆ–æ˜¯å‘½ä»¤æ˜¯å¦æ­£ç¡®ç”šè‡³æ˜¯å¦åŒ…å«è¯­æ³•é”™è¯¯ï¼Œgeneral log éƒ½ä¼šå°†å…¶è®°å½•ä¸‹æ¥ ï¼Œè®°å½•çš„æ ¼å¼ä¸º {Time ï¼ŒId ï¼ŒCommandï¼ŒArgument }ã€‚ä¹Ÿæ­£å› ä¸ºmysqlæœåŠ¡å™¨éœ€è¦ä¸æ–­åœ°è®°å½•æ—¥å¿—ï¼Œå¼€å¯General logä¼šäº§ç”Ÿä¸å°çš„ç³»ç»Ÿå¼€é”€ã€‚ å› æ­¤ï¼ŒMysqlé»˜è®¤æ˜¯æŠŠGeneral logå…³é—­çš„ã€‚</p><p>ä¸­ç»§æ—¥å¿—ï¼ˆrelay logï¼‰ï¼šä¸­ç»§æ—¥å¿—æ˜¯è¿æ¥mastertå’Œslaveçš„ä¿¡æ¯ï¼Œå®ƒæ˜¯å¤åˆ¶çš„æ ¸å¿ƒï¼ŒI/Oçº¿ç¨‹å°†æ¥è‡ªmasterçš„äº‹ä»¶å­˜å‚¨åˆ°ä¸­ç»§æ—¥å¿—ä¸­ï¼Œä¸­ç»§æ—¥å¿—å……å½“ç¼“å†²ï¼Œè¿™æ ·masterä¸å¿…ç­‰å¾…slaveæ‰§è¡Œå®Œæˆå°±å¯ä»¥å‘é€ä¸‹ä¸€ä¸ªäº‹ä»¶ã€‚</p><h3 id="Mysqlç´¢å¼•ä¸ºä»€ä¹ˆä½¿ç”¨B-tree"><a href="#Mysqlç´¢å¼•ä¸ºä»€ä¹ˆä½¿ç”¨B-tree" class="headerlink" title="Mysqlç´¢å¼•ä¸ºä»€ä¹ˆä½¿ç”¨B+tree"></a>Mysqlç´¢å¼•ä¸ºä»€ä¹ˆä½¿ç”¨B+tree</h3><ul><li>Bæ ‘èƒ½è§£å†³çš„é—®é¢˜ï¼ŒB+æ ‘éƒ½èƒ½è§£å†³ï¼Œä¸”èƒ½å¤Ÿæ›´å¥½çš„è§£å†³ï¼Œé™ä½äº†æ ‘çš„é«˜åº¦ï¼Œå¢åŠ èŠ‚ç‚¹çš„æ•°æ®å­˜å‚¨é‡ã€‚</li><li>B+æ ‘çš„æ‰«åº“å’Œæ‰«è¡¨èƒ½åŠ›æ›´å¼ºï¼Œå¦‚æœæ ¹æ®ç´¢å¼•å»æ ¹æ®æ•°æ®è¡¨æ‰«æï¼Œå¯¹Bæ ‘æ‰«æï¼Œéœ€è¦æ•´é¢—æ ‘éå†ï¼ŒB+æ ‘åªéœ€è¦éå†æ‰€æœ‰çš„å¶å­èŠ‚ç‚¹</li><li>B+æ ‘çš„ç£ç›˜è¯»å†™èƒ½åŠ›æ›´å¼ºï¼Œæ ¹ç»“ç‚¹å’Œæ”¯èŠ‚ç‚¹ä¸ä¿å­˜æ•°æ®åŒºï¼Œæ‰€æœ‰çš„æ ¹ç»“ç‚¹å’Œæ”¯èŠ‚ç‚¹åŒæ ·å¤§å°çš„æƒ…å†µä¸‹ï¼Œä¿å­˜çš„å…³é”®å­—æ›´å¤šï¼Œå¶å­ç»“ç‚¹ä¸å­˜å­èŠ‚ç‚¹çš„å¼•ç”¨ï¼Œæ‰€ä»¥ï¼ŒB+æ ‘è¯»å†™ä¸€æ¬¡ç£ç›˜åŠ è½½çš„å…³é”®å­—æ›´å¤š</li><li>B+æ ‘å…·æœ‰å¤©ç„¶çš„æ’åºåŠŸèƒ½</li><li>B+æ ‘çš„æŸ¥è¯¢æ•ˆç‡æ›´åŠ ç¨³å®šï¼Œæ¯æ¬¡æŸ¥è¯¢æ•°æ®ï¼ŒæŸ¥è¯¢IOæ¬¡æ•°æ˜¯ç¨³å®šçš„</li></ul><h3 id="Mysqlçš„æœ€å·¦åŒ¹é…åŸåˆ™æ˜¯ä»€ä¹ˆ"><a href="#Mysqlçš„æœ€å·¦åŒ¹é…åŸåˆ™æ˜¯ä»€ä¹ˆ" class="headerlink" title="Mysqlçš„æœ€å·¦åŒ¹é…åŸåˆ™æ˜¯ä»€ä¹ˆ"></a>Mysqlçš„æœ€å·¦åŒ¹é…åŸåˆ™æ˜¯ä»€ä¹ˆ</h3><ul><li><p>æœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™ï¼Œéå¸¸é‡è¦çš„åŸåˆ™ï¼Œmysqlä¼šä¸€ç›´å‘å³åŒ¹é…ç›´åˆ°é‡åˆ°èŒƒå›´æŸ¥è¯¢(&gt;ã€&lt;ã€betweenã€like)å°±åœæ­¢åŒ¹é…ï¼Œæ¯”å¦‚a = 1 and b = 2 and c &gt; 3 and d = 4 å¦‚æœå»ºç«‹(a,b,c,d)é¡ºåºçš„ç´¢å¼•ï¼Œdæ˜¯ç”¨ä¸åˆ°ç´¢å¼•çš„ï¼Œå¦‚æœå»ºç«‹(a,b,d,c)çš„ç´¢å¼•åˆ™éƒ½å¯ä»¥ç”¨åˆ°ï¼Œa,b,dçš„é¡ºåºå¯ä»¥ä»»æ„è°ƒæ•´ã€‚</p></li><li><p>=å’Œinå¯ä»¥ä¹±åºï¼Œæ¯”å¦‚a = 1 and b = 2 and c = 3 å»ºç«‹(a,b,c)ç´¢å¼•å¯ä»¥ä»»æ„é¡ºåºï¼Œmysqlçš„æŸ¥è¯¢ä¼˜åŒ–å™¨ä¼šå¸®ä½ ä¼˜åŒ–æˆç´¢å¼•å¯ä»¥è¯†åˆ«çš„å½¢å¼ã€‚</p></li></ul><h3 id="Mysqlçš„é”æœ‰å“ªäº›"><a href="#Mysqlçš„é”æœ‰å“ªäº›" class="headerlink" title="Mysqlçš„é”æœ‰å“ªäº›"></a>Mysqlçš„é”æœ‰å“ªäº›</h3><h4 id="å‚è€ƒå®˜æ–¹æ–‡æ¡£"><a href="#å‚è€ƒå®˜æ–¹æ–‡æ¡£" class="headerlink" title="å‚è€ƒå®˜æ–¹æ–‡æ¡£"></a><a href="https://docs.oracle.com/cd/E17952_01/mysql-5.5-en/innodb-locking.html#innodb-shared-exclusive-locks">å‚è€ƒå®˜æ–¹æ–‡æ¡£</a></h4><p><a href="https://learnku.com/articles/39212?order_by=vote_count&">å‚è€ƒå…¶ä»–æ–‡æ¡£åˆ†äº«</a></p><h4 id="å…±äº«é”å’Œæ’ä»–é”"><a href="#å…±äº«é”å’Œæ’ä»–é”" class="headerlink" title="å…±äº«é”å’Œæ’ä»–é”"></a>å…±äº«é”å’Œæ’ä»–é”</h4><p>åœ¨InnoDBä¸­æ˜¯å®ç°æ ‡å‡†çš„è¡Œçº§é”å®šï¼Œå…¶ä¸­æœ‰ä¸¤ç§ç±»å‹çš„é”å®šï¼šå…±äº«ï¼ˆSï¼‰é”å®šå’Œæ’ä»–ï¼ˆXï¼‰é”å®šã€‚</p><ul><li>è¯»é”ï¼ˆread lockï¼‰ï¼Œä¹Ÿå«å…±äº«é”ï¼ˆshared lockï¼‰å…è®¸ä¸€ä¸ªäº‹åŠ¡å»è¯»ä¸€è¡Œï¼Œé˜»æ­¢å…¶ä»–äº‹åŠ¡è·å¾—ç›¸åŒæ•°æ®é›†çš„æ’ä»–é”</li></ul><ul><li>å†™é”ï¼ˆwrite lockï¼‰ï¼Œä¹Ÿå«æ’ä»–é”ï¼ˆexclusive lockï¼‰å…è®¸è·å¾—æ’ä»–é”çš„äº‹åŠ¡æ›´æ–°æ•°æ®ï¼Œé˜»æ­¢å…¶ä»–äº‹åŠ¡å–å¾—ç›¸åŒæ•°æ®é›†çš„å…±äº«é”å’Œæ’ä»–é”</li></ul><h4 id="æ„å‘é”"><a href="#æ„å‘é”" class="headerlink" title="æ„å‘é”"></a>æ„å‘é”</h4><p>InnoDBæ”¯æŒå¤šç§ç²’åº¦é”å®šï¼Œå…è®¸è¡Œé”å’Œè¡¨é”å¹¶å­˜ã€‚ ä¾‹å¦‚ï¼Œè¯¸å¦‚LOCK TABLES â€¦ WRITEä¹‹ç±»çš„è¯­å¥å¯¹æŒ‡å®šè¡¨é‡‡ç”¨æ’ä»–é”ï¼ˆXé”ï¼‰ã€‚ ä¸ºäº†ä½¿åœ¨å¤šä¸ªç²’åº¦çº§åˆ«ä¸Šçš„é”å®šå˜å¾—åˆ‡å®å¯è¡Œï¼ŒInnoDBä½¿ç”¨äº†æ„å›¾é”å®šã€‚ æ„å‘é”æ˜¯è¡¨çº§é”ï¼ŒæŒ‡ç¤ºäº‹åŠ¡ç¨åå¯¹è¡¨ä¸­çš„è¡Œéœ€è¦å“ªç§ç±»å‹çš„é”ï¼ˆå…±äº«é”æˆ–æ’ä»–é”ï¼‰ã€‚ æœ‰ä¸¤ç§ç±»å‹çš„æ„å›¾é”ï¼š</p><ul><li>æ„å‘å…±äº«é”ï¼ˆISï¼‰ä¸€ä¸ªäº‹åŠ¡ç»™ä¸€ä¸ªæ•°æ®è¡ŒåŠ å…±äº«é”æ—¶ï¼Œå¿…é¡»å…ˆè·å¾—è¡¨çš„ISé”</li></ul><ul><li>æ„å‘æ’å®ƒé”ï¼ˆIXï¼‰ä¸€ä¸ªäº‹åŠ¡ç»™ä¸€ä¸ªæ•°æ®è¡ŒåŠ æ’ä»–é”æ—¶ï¼Œå¿…é¡»å…ˆè·å¾—è¯¥è¡¨çš„IXé”</li></ul><h4 id="è®°å½•é”"><a href="#è®°å½•é”" class="headerlink" title="è®°å½•é”"></a>è®°å½•é”</h4><p>è®°å½•é”å®šæ˜¯å¯¹ç´¢å¼•è®°å½•çš„é”å®šã€‚ ä¾‹å¦‚<strong>SELECT c1 FROM t WHERE c1 = 10 FOR UPDATE</strong>ï¼› é˜²æ­¢ä»»ä½•å…¶ä»–äº‹åŠ¡æ’å…¥ï¼Œæ›´æ–°æˆ–åˆ é™¤t.c1å€¼ä¸º10çš„è¡Œã€‚</p><h4 id="é—´éš™é”"><a href="#é—´éš™é”" class="headerlink" title="é—´éš™é”"></a>é—´éš™é”</h4><p>é—´éš™é”å®šæ˜¯å¯¹ç´¢å¼•è®°å½•ä¹‹é—´çš„é—´éš™çš„é”å®šï¼Œæˆ–è€…æ˜¯å¯¹ç¬¬ä¸€ä¸ªæˆ–æœ€åä¸€ä¸ªç´¢å¼•è®°å½•ä¹‹å‰çš„é—´éš™çš„é”å®šã€‚ ä¾‹å¦‚**SELECT c1 FROM t WHERE c1 BETWEEN 10 and 20 FOR UPDATE;**ã€‚ é˜²æ­¢å…¶ä»–äº‹åŠ¡å°†å€¼15æ’å…¥åˆ°t.c1åˆ—ä¸­ï¼Œæ— è®ºè¯¥åˆ—ä¸­æ˜¯å¦å·²æœ‰è¿™æ ·çš„å€¼ï¼Œå› ä¸ºè¯¥èŒƒå›´ä¸­æ‰€æœ‰ç°æœ‰å€¼ä¹‹é—´çš„é—´éš™æ˜¯é”å®šçš„ã€‚</p><h4 id="Next-Key-é”"><a href="#Next-Key-é”" class="headerlink" title="Next-Key é”"></a>Next-Key é”</h4><p>ä¸‹ä¸€é”®é”å®šæ˜¯ç´¢å¼•è®°å½•ä¸Šçš„è®°å½•é”å®šå’Œç´¢å¼•è®°å½•ä¹‹å‰çš„é—´éš™ä¸Šçš„é—´éš™é”å®šçš„ç»„åˆã€‚</p><h4 id="æ’å…¥æ„å›¾é”"><a href="#æ’å…¥æ„å›¾é”" class="headerlink" title="æ’å…¥æ„å›¾é”"></a>æ’å…¥æ„å›¾é”</h4><p>æ’å…¥æ„å›¾é”æ˜¯åœ¨è¡Œæ’å…¥ä¹‹å‰é€šè¿‡INSERTæ“ä½œè®¾ç½®çš„é—´éš™é”çš„ä¸€ç§ã€‚ æ­¤é”ä»¥è¿™ç§æ–¹å¼å‘å‡ºä¿¡å·ï¼Œè¡¨æ˜è¦æ’å…¥çš„æ„å›¾æ˜¯ï¼šå¦‚æœå¤šä¸ªäº‹åŠ¡æœªæ’å…¥é—´éš™ä¸­çš„ç›¸åŒä½ç½®ï¼Œåˆ™ä¸å¿…ç­‰å¾…å½¼æ­¤æ’å…¥çš„å¤šä¸ªäº‹åŠ¡ã€‚ å‡è®¾æœ‰ç´¢å¼•è®°å½•ï¼Œå…¶å€¼åˆ†åˆ«ä¸º4å’Œ7ã€‚å•ç‹¬çš„äº‹åŠ¡åˆ†åˆ«å°è¯•æ’å…¥å€¼5å’Œ6ï¼Œåœ¨è·å¾—æ’å…¥è¡Œçš„æ’ä»–é”ä¹‹å‰ï¼Œæ¯ä¸ªäº‹åŠ¡éƒ½ä½¿ç”¨æ’å…¥æ„å›¾é”æ¥é”å®š4å’Œ7ä¹‹é—´çš„é—´éš™ï¼Œ ä½†ä¸è¦äº’ç›¸é˜»å¡ï¼Œå› ä¸ºè¡Œæ˜¯æ— å†²çªçš„ã€‚</p><h4 id="è‡ªå¢é”"><a href="#è‡ªå¢é”" class="headerlink" title="è‡ªå¢é”"></a>è‡ªå¢é”</h4><p>AUTO-INCé”æ˜¯ä¸€ç§ç‰¹æ®Šçš„è¡¨çº§é”ï¼Œç”±æ’å…¥åˆ°å…·æœ‰AUTO_INCREMENTåˆ—çš„è¡¨ä¸­çš„äº‹åŠ¡è·å–ã€‚ åœ¨æœ€ç®€å•çš„æƒ…å†µä¸‹ï¼Œå¦‚æœä¸€ä¸ªäº‹åŠ¡æ­£åœ¨å‘è¡¨ä¸­æ’å…¥å€¼ï¼Œé‚£ä¹ˆä»»ä½•å…¶ä»–äº‹åŠ¡éƒ½å¿…é¡»ç­‰å¾…è‡ªå·±åœ¨è¯¥è¡¨ä¸­è¿›è¡Œæ’å…¥ï¼Œä»¥ä¾¿ç¬¬ä¸€ä¸ªäº‹åŠ¡æ’å…¥çš„è¡Œæ¥æ”¶è¿ç»­çš„ä¸»é”®å€¼ã€‚</p><h3 id="Mysql-InnoDBå’ŒMyISAMçš„åŒºåˆ«"><a href="#Mysql-InnoDBå’ŒMyISAMçš„åŒºåˆ«" class="headerlink" title="Mysql InnoDBå’ŒMyISAMçš„åŒºåˆ«"></a>Mysql InnoDBå’ŒMyISAMçš„åŒºåˆ«</h3><ol><li>InnoDB æ”¯æŒäº‹åŠ¡ï¼ŒMyISAM ä¸æ”¯æŒäº‹åŠ¡ã€‚è¿™æ˜¯ MySQL å°†é»˜è®¤å­˜å‚¨å¼•æ“ä» MyISAM å˜æˆ InnoDB çš„é‡è¦åŸå› ä¹‹ä¸€ï¼›</li><li>InnoDB æ”¯æŒå¤–é”®ï¼Œè€Œ MyISAM ä¸æ”¯æŒã€‚å¯¹ä¸€ä¸ªåŒ…å«å¤–é”®çš„ InnoDB è¡¨è½¬ä¸º MYISAM ä¼šå¤±è´¥ï¼›  </li><li>InnoDB æ˜¯èšé›†ç´¢å¼•ï¼ŒMyISAM æ˜¯éèšé›†ç´¢å¼•ã€‚èšç°‡ç´¢å¼•çš„æ–‡ä»¶å­˜æ”¾åœ¨ä¸»é”®ç´¢å¼•çš„å¶å­èŠ‚ç‚¹ä¸Šï¼Œå› æ­¤ InnoDB å¿…é¡»è¦æœ‰ä¸»é”®ï¼Œé€šè¿‡ä¸»é”®ç´¢å¼•æ•ˆç‡å¾ˆé«˜ã€‚ä½†æ˜¯è¾…åŠ©ç´¢å¼•éœ€è¦ä¸¤æ¬¡æŸ¥è¯¢ï¼Œå…ˆæŸ¥è¯¢åˆ°ä¸»é”®ï¼Œç„¶åå†é€šè¿‡ä¸»é”®æŸ¥è¯¢åˆ°æ•°æ®ã€‚å› æ­¤ï¼Œä¸»é”®ä¸åº”è¯¥è¿‡å¤§ï¼Œå› ä¸ºä¸»é”®å¤ªå¤§ï¼Œå…¶ä»–ç´¢å¼•ä¹Ÿéƒ½ä¼šå¾ˆå¤§ã€‚è€Œ MyISAM æ˜¯éèšé›†ç´¢å¼•ï¼Œæ•°æ®æ–‡ä»¶æ˜¯åˆ†ç¦»çš„ï¼Œç´¢å¼•ä¿å­˜çš„æ˜¯æ•°æ®æ–‡ä»¶çš„æŒ‡é’ˆã€‚ä¸»é”®ç´¢å¼•å’Œè¾…åŠ©ç´¢å¼•æ˜¯ç‹¬ç«‹çš„ã€‚ </li><li>InnoDB ä¸ä¿å­˜è¡¨çš„å…·ä½“è¡Œæ•°ï¼Œæ‰§è¡Œ select count(*) from table æ—¶éœ€è¦å…¨è¡¨æ‰«æã€‚è€ŒMyISAM ç”¨ä¸€ä¸ªå˜é‡ä¿å­˜äº†æ•´ä¸ªè¡¨çš„è¡Œæ•°ï¼Œæ‰§è¡Œä¸Šè¿°è¯­å¥æ—¶åªéœ€è¦è¯»å‡ºè¯¥å˜é‡å³å¯ï¼Œé€Ÿåº¦å¾ˆå¿«ï¼›    </li><li>InnoDB æœ€å°çš„é”ç²’åº¦æ˜¯è¡Œé”ï¼ŒMyISAM æœ€å°çš„é”ç²’åº¦æ˜¯è¡¨é”ã€‚ä¸€ä¸ªæ›´æ–°è¯­å¥ä¼šé”ä½æ•´å¼ è¡¨ï¼Œå¯¼è‡´å…¶ä»–æŸ¥è¯¢å’Œæ›´æ–°éƒ½ä¼šè¢«é˜»å¡ï¼Œå› æ­¤å¹¶å‘è®¿é—®å—é™ã€‚è¿™ä¹Ÿæ˜¯ MySQL å°†é»˜è®¤å­˜å‚¨å¼•æ“ä» MyISAM å˜æˆ InnoDB çš„é‡è¦åŸå› ä¹‹ä¸€ï¼›</li></ol><h3 id="Rediså¦‚ä½•å®ç°æŒä¹…åŒ–çš„"><a href="#Rediså¦‚ä½•å®ç°æŒä¹…åŒ–çš„" class="headerlink" title="Rediså¦‚ä½•å®ç°æŒä¹…åŒ–çš„"></a>Rediså¦‚ä½•å®ç°æŒä¹…åŒ–çš„</h3><p><em>Redis æä¾›äº†ä¸åŒçº§åˆ«çš„æŒä¹…åŒ–æ–¹å¼ï¼š</em></p><ul><li>RDBæŒä¹…åŒ–æ–¹å¼èƒ½å¤Ÿåœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”èƒ½å¯¹ä½ çš„æ•°æ®è¿›è¡Œå¿«ç…§å­˜å‚¨.</li><li>AOFæŒä¹…åŒ–æ–¹å¼è®°å½•æ¯æ¬¡å¯¹æœåŠ¡å™¨å†™çš„æ“ä½œ,å½“æœåŠ¡å™¨é‡å¯çš„æ—¶å€™ä¼šé‡æ–°æ‰§è¡Œè¿™äº›å‘½ä»¤æ¥æ¢å¤åŸå§‹çš„æ•°æ®,AOFå‘½ä»¤ä»¥redisåè®®è¿½åŠ ä¿å­˜æ¯æ¬¡å†™çš„æ“ä½œåˆ°æ–‡ä»¶æœ«å°¾.Redisè¿˜èƒ½å¯¹AOFæ–‡ä»¶è¿›è¡Œåå°é‡å†™,ä½¿å¾—AOFæ–‡ä»¶çš„ä½“ç§¯ä¸è‡³äºè¿‡å¤§.</li><li>å¦‚æœä½ åªå¸Œæœ›ä½ çš„æ•°æ®åœ¨æœåŠ¡å™¨è¿è¡Œçš„æ—¶å€™å­˜åœ¨,ä½ ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ä»»ä½•æŒä¹…åŒ–æ–¹å¼.</li><li>ä½ ä¹Ÿå¯ä»¥åŒæ—¶å¼€å¯ä¸¤ç§æŒä¹…åŒ–æ–¹å¼, åœ¨è¿™ç§æƒ…å†µä¸‹, å½“redisé‡å¯çš„æ—¶å€™ä¼šä¼˜å…ˆè½½å…¥AOFæ–‡ä»¶æ¥æ¢å¤åŸå§‹çš„æ•°æ®,å› ä¸ºåœ¨é€šå¸¸æƒ…å†µä¸‹AOFæ–‡ä»¶ä¿å­˜çš„æ•°æ®é›†è¦æ¯”RDBæ–‡ä»¶ä¿å­˜çš„æ•°æ®é›†è¦å®Œæ•´.</li><li>æœ€é‡è¦çš„äº‹æƒ…æ˜¯äº†è§£RDBå’ŒAOFæŒä¹…åŒ–æ–¹å¼çš„ä¸åŒ,è®©æˆ‘ä»¬ä»¥RDBæŒä¹…åŒ–æ–¹å¼å¼€å§‹</li></ul><p><em>RDB ä¼˜ç‚¹ï¼š</em></p><ul><li>RDBæ˜¯ä¸€ä¸ªéå¸¸ç´§å‡‘çš„æ–‡ä»¶,å®ƒä¿å­˜äº†æŸä¸ªæ—¶é—´ç‚¹å¾—æ•°æ®é›†,éå¸¸é€‚ç”¨äºæ•°æ®é›†çš„å¤‡ä»½,æ¯”å¦‚ä½ å¯ä»¥åœ¨æ¯ä¸ªå°æ—¶æŠ¥ä¿å­˜ä¸€ä¸‹è¿‡å»24å°æ—¶å†…çš„æ•°æ®,åŒæ—¶æ¯å¤©ä¿å­˜è¿‡å»30å¤©çš„æ•°æ®,è¿™æ ·å³ä½¿å‡ºäº†é—®é¢˜ä½ ä¹Ÿå¯ä»¥æ ¹æ®éœ€æ±‚æ¢å¤åˆ°ä¸åŒç‰ˆæœ¬çš„æ•°æ®é›†.</li><li>RDBæ˜¯ä¸€ä¸ªç´§å‡‘çš„å•ä¸€æ–‡ä»¶,å¾ˆæ–¹ä¾¿ä¼ é€åˆ°å¦ä¸€ä¸ªè¿œç«¯æ•°æ®ä¸­å¿ƒæˆ–è€…äºšé©¬é€Šçš„S3ï¼ˆå¯èƒ½åŠ å¯†ï¼‰ï¼Œéå¸¸é€‚ç”¨äºç¾éš¾æ¢å¤.</li><li>RDBåœ¨ä¿å­˜RDBæ–‡ä»¶æ—¶çˆ¶è¿›ç¨‹å”¯ä¸€éœ€è¦åšçš„å°±æ˜¯forkå‡ºä¸€ä¸ªå­è¿›ç¨‹,æ¥ä¸‹æ¥çš„å·¥ä½œå…¨éƒ¨ç”±å­è¿›ç¨‹æ¥åšï¼Œçˆ¶è¿›ç¨‹ä¸éœ€è¦å†åšå…¶ä»–IOæ“ä½œï¼Œæ‰€ä»¥RDBæŒä¹…åŒ–æ–¹å¼å¯ä»¥æœ€å¤§åŒ–redisçš„æ€§èƒ½.</li><li>ä¸AOFç›¸æ¯”,åœ¨æ¢å¤å¤§çš„æ•°æ®é›†çš„æ—¶å€™ï¼ŒRDBæ–¹å¼ä¼šæ›´å¿«ä¸€äº›</li></ul><p><em>RDB ç¼ºç‚¹ï¼š</em></p><ul><li>å¦‚æœä½ å¸Œæœ›åœ¨redisæ„å¤–åœæ­¢å·¥ä½œï¼ˆä¾‹å¦‚ç”µæºä¸­æ–­ï¼‰çš„æƒ…å†µä¸‹ä¸¢å¤±çš„æ•°æ®æœ€å°‘çš„è¯ï¼Œé‚£ä¹ˆRDBä¸é€‚åˆä½ .è™½ç„¶ä½ å¯ä»¥é…ç½®ä¸åŒçš„saveæ—¶é—´ç‚¹(ä¾‹å¦‚æ¯éš”5åˆ†é’Ÿå¹¶ä¸”å¯¹æ•°æ®é›†æœ‰100ä¸ªå†™çš„æ“ä½œ),æ˜¯Redisè¦å®Œæ•´çš„ä¿å­˜æ•´ä¸ªæ•°æ®é›†æ˜¯ä¸€ä¸ªæ¯”è¾ƒç¹é‡çš„å·¥ä½œ,ä½ é€šå¸¸ä¼šæ¯éš”5åˆ†é’Ÿæˆ–è€…æ›´ä¹…åšä¸€æ¬¡å®Œæ•´çš„ä¿å­˜,ä¸‡ä¸€åœ¨Redisæ„å¤–å®•æœº,ä½ å¯èƒ½ä¼šä¸¢å¤±å‡ åˆ†é’Ÿçš„æ•°æ®.</li><li>RDB éœ€è¦ç»å¸¸forkå­è¿›ç¨‹æ¥ä¿å­˜æ•°æ®é›†åˆ°ç¡¬ç›˜ä¸Š,å½“æ•°æ®é›†æ¯”è¾ƒå¤§çš„æ—¶å€™,forkçš„è¿‡ç¨‹æ˜¯éå¸¸è€—æ—¶çš„,å¯èƒ½ä¼šå¯¼è‡´Redisåœ¨ä¸€äº›æ¯«ç§’çº§å†…ä¸èƒ½å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚.å¦‚æœæ•°æ®é›†å·¨å¤§å¹¶ä¸”CPUæ€§èƒ½ä¸æ˜¯å¾ˆå¥½çš„æƒ…å†µä¸‹,è¿™ç§æƒ…å†µä¼šæŒç»­1ç§’,AOFä¹Ÿéœ€è¦fork,ä½†æ˜¯ä½ å¯ä»¥è°ƒèŠ‚é‡å†™æ—¥å¿—æ–‡ä»¶çš„é¢‘ç‡æ¥æé«˜æ•°æ®é›†çš„è€ä¹…åº¦.</li></ul><p><em>AOF ä¼˜ç‚¹</em></p><ul><li>ä½¿ç”¨AOFä¼šè®©ä½ çš„Redisæ›´åŠ è€ä¹…: ä½ å¯ä»¥ä½¿ç”¨ä¸åŒçš„fsyncç­–ç•¥ï¼šæ— fsync,æ¯ç§’fsync,æ¯æ¬¡å†™çš„æ—¶å€™fsync.ä½¿ç”¨é»˜è®¤çš„æ¯ç§’fsyncç­–ç•¥,Redisçš„æ€§èƒ½ä¾ç„¶å¾ˆå¥½(fsyncæ˜¯ç”±åå°çº¿ç¨‹è¿›è¡Œå¤„ç†çš„,ä¸»çº¿ç¨‹ä¼šå°½åŠ›å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚),ä¸€æ—¦å‡ºç°æ•…éšœï¼Œä½ æœ€å¤šä¸¢å¤±1ç§’çš„æ•°æ®.</li><li>AOFæ–‡ä»¶æ˜¯ä¸€ä¸ªåªè¿›è¡Œè¿½åŠ çš„æ—¥å¿—æ–‡ä»¶,æ‰€ä»¥ä¸éœ€è¦å†™å…¥seek,å³ä½¿ç”±äºæŸäº›åŸå› (ç£ç›˜ç©ºé—´å·²æ»¡ï¼Œå†™çš„è¿‡ç¨‹ä¸­å®•æœºç­‰ç­‰)æœªæ‰§è¡Œå®Œæ•´çš„å†™å…¥å‘½ä»¤,ä½ ä¹Ÿä¹Ÿå¯ä½¿ç”¨redis-check-aofå·¥å…·ä¿®å¤è¿™äº›é—®é¢˜.</li><li>Redis å¯ä»¥åœ¨ AOF æ–‡ä»¶ä½“ç§¯å˜å¾—è¿‡å¤§æ—¶ï¼Œè‡ªåŠ¨åœ°åœ¨åå°å¯¹ AOF è¿›è¡Œé‡å†™ï¼š é‡å†™åçš„æ–° AOF æ–‡ä»¶åŒ…å«äº†æ¢å¤å½“å‰æ•°æ®é›†æ‰€éœ€çš„æœ€å°å‘½ä»¤é›†åˆã€‚ æ•´ä¸ªé‡å†™æ“ä½œæ˜¯ç»å¯¹å®‰å…¨çš„ï¼Œå› ä¸º Redis åœ¨åˆ›å»ºæ–° AOF æ–‡ä»¶çš„è¿‡ç¨‹ä¸­ï¼Œä¼šç»§ç»­å°†å‘½ä»¤è¿½åŠ åˆ°ç°æœ‰çš„ AOF æ–‡ä»¶é‡Œé¢ï¼Œå³ä½¿é‡å†™è¿‡ç¨‹ä¸­å‘ç”Ÿåœæœºï¼Œç°æœ‰çš„ AOF æ–‡ä»¶ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚ è€Œä¸€æ—¦æ–° AOF æ–‡ä»¶åˆ›å»ºå®Œæ¯•ï¼ŒRedis å°±ä¼šä»æ—§ AOF æ–‡ä»¶åˆ‡æ¢åˆ°æ–° AOF æ–‡ä»¶ï¼Œå¹¶å¼€å§‹å¯¹æ–° AOF æ–‡ä»¶è¿›è¡Œè¿½åŠ æ“ä½œã€‚</li><li>AOF æ–‡ä»¶æœ‰åºåœ°ä¿å­˜äº†å¯¹æ•°æ®åº“æ‰§è¡Œçš„æ‰€æœ‰å†™å…¥æ“ä½œï¼Œ è¿™äº›å†™å…¥æ“ä½œä»¥ Redis åè®®çš„æ ¼å¼ä¿å­˜ï¼Œ å› æ­¤ AOF æ–‡ä»¶çš„å†…å®¹éå¸¸å®¹æ˜“è¢«äººè¯»æ‡‚ï¼Œ å¯¹æ–‡ä»¶è¿›è¡Œåˆ†æï¼ˆparseï¼‰ä¹Ÿå¾ˆè½»æ¾ã€‚ å¯¼å‡ºï¼ˆexportï¼‰ AOF æ–‡ä»¶ä¹Ÿéå¸¸ç®€å•ï¼š ä¸¾ä¸ªä¾‹å­ï¼Œ å¦‚æœä½ ä¸å°å¿ƒæ‰§è¡Œäº† FLUSHALL å‘½ä»¤ï¼Œ ä½†åªè¦ AOF æ–‡ä»¶æœªè¢«é‡å†™ï¼Œ é‚£ä¹ˆåªè¦åœæ­¢æœåŠ¡å™¨ï¼Œ ç§»é™¤ AOF æ–‡ä»¶æœ«å°¾çš„ FLUSHALL å‘½ä»¤ï¼Œ å¹¶é‡å¯ Redis ï¼Œ å°±å¯ä»¥å°†æ•°æ®é›†æ¢å¤åˆ° FLUSHALL æ‰§è¡Œä¹‹å‰çš„çŠ¶æ€ã€‚</li></ul><p><em>AOF ç¼ºç‚¹ï¼š</em></p><ul><li>å¯¹äºç›¸åŒçš„æ•°æ®é›†æ¥è¯´ï¼ŒAOF æ–‡ä»¶çš„ä½“ç§¯é€šå¸¸è¦å¤§äº RDB æ–‡ä»¶çš„ä½“ç§¯ã€‚</li><li>æ ¹æ®æ‰€ä½¿ç”¨çš„ fsync ç­–ç•¥ï¼ŒAOF çš„é€Ÿåº¦å¯èƒ½ä¼šæ…¢äº RDB ã€‚ åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ æ¯ç§’ fsync çš„æ€§èƒ½ä¾ç„¶éå¸¸é«˜ï¼Œ è€Œå…³é—­ fsync å¯ä»¥è®© AOF çš„é€Ÿåº¦å’Œ RDB ä¸€æ ·å¿«ï¼Œ å³ä½¿åœ¨é«˜è´Ÿè·ä¹‹ä¸‹ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ ä¸è¿‡åœ¨å¤„ç†å·¨å¤§çš„å†™å…¥è½½å…¥æ—¶ï¼ŒRDB å¯ä»¥æä¾›æ›´æœ‰ä¿è¯çš„æœ€å¤§å»¶è¿Ÿæ—¶é—´ï¼ˆlatencyï¼‰ã€‚</li></ul><h3 id="é¡¹ç›®ä¸­å¦‚ä½•åšé“¾è·¯è·Ÿè¸ªçš„"><a href="#é¡¹ç›®ä¸­å¦‚ä½•åšé“¾è·¯è·Ÿè¸ªçš„" class="headerlink" title="é¡¹ç›®ä¸­å¦‚ä½•åšé“¾è·¯è·Ÿè¸ªçš„"></a>é¡¹ç›®ä¸­å¦‚ä½•åšé“¾è·¯è·Ÿè¸ªçš„</h3><p>Zipkin åšæœåŠ¡é“¾è·¯è·Ÿè¸ª</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://github.com/user-attachments/assets/901d8359-470a-466c-9f9a-ab717480529d&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="é¢è¯•æ€»ç»“" scheme="https://chivalry727.github.io/categories/%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="é¢è¯•æ€»ç»“" scheme="https://chivalry727.github.io/tags/%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>é¢è¯•æ€»ç»“ï¼ˆæŸçŒå¤´å…¬å¸ï¼‰</title>
    <link href="https://chivalry727.github.io/%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93%EF%BC%88%E6%9F%90%E7%8C%8E%E5%A4%B4%EF%BC%89/"/>
    <id>https://chivalry727.github.io/%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93%EF%BC%88%E6%9F%90%E7%8C%8E%E5%A4%B4%EF%BC%89/</id>
    <published>2020-08-25T00:13:59.000Z</published>
    <updated>2025-02-27T11:13:10.770Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://github.com/user-attachments/assets/901d8359-470a-466c-9f9a-ab717480529d"></p><span id="more"></span><h2 id="é¢è¯•æ€»ç»“ï¼ˆæŸçŒå¤´å…¬å¸ï¼‰"><a href="#é¢è¯•æ€»ç»“ï¼ˆæŸçŒå¤´å…¬å¸ï¼‰" class="headerlink" title="é¢è¯•æ€»ç»“ï¼ˆæŸçŒå¤´å…¬å¸ï¼‰"></a>é¢è¯•æ€»ç»“ï¼ˆæŸçŒå¤´å…¬å¸ï¼‰</h2><h3 id="ä¸¤ä¸ªLongå¯¹è±¡åˆ¤æ–­ç›¸ç­‰"><a href="#ä¸¤ä¸ªLongå¯¹è±¡åˆ¤æ–­ç›¸ç­‰" class="headerlink" title="ä¸¤ä¸ªLongå¯¹è±¡åˆ¤æ–­ç›¸ç­‰"></a>ä¸¤ä¸ªLongå¯¹è±¡åˆ¤æ–­ç›¸ç­‰</h3><p>ä½¿ç”¨equalsæ–¹æ³•åˆ¤æ–­ä¸¤ä¸ªlongå¯¹è±¡ç›¸ç­‰</p><h3 id="UTF-8å­—ç¬¦å¦‚ä½•è½¬æˆGBKé›†ï¼Œå…·ä½“æ€ä¹ˆå®ç°çš„"><a href="#UTF-8å­—ç¬¦å¦‚ä½•è½¬æˆGBKé›†ï¼Œå…·ä½“æ€ä¹ˆå®ç°çš„" class="headerlink" title="UTF-8å­—ç¬¦å¦‚ä½•è½¬æˆGBKé›†ï¼Œå…·ä½“æ€ä¹ˆå®ç°çš„"></a>UTF-8å­—ç¬¦å¦‚ä½•è½¬æˆGBKé›†ï¼Œå…·ä½“æ€ä¹ˆå®ç°çš„</h3><p>Stringçš„é‡è½½æ–¹æ³•ï¼Œå°†å­—èŠ‚æ•°ç»„ä¼ å…¥Stringçš„æ„é€ å™¨ï¼Œä¼ å…¥æŒ‡å®šçš„å­—ç¬¦ï¼Œå¯ä»¥å®ç°ç›¸äº’è½¬æ¢å­—ç¬¦é›†</p><h3 id="çº¿ç¨‹çš„å‡ ç§åˆ›å»ºæ–¹æ³•"><a href="#çº¿ç¨‹çš„å‡ ç§åˆ›å»ºæ–¹æ³•" class="headerlink" title="çº¿ç¨‹çš„å‡ ç§åˆ›å»ºæ–¹æ³•"></a>çº¿ç¨‹çš„å‡ ç§åˆ›å»ºæ–¹æ³•</h3><ol><li>ç»§æ‰¿Threadç±»ï¼Œå¹¶å¤å†™runæ–¹æ³•ï¼Œåˆ›å»ºè¯¥ç±»å¯¹è±¡ï¼Œè°ƒç”¨startæ–¹æ³•å¼€å¯çº¿ç¨‹ã€‚æ­¤æ–¹å¼æ²¡æœ‰è¿”å›å€¼ã€‚</li><li>å®ç°Runnableæ¥å£ï¼Œå¤å†™runæ–¹æ³•ï¼Œåˆ›å»ºThreadç±»å¯¹è±¡ï¼Œå°†Runnableå­ç±»å¯¹è±¡ä¼ é€’ç»™Threadç±»å¯¹è±¡ã€‚è°ƒç”¨startæ–¹æ³•å¼€å¯çº¿ç¨‹ã€‚æ­¤æ–¹æ³•2è¾ƒä¹‹æ–¹æ³•1å¥½ï¼Œå°†çº¿ç¨‹å¯¹è±¡å’Œçº¿ç¨‹ä»»åŠ¡å¯¹è±¡åˆ†ç¦»å¼€ã€‚é™ä½äº†è€¦åˆæ€§ï¼Œåˆ©äºç»´æŠ¤ã€‚æ­¤æ–¹å¼æ²¡æœ‰è¿”å›å€¼ã€‚</li><li>åˆ›å»ºFutureTaskå¯¹è±¡ï¼Œåˆ›å»ºCallableå­ç±»å¯¹è±¡ï¼Œå¤å†™call(ç›¸å½“äºrun)æ–¹æ³•ï¼Œå°†å…¶ä¼ é€’ç»™FutureTaskå¯¹è±¡ï¼ˆç›¸å½“äºä¸€ä¸ªRunnableï¼‰ã€‚ åˆ›å»ºThreadç±»å¯¹è±¡ï¼Œå°†FutureTaskå¯¹è±¡ä¼ é€’ç»™Threadå¯¹è±¡ã€‚è°ƒç”¨startæ–¹æ³•å¼€å¯çº¿ç¨‹ã€‚è¿™ç§æ–¹å¼å¯ä»¥è·å¾—çº¿ç¨‹æ‰§è¡Œå®Œä¹‹åçš„è¿”å›å€¼ã€‚è¯¥æ–¹æ³•ä½¿ç”¨RunnableåŠŸèƒ½æ›´åŠ å¼ºå¤§çš„ä¸€ä¸ªå­ç±».è¿™ä¸ªå­ç±»æ˜¯å…·æœ‰è¿”å›å€¼ç±»å‹çš„ä»»åŠ¡æ–¹æ³•ã€‚</li><li>çº¿ç¨‹æ± çš„æ–¹å¼</li></ol><h3 id="çº¿ç¨‹æ± çš„æ ¸å¿ƒå‚æ•°ä»‹ç»ä¸€ä¸‹"><a href="#çº¿ç¨‹æ± çš„æ ¸å¿ƒå‚æ•°ä»‹ç»ä¸€ä¸‹" class="headerlink" title="çº¿ç¨‹æ± çš„æ ¸å¿ƒå‚æ•°ä»‹ç»ä¸€ä¸‹"></a>çº¿ç¨‹æ± çš„æ ¸å¿ƒå‚æ•°ä»‹ç»ä¸€ä¸‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">ThreadPoolExecutor</span><span class="params">(<span class="type">int</span> corePoolSize,</span></span><br><span class="line"><span class="params">                          <span class="type">int</span> maximumPoolSize,</span></span><br><span class="line"><span class="params">                          <span class="type">long</span> keepAliveTime,</span></span><br><span class="line"><span class="params">                          TimeUnit unit,</span></span><br><span class="line"><span class="params">                          BlockingQueue&lt;Runnable&gt; workQueue,</span></span><br><span class="line"><span class="params">                          ThreadFactory threadFactory,</span></span><br><span class="line"><span class="params">                          RejectedExecutionHandler handler)</span></span><br></pre></td></tr></table></figure><p><strong>corePoolSizeæ ¸å¿ƒçº¿ç¨‹æ•°é‡</strong>ï¼šçº¿ç¨‹æ± å†…éƒ¨æ ¸å¿ƒçº¿ç¨‹æ•°é‡ï¼Œå¦‚æœçº¿ç¨‹æ± æ”¶åˆ°ä»»åŠ¡ï¼Œä¸”çº¿ç¨‹æ± å†…éƒ¨çº¿ç¨‹æ•°é‡æ²¡æœ‰è¾¾åˆ°corePoolSizeï¼Œçº¿ç¨‹æ± ä¼šç›´æ¥ç»™æ­¤ä»»åŠ¡åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹æ¥å¤„ç†æ­¤ä»»åŠ¡</p><p><strong>maximumPoolSizeæœ€å¤§å…è®¸çº¿ç¨‹æ•°é‡</strong>ï¼šçº¿ç¨‹æ± å†…éƒ¨çº¿ç¨‹æ•°é‡å·²ç»è¾¾åˆ°æ ¸å¿ƒçº¿ç¨‹æ•°é‡ï¼Œå³corePoolSizeï¼Œå¹¶ä¸”<strong>ä»»åŠ¡é˜Ÿåˆ—å·²æ»¡</strong>ï¼Œæ­¤æ—¶å¦‚æœç»§ç»­æœ‰ä»»åŠ¡è¢«æäº¤ï¼Œå°†åˆ¤æ–­çº¿ç¨‹æ± å†…éƒ¨çº¿ç¨‹æ€»æ•°æ˜¯å¦è¾¾åˆ°maximumPoolSizeï¼Œå¦‚æœå°äºmaximumPoolSizeï¼Œå°†ç»§ç»­ä½¿ç”¨çº¿ç¨‹å·¥å‚åˆ›å»ºæ–°çº¿ç¨‹ã€‚å¦‚æœçº¿ç¨‹æ± å†…çº¿ç¨‹æ•°é‡ç­‰äºmaximumPoolSizeï¼Œå°±ä¸ä¼šç»§ç»­åˆ›å»ºçº¿ç¨‹ï¼Œå°†è§¦å‘æ‹’ç»ç­–ç•¥RejectedExecutionHandler</p><p><strong>keepAliveTimeã€unit</strong>ï¼šå½“çº¿ç¨‹æ± å†…éƒ¨çš„çº¿ç¨‹æ•°é‡å¤§äºcorePoolSizeï¼Œåˆ™å¤šå‡ºæ¥çš„çº¿ç¨‹ä¼šåœ¨keepAliveTimeæ—¶é—´ä¹‹åé”€æ¯</p><p><strong>workQueueå·¥ä½œé˜Ÿåˆ—</strong>ï¼šçº¿ç¨‹æ± éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡çš„é˜Ÿåˆ—ï¼Œé€šå¸¸æœ‰å›ºå®šæ•°é‡çš„ArrayBlockingQueueï¼Œæ— é™åˆ¶çš„LinkedBlockingQueue</p><p><strong>threadFactoryçº¿ç¨‹å·¥å‚</strong>ï¼šçº¿ç¨‹æ± å†…åˆåˆå§‹æ²¡æœ‰çº¿ç¨‹ï¼Œä»»åŠ¡æ¥äº†ä¹‹åï¼Œä¼šä½¿ç”¨çº¿ç¨‹å·¥å‚åˆ›å»ºçº¿ç¨‹</p><p><strong>handleræ‹’ç»ç­–ç•¥</strong>ï¼šå½“ä»»åŠ¡é˜Ÿåˆ—å·²æ»¡ï¼Œåˆæœ‰æ–°çš„ä»»åŠ¡è¿›æ¥æ—¶ï¼Œä¼šå›è°ƒæ­¤æ¥å£ã€‚æœ‰å‡ ç§é»˜è®¤å®ç°ï¼Œé€šå¸¸å»ºè®®æ ¹æ®å…·ä½“ä¸šåŠ¡æ¥è‡ªè¡Œå®ç°</p><h3 id="çº¿ç¨‹æ± æ ¸å¿ƒçº¿ç¨‹æ•°æ˜¯5ä¸ªï¼Œå¯åŠ¨çš„æ—¶å€™ä¼šåˆ›å»ºå‡ ä¸ªå·¥ä½œçº¿ç¨‹"><a href="#çº¿ç¨‹æ± æ ¸å¿ƒçº¿ç¨‹æ•°æ˜¯5ä¸ªï¼Œå¯åŠ¨çš„æ—¶å€™ä¼šåˆ›å»ºå‡ ä¸ªå·¥ä½œçº¿ç¨‹" class="headerlink" title="çº¿ç¨‹æ± æ ¸å¿ƒçº¿ç¨‹æ•°æ˜¯5ä¸ªï¼Œå¯åŠ¨çš„æ—¶å€™ä¼šåˆ›å»ºå‡ ä¸ªå·¥ä½œçº¿ç¨‹"></a>çº¿ç¨‹æ± æ ¸å¿ƒçº¿ç¨‹æ•°æ˜¯5ä¸ªï¼Œå¯åŠ¨çš„æ—¶å€™ä¼šåˆ›å»ºå‡ ä¸ªå·¥ä½œçº¿ç¨‹</h3><p>å¯åŠ¨çš„æ—¶å€™ä¸ä¼šåˆ›å»ºçº¿ç¨‹ï¼Œåªæœ‰æ‰§è¡Œexecuteæ–¹æ³•çš„æ—¶å€™æ‰ä¼šåˆ›å»ºå·¥ä½œçº¿ç¨‹ï¼Œæ¯æ¬¡æ‰§è¡Œexecuteæ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªå·¥ä½œçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œç›´åˆ°å·¥ä½œçº¿ç¨‹ç­‰äºæ ¸å¿ƒçº¿ç¨‹æ•°</p><h3 id="çº¿ç¨‹æ± çš„é˜»å¡é˜Ÿåˆ—é‡Œçš„ä»»åŠ¡ä»€ä¹ˆæ—¶å€™ä¼šè¢«è·å–æ‰§è¡Œ"><a href="#çº¿ç¨‹æ± çš„é˜»å¡é˜Ÿåˆ—é‡Œçš„ä»»åŠ¡ä»€ä¹ˆæ—¶å€™ä¼šè¢«è·å–æ‰§è¡Œ" class="headerlink" title="çº¿ç¨‹æ± çš„é˜»å¡é˜Ÿåˆ—é‡Œçš„ä»»åŠ¡ä»€ä¹ˆæ—¶å€™ä¼šè¢«è·å–æ‰§è¡Œ"></a>çº¿ç¨‹æ± çš„é˜»å¡é˜Ÿåˆ—é‡Œçš„ä»»åŠ¡ä»€ä¹ˆæ—¶å€™ä¼šè¢«è·å–æ‰§è¡Œ</h3><p>å½“å·¥ä½œçº¿ç¨‹æ»¡äº†å¹¶ä¸”ç­‰äºæ ¸å¿ƒçº¿ç¨‹æ•°çš„æ—¶å€™ï¼Œå¦‚æœç»§ç»­å‘çº¿ç¨‹æ± æäº¤ä»»åŠ¡ï¼Œé˜Ÿåˆ—å¦‚æœä¹Ÿæ²¡æœ‰æ»¡çš„è¯ï¼Œå°±å°†ä¼šä»é˜»å¡é˜Ÿåˆ—é‡Œè·å–ä»»åŠ¡å¹¶æ‰§è¡Œï¼›å¦‚æœé˜Ÿåˆ—æ»¡äº†ï¼Œå¹¶ä¸”æ ¸å¿ƒçº¿ç¨‹å°äºæœ€å¤§çº¿ç¨‹æ•°çš„æ—¶å€™ï¼Œå°±ä¼šåˆ›å»ºæ–°çš„å·¥ä½œçº¿ç¨‹ä»é˜Ÿåˆ—è·å–ä»»åŠ¡æ‰§è¡Œ</p><h3 id="Java-Exceptionçš„çˆ¶ç±»æ˜¯ä»€ä¹ˆ"><a href="#Java-Exceptionçš„çˆ¶ç±»æ˜¯ä»€ä¹ˆ" class="headerlink" title="Java Exceptionçš„çˆ¶ç±»æ˜¯ä»€ä¹ˆ"></a>Java Exceptionçš„çˆ¶ç±»æ˜¯ä»€ä¹ˆ</h3><p>Throwableæ˜¯æ‰€æœ‰å¼‚å¸¸ç±»å’ŒErrorçš„çˆ¶ç±»</p><h3 id="RuntimeExceptionã€Exceptionå’ŒErroråŒºåˆ«"><a href="#RuntimeExceptionã€Exceptionå’ŒErroråŒºåˆ«" class="headerlink" title="RuntimeExceptionã€Exceptionå’ŒErroråŒºåˆ«"></a>RuntimeExceptionã€Exceptionå’ŒErroråŒºåˆ«</h3><p>RuntimeExceptionæ˜¯è¿è¡Œæ—¶å¼‚å¸¸ç±»</p><p>Exceptionæ˜¯å¼‚å¸¸ç±»ï¼Œæ˜¯è¿è¡Œæ—¶å¼‚å¸¸çš„çˆ¶ç±»</p><p>Erroræ˜¯é”™è¯¯ç±»</p><h3 id="é¡¹ç›®çš„ä¸šåŠ¡å¼‚å¸¸ä¸ºä»€ä¹ˆè¦å®šä¹‰RuntimeException"><a href="#é¡¹ç›®çš„ä¸šåŠ¡å¼‚å¸¸ä¸ºä»€ä¹ˆè¦å®šä¹‰RuntimeException" class="headerlink" title="é¡¹ç›®çš„ä¸šåŠ¡å¼‚å¸¸ä¸ºä»€ä¹ˆè¦å®šä¹‰RuntimeException"></a>é¡¹ç›®çš„ä¸šåŠ¡å¼‚å¸¸ä¸ºä»€ä¹ˆè¦å®šä¹‰RuntimeException</h3><p>å› ä¸ºæ˜¯ä¸šåŠ¡ç±»çš„å¼‚å¸¸ï¼Œä¸šåŠ¡å¼‚å¸¸éƒ½æ˜¯ä¸šåŠ¡ç±»å‹çš„é”™è¯¯ï¼Œæ‰€ä»¥åªèƒ½å®šä¹‰è¿è¡Œæ—¶å¼‚å¸¸</p><h3 id="Httpå’ŒHttpsåŒºåˆ«"><a href="#Httpå’ŒHttpsåŒºåˆ«" class="headerlink" title="Httpå’ŒHttpsåŒºåˆ«"></a>Httpå’ŒHttpsåŒºåˆ«</h3><p>httpsæ˜¯åŠ å¯†çš„httpåè®®</p><h3 id="Spring-Bean-é»˜è®¤ç±»å‹"><a href="#Spring-Bean-é»˜è®¤ç±»å‹" class="headerlink" title="Spring Bean é»˜è®¤ç±»å‹"></a>Spring Bean é»˜è®¤ç±»å‹</h3><p>å•ä¾‹çš„Singleton Bean</p><h3 id="å•ä¾‹Bean-åŸå‹Bean-åœ¨é”€æ¯çš„æ—¶å€™æ˜¯å¦ä¸€æ ·çš„"><a href="#å•ä¾‹Bean-åŸå‹Bean-åœ¨é”€æ¯çš„æ—¶å€™æ˜¯å¦ä¸€æ ·çš„" class="headerlink" title="å•ä¾‹Bean åŸå‹Bean åœ¨é”€æ¯çš„æ—¶å€™æ˜¯å¦ä¸€æ ·çš„"></a>å•ä¾‹Bean åŸå‹Bean åœ¨é”€æ¯çš„æ—¶å€™æ˜¯å¦ä¸€æ ·çš„</h3><p>ä¸ä¸€æ ·ï¼Œscopeä¸ºprototypeçš„beanï¼Œå®¹å™¨ä¼šå°†åˆ›å»ºå¥½çš„å¯¹è±¡å®ä¾‹è¿”å›ç»™è¯·æ±‚æ–¹ï¼Œä¹‹åï¼Œå®¹å™¨å°±ä¸å†æ‹¥æœ‰å…¶å¼•ç”¨ï¼Œè¯·æ±‚æ–¹éœ€è¦è‡ªå·±è´Ÿè´£å½“å‰å¯¹è±¡åç»§ç”Ÿå‘½å‘¨æœŸçš„ç®¡ç†å·¥ä½œï¼ŒåŒ…æ‹¬è¯¥å¯¹è±¡çš„é”€æ¯ã€‚</p><p>æ‰€ä»¥ï¼šscopeä¸ºsingletonçš„beançš„destroyæ–¹æ³•åˆ™æ˜¯åœ¨å®¹å™¨å…³é—­æ—¶æ‰§è¡Œï¼Œè€Œscopeä¸ºprototypeçš„beanæ˜¯ä¸ä¼šæ‰§è¡Œdestroyæ–¹æ³•çš„</p><h3 id="Mysql-è”åˆç´¢å¼•-a-b-c-ï¼Œä»¥ä¸‹å“ªäº›ä¼šèµ°ç´¢å¼•"><a href="#Mysql-è”åˆç´¢å¼•-a-b-c-ï¼Œä»¥ä¸‹å“ªäº›ä¼šèµ°ç´¢å¼•" class="headerlink" title="Mysql è”åˆç´¢å¼• (a + b + c)ï¼Œä»¥ä¸‹å“ªäº›ä¼šèµ°ç´¢å¼•"></a>Mysql è”åˆç´¢å¼• (a + b + c)ï¼Œä»¥ä¸‹å“ªäº›ä¼šèµ°ç´¢å¼•</h3><p> select * from table where a = ? and b = ? ä¼šèµ°ç´¢å¼•<br> select * from table where a = ? and c = ? ä¼š<br> select * from table where b = ? and c = ? ä¸ä¼š<br> select * from table where b = ? and a = ? ä¼š</p><p>å»ºç´¢å¼•çš„å‡ å¤§åŸåˆ™ï¼š</p><p>1ã€æœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™ï¼Œéå¸¸é‡è¦çš„åŸåˆ™ï¼Œmysqlä¼šä¸€ç›´å‘å³åŒ¹é…ç›´åˆ°é‡åˆ°èŒƒå›´æŸ¥è¯¢(&gt;ã€&lt;ã€betweenã€like)å°±åœæ­¢åŒ¹é…ï¼Œæ¯”å¦‚a = 1 and b = 2 and c &gt; 3 and d = 4 å¦‚æœå»ºç«‹(a,b,c,d)é¡ºåºçš„ç´¢å¼•ï¼Œdæ˜¯ç”¨ä¸åˆ°ç´¢å¼•çš„ï¼Œå¦‚æœå»ºç«‹(a,b,d,c)çš„ç´¢å¼•åˆ™éƒ½å¯ä»¥ç”¨åˆ°ï¼Œa,b,dçš„é¡ºåºå¯ä»¥ä»»æ„è°ƒæ•´ã€‚</p><p>2ã€=å’Œinå¯ä»¥ä¹±åºï¼Œæ¯”å¦‚a = 1 and b = 2 and c = 3 å»ºç«‹(a,b,c)ç´¢å¼•å¯ä»¥ä»»æ„é¡ºåºï¼Œmysqlçš„æŸ¥è¯¢ä¼˜åŒ–å™¨ä¼šå¸®ä½ ä¼˜åŒ–æˆç´¢å¼•å¯ä»¥è¯†åˆ«çš„å½¢å¼ã€‚</p><p>3ã€å°½é‡é€‰æ‹©åŒºåˆ†åº¦é«˜çš„åˆ—ä½œä¸ºç´¢å¼•ï¼ŒåŒºåˆ†åº¦çš„å…¬å¼æ˜¯count(distinct col)/count(*)ï¼Œè¡¨ç¤ºå­—æ®µä¸é‡å¤çš„æ¯”ä¾‹ï¼Œæ¯”ä¾‹è¶Šå¤§æˆ‘ä»¬æ‰«æçš„è®°å½•æ•°è¶Šå°‘ï¼Œå”¯ä¸€é”®çš„åŒºåˆ†åº¦æ˜¯1ï¼Œè€Œä¸€äº›çŠ¶æ€ã€æ€§åˆ«å­—æ®µå¯èƒ½åœ¨å¤§æ•°æ®é¢å‰åŒºåˆ†åº¦å°±æ˜¯0ï¼Œé‚£å¯èƒ½æœ‰äººä¼šé—®ï¼Œè¿™ä¸ªæ¯”ä¾‹æœ‰ä»€ä¹ˆç»éªŒå€¼å—ï¼Ÿä½¿ç”¨åœºæ™¯ä¸åŒï¼Œè¿™ä¸ªå€¼ä¹Ÿå¾ˆéš¾ç¡®å®šï¼Œä¸€èˆ¬éœ€è¦joinçš„å­—æ®µæˆ‘ä»¬éƒ½è¦æ±‚æ˜¯0.1ä»¥ä¸Šï¼Œå³å¹³å‡1æ¡æ‰«æ10æ¡è®°å½•ã€‚</p><p>4ã€ç´¢å¼•åˆ—ä¸èƒ½å‚ä¸è®¡ç®—ï¼Œä¿æŒåˆ—â€œå¹²å‡€â€ï¼Œæ¯”å¦‚from_unixtime(create_time) = â€™2014-05-29â€™å°±ä¸èƒ½ä½¿ç”¨åˆ°ç´¢å¼•ï¼ŒåŸå› å¾ˆç®€å•ï¼Œb+æ ‘ä¸­å­˜çš„éƒ½æ˜¯æ•°æ®è¡¨ä¸­çš„å­—æ®µå€¼ï¼Œä½†è¿›è¡Œæ£€ç´¢æ—¶ï¼Œéœ€è¦æŠŠæ‰€æœ‰å…ƒç´ éƒ½åº”ç”¨å‡½æ•°æ‰èƒ½æ¯”è¾ƒï¼Œæ˜¾ç„¶æˆæœ¬å¤ªå¤§ã€‚æ‰€ä»¥è¯­å¥åº”è¯¥å†™æˆcreate_time = unix_timestamp(â€™2014-05-29â€™)ã€‚</p><p>5ã€å°½é‡çš„æ‰©å±•ç´¢å¼•ï¼Œä¸è¦æ–°å»ºç´¢å¼•ã€‚æ¯”å¦‚è¡¨ä¸­å·²ç»æœ‰açš„ç´¢å¼•ï¼Œç°åœ¨è¦åŠ (a,b)çš„ç´¢å¼•ï¼Œé‚£ä¹ˆåªéœ€è¦ä¿®æ”¹åŸæ¥çš„ç´¢å¼•å³å¯ã€‚</p><h3 id="æœ‰ä¸€ä¸ªuserè¡¨ï¼Œéœ€è¦æ ¹æ®ageå€’åºæ’ï¼Œç„¶åè·å–50-80è¡Œçš„æ•°æ®ï¼Œsqlæ€ä¹ˆå†™"><a href="#æœ‰ä¸€ä¸ªuserè¡¨ï¼Œéœ€è¦æ ¹æ®ageå€’åºæ’ï¼Œç„¶åè·å–50-80è¡Œçš„æ•°æ®ï¼Œsqlæ€ä¹ˆå†™" class="headerlink" title="æœ‰ä¸€ä¸ªuserè¡¨ï¼Œéœ€è¦æ ¹æ®ageå€’åºæ’ï¼Œç„¶åè·å–50-80è¡Œçš„æ•°æ®ï¼Œsqlæ€ä¹ˆå†™"></a>æœ‰ä¸€ä¸ªuserè¡¨ï¼Œéœ€è¦æ ¹æ®ageå€’åºæ’ï¼Œç„¶åè·å–50-80è¡Œçš„æ•°æ®ï¼Œsqlæ€ä¹ˆå†™</h3><p>SELECT * FROM user ORDER BY age desc limit 50, 30;</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://github.com/user-attachments/assets/901d8359-470a-466c-9f9a-ab717480529d&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="é¢è¯•æ€»ç»“" scheme="https://chivalry727.github.io/categories/%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="é¢è¯•æ€»ç»“" scheme="https://chivalry727.github.io/tags/%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹æ¨¡æ¿æ–¹æ³•æ¨¡å¼</title>
    <link href="https://chivalry727.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/"/>
    <id>https://chivalry727.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/</id>
    <published>2020-08-24T12:53:51.000Z</published>
    <updated>2025-02-26T12:11:17.211Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://github.com/user-attachments/assets/da2bd8a1-d8b6-45e1-9fe0-f798058c9c72"></p><span id="more"></span><h2 id="è®¾è®¡æ¨¡å¼ä¹‹æ¨¡æ¿æ–¹æ³•æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼ä¹‹æ¨¡æ¿æ–¹æ³•æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¹‹æ¨¡æ¿æ–¹æ³•æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼ä¹‹æ¨¡æ¿æ–¹æ³•æ¨¡å¼</h2><p>å°è£…ç®—æ³•ï¼Œå¥½è®©å­ç±»å¯ä»¥åœ¨ä»»ä½•æ—¶å€™éƒ½å¯ä»¥å°†è‡ªå·±æŒ‚æ¥è¿‘è¿ç®—é‡Œã€‚</p><h3 id="å’–å•¡ç¤ºä¾‹"><a href="#å’–å•¡ç¤ºä¾‹" class="headerlink" title="å’–å•¡ç¤ºä¾‹"></a>å’–å•¡ç¤ºä¾‹</h3><p>å’–å•¡å¸ˆå‚…è®­ç»ƒæ‰‹å†Œï¼šå„ä½å¸ˆå‚…ï¼å‡†å¤‡é¥®æ–™æ—¶ï¼Œè¯·ç²¾ç¡®åœ°éµå¾ªä¸‹é¢çš„å†²æ³¡æ³•</p><p>å’–å•¡å†²æ³¡æ³•ï¼š</p><ol><li>æŠŠæ°´ç…®æ²¸</li><li>ç”¨æ²¸æ°´å†²æ³¡å’–å•¡</li><li>æŠŠå’–å•¡å€’è¿›æ¯å­</li><li>åŠ ç³–å’Œç‰›å¥¶</li></ol><p>èŒ¶å†²æ³¡æ³•ï¼š</p><ol><li>æŠŠæ°´ç…®æ²¸</li><li>ç”¨æ²¸æ°´å†²æ³¡èŒ¶å¶</li><li>æŠŠèŒ¶å€’è¿›æ¯å­</li><li>åŠ æŸ æª¬</li></ol><h3 id="å¿«é€Ÿæå®šå’–å•¡å’ŒèŒ¶çš„ç±»"><a href="#å¿«é€Ÿæå®šå’–å•¡å’ŒèŒ¶çš„ç±»" class="headerlink" title="å¿«é€Ÿæå®šå’–å•¡å’ŒèŒ¶çš„ç±»"></a>å¿«é€Ÿæå®šå’–å•¡å’ŒèŒ¶çš„ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å’–å•¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-08-25 21:38:09</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Coffee</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¶ä½œå’–å•¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">prepareRecipe</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// çƒ§æ°´</span></span><br><span class="line">        boilWater();</span><br><span class="line">        <span class="comment">// å†²æ³¡å’–å•¡ç²‰</span></span><br><span class="line">        brewCoffeeGrinds();</span><br><span class="line">        <span class="comment">// å€’å…¥æ¯å­</span></span><br><span class="line">        pourInCup();</span><br><span class="line">        <span class="comment">// åŠ ç³–å’Œç‰›å¥¶</span></span><br><span class="line">        addSugarAndMilk();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">addSugarAndMilk</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Adding Sugar and Milk&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pourInCup</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Pouring into cup&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">brewCoffeeGrinds</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Dripping Coffee through filter&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">boilWater</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Boiling water&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * èŒ¶</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-08-25 21:41:18</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Tea</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¶ä½œèŒ¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">prepareRecipe</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// çƒ§æ°´</span></span><br><span class="line">        boilWater();</span><br><span class="line">        <span class="comment">// å†²æ³¡èŒ¶åŒ…</span></span><br><span class="line">        steepTeaBag();</span><br><span class="line">        <span class="comment">// å€’å…¥æ¯å­</span></span><br><span class="line">        pourInCup();</span><br><span class="line">        <span class="comment">// åŠ æŸ æª¬</span></span><br><span class="line">        addLemon();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">addLemon</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Adding Lemon&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pourInCup</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Pouring into cup&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">steepTeaBag</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Steeping the tea&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">boilWater</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Boiling water&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æŠ½è±¡-prepareRecipe"><a href="#æŠ½è±¡-prepareRecipe" class="headerlink" title="æŠ½è±¡ prepareRecipe()"></a>æŠ½è±¡ prepareRecipe()</h3><p>å°†å’–å•¡å’ŒèŒ¶çš„åˆ¶ä½œå…±åŒç‚¹æŠ½å–å‡ºæ¥ï¼Œè®©æˆ‘ä»¬æ¯ä¸ªå­ç±»ä¸­é€æ­¥æŠ½è±¡prepareRecipe()â€¦</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å’–å•¡å› é¥®æ–™æŠ½è±¡ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-08-25 21:52:53</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">CaffeineBeverage</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æˆ‘ä»¬ä¸å¸Œæœ›å­ç±»ä¿®æ”¹è¿™ä¸ªæ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">prepareRecipe</span><span class="params">()</span> &#123;</span><br><span class="line">        boilWater();</span><br><span class="line">        brew();</span><br><span class="line">        pourInCup();</span><br><span class="line">        addCondiments();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å†²æ³¡ï¼Œå› ä¸ºå’–å•¡å’ŒèŒ¶çš„å†²æ³¡æ–¹æ³•ä¸ä¸€æ ·ï¼Œäº¤ç»™å­ç±»å»å®ç°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">brew</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ·»åŠ è°ƒå‘³å“ï¼Œå­ç±»å¯ä»¥è‡ªå®šä¹‰æ·»åŠ è°ƒå‘³å“</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">addCondiments</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è£…æ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pourInCup</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Pouring into cup&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * çƒ§æ°´</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">boilWater</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Boiling water&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ”¹é€ æˆ‘ä»¬çš„å’–å•¡å’ŒèŒ¶ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å’–å•¡</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-08-25 21:38:09</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Coffee</span> <span class="keyword">extends</span> <span class="title class_">CaffeineBeverage</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">brew</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Dripping Coffee through filter&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">addCondiments</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Adding Sugar and Milk&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * èŒ¶</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-08-25 21:41:18</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Tea</span> <span class="keyword">extends</span> <span class="title class_">CaffeineBeverage</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">brew</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Steeping the tea&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">addCondiments</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Adding Lemon&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è®¤è¯†æ¨¡æ¿æ–¹æ³•"><a href="#è®¤è¯†æ¨¡æ¿æ–¹æ³•" class="headerlink" title="è®¤è¯†æ¨¡æ¿æ–¹æ³•"></a>è®¤è¯†æ¨¡æ¿æ–¹æ³•</h3><p>åŸºæœ¬ä¸Šï¼Œæˆ‘ä»¬åˆšåˆšå®ç°çš„å°±æ˜¯æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">CaffeineBeverage</span> &#123;</span><br><span class="line">    <span class="comment">// prepareRecipe() å°±æ˜¯æˆ‘ä»¬çš„æ¨¡æ¿æ–¹æ³•ï¼Œè¯¥æ¨¡æ¿æ–¹æ³•é‡Œçš„æœ‰äº›æ–¹æ³•æ˜¯è¶…ç±»å¤„ç†ï¼Œæœ‰äº›æ˜¯å­ç±»å¤„ç†</span></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">prepareRecipe</span><span class="params">()</span><span class="params">()</span> &#123;</span><br><span class="line">        boilWater();</span><br><span class="line">        brew();</span><br><span class="line">        pourInCup();</span><br><span class="line">        addCondiments();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// éœ€è¦ç”±å­ç±»æä¾›çš„æ–¹æ³•ï¼Œå¿…é¡»åœ¨è¶…ç±»ä¸­å£°æ˜ä¸ºæŠ½è±¡</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">brew</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">addCondiments</span><span class="params">()</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pourInCup</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="comment">// å®ç°</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">boilWater</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// å®ç°</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ¨¡æ¿æ–¹æ³•å®šä¹‰äº†ä¸€ä¸ªç®—æ³•çš„æ­¥éª¤ï¼Œå¹¶å…è®¸å­ç±»ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªæ­¥éª¤æä¾›å®ç°ã€‚</strong></p><h3 id="èµ°ï¼Œæ³¡èŒ¶å»â€¦"><a href="#èµ°ï¼Œæ³¡èŒ¶å»â€¦" class="headerlink" title="èµ°ï¼Œæ³¡èŒ¶å»â€¦.."></a>èµ°ï¼Œæ³¡èŒ¶å»â€¦..</h3><ol><li><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªèŒ¶å¯¹è±¡â€¦ </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Tea</span> <span class="variable">myTea</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Tea</span>();</span><br></pre></td></tr></table></figure></li><li><p>ç„¶åæˆ‘ä»¬è°ƒç”¨è¿™ä¸ªæ¨¡æ¿æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myTea.prepareRecipe();</span><br></pre></td></tr></table></figure></li><li><p>é¦–å…ˆï¼ŒæŠŠæ°´ç…®æ²¸ï¼Œç”±è¶…ç±»è¿›è¡Œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">boilWater();</span><br></pre></td></tr></table></figure></li><li><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦æ³¡èŒ¶ï¼Œè¿™ä»¶äº‹æƒ…åªæœ‰å­ç±»æ‰çŸ¥é“æ€ä¹ˆåš</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew();</span><br></pre></td></tr></table></figure></li><li><p>ç°åœ¨æŠŠèŒ¶å€’è¿›æ¯å­ä¸­ï¼Œæ‰€æœ‰çš„é¥®æ–™åšæ³•éƒ½ä¸€æ ·ï¼Œæ‰€ä»¥è¿™ä»¶äº‹æƒ…å‘ç”Ÿåœ¨è¶…ç±»ä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pourInCup();</span><br></pre></td></tr></table></figure></li><li><p>æœ€åï¼Œæˆ‘ä»¬åŠ ç´§è°ƒæ–™ï¼Œç”±äºè°ƒæ–™æ˜¯å„ä¸ªé¥®æ–™ç‹¬æœ‰çš„ï¼Œæ‰€ä»¥ç”±å­ç±»æ¥å®ç°å®ƒ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">addCondiments();</span><br></pre></td></tr></table></figure></li></ol><h3 id="å®šä¹‰æ¨¡æ¿æ–¹æ³•æ¨¡å¼"><a href="#å®šä¹‰æ¨¡æ¿æ–¹æ³•æ¨¡å¼" class="headerlink" title="å®šä¹‰æ¨¡æ¿æ–¹æ³•æ¨¡å¼"></a>å®šä¹‰æ¨¡æ¿æ–¹æ³•æ¨¡å¼</h3><p><strong>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</strong>åœ¨ä¸€ä¸ªæ–¹æ³•ä¸­å®šä¹‰ä¸€ä¸ªç®—æ³•çš„éª¨æ¶ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­ã€‚æ¨¡æ¿æ–¹æ³•ä½¿å¾—å­ç±»å¯ä»¥åœ¨ä¸æ”¹å˜ç®—æ³•ç»“æ„çš„æƒ…å†µä¸‹ï¼Œé‡æ–°å®šä¹‰ç®—æ³•ä¸­çš„æŸäº›æ­¥éª¤ã€‚</p><h3 id="å¯¹æ¨¡æ¿æ–¹æ³•è¿›è¡ŒæŒ‚é’©"><a href="#å¯¹æ¨¡æ¿æ–¹æ³•è¿›è¡ŒæŒ‚é’©" class="headerlink" title="å¯¹æ¨¡æ¿æ–¹æ³•è¿›è¡ŒæŒ‚é’©"></a>å¯¹æ¨¡æ¿æ–¹æ³•è¿›è¡ŒæŒ‚é’©</h3><p>é’©å­æ˜¯ä¸€ç§è¢«å£°æ˜åœ¨æŠ½è±¡ç±»ä¸­çš„æ–¹æ³•ï¼Œä½†åªæœ‰ç©ºçš„æˆ–è€…é»˜è®¤çš„å®ç°ã€‚é’©å­çš„å­˜åœ¨ï¼Œå¯ä»¥è®©å­ç±»æœ‰èƒ½åŠ›å¯¹ç®—æ³•çš„ä¸åŒç‚¹è¿›è¡ŒæŒ‚é’©ã€‚è¦ä¸è¦æŒ‚é’©ï¼Œç”±å­ç±»æ¥å†³å®šã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å’–å•¡å› é¥®æ–™æŠ½è±¡ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-08-25 21:52:53</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">CaffeineBeverageWithHook</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æˆ‘ä»¬ä¸å¸Œæœ›å­ç±»ä¿®æ”¹è¿™ä¸ªæ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">prepareRecipe</span><span class="params">()</span> &#123;</span><br><span class="line">        boilWater();</span><br><span class="line">        brew();</span><br><span class="line">        pourInCup();</span><br><span class="line">        <span class="comment">// å¦‚æœé¡¾å®¢æƒ³è¦è°ƒæ–™ï¼Œæ‰è°ƒç”¨æ·»åŠ è°ƒæ–™çš„æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">if</span> (customerWantsCondiments()) &#123;</span><br><span class="line">            addCondiments();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å†²æ³¡ï¼Œå› ä¸ºå’–å•¡å’ŒèŒ¶çš„å†²æ³¡æ–¹æ³•ä¸ä¸€æ ·ï¼Œäº¤ç»™å­ç±»å»å®ç°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">brew</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ·»åŠ è°ƒå‘³å“ï¼Œå­ç±»å¯ä»¥è‡ªå®šä¹‰æ·»åŠ è°ƒå‘³å“</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">addCondiments</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è£…æ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pourInCup</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Pouring into cup&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * çƒ§æ°´</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">boilWater</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Boiling water&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿™æ˜¯ä¸€ä¸ªé’©å­ï¼Œå­ç±»å¯ä»¥è¦†ç›–è¿™ä¸ªæ–¹æ³•ï¼Œ ä½†ä¸è§å¾—è¦è¿™ä¹ˆåš</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">customerWantsCondiments</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨é’©å­"><a href="#ä½¿ç”¨é’©å­" class="headerlink" title="ä½¿ç”¨é’©å­"></a>ä½¿ç”¨é’©å­</h3><p>ä¸ºäº†ä½¿ç”¨é’©å­ï¼Œæˆ‘ä»¬åœ¨å­ç±»ä¸­è¦†ç›–å®ƒã€‚åœ¨è¿™é‡Œï¼Œé’©å­æ§åˆ¶äº†å’–å•¡å› é¥®æ–™æ˜¯å¦æ‰§è¡ŒæŸéƒ¨åˆ†ç®—æ³•ï¼›è¯´å¾—æ›´æ˜ç¡®ä¸€äº›ï¼Œå°±æ˜¯é¥®æ–™ä¸­æ˜¯å¦è¦åŠ è¿›è°ƒæ–™ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * èŒ¶</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-08-25 21:41:18</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TeaWithHook</span> <span class="keyword">extends</span> <span class="title class_">CaffeineBeverageWithHook</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">brew</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Steeping the tea&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">addCondiments</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Adding Lemon&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¦†ç›–é’©å­ï¼Œå®ç°è‡ªå·±çš„åŠŸèƒ½ï¼Œæ ¹æ®ç”¨æˆ·è¾“å…¥ï¼Œæ˜¯å¦éœ€è¦æ·»åŠ é…æ–™</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">customerWantsCondiments</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getUserInput().toLowerCase().startsWith(<span class="string">&quot;y&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–ç”¨æˆ·æ˜¯å¦è¦åŠ è°ƒæ–™</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">getUserInput</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;Would you like lemon with your tea (y/n)?&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(System.in));</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> in.readLine();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;no&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ‰§è¡Œæµ‹è¯•ç¨‹åº"><a href="#æ‰§è¡Œæµ‹è¯•ç¨‹åº" class="headerlink" title="æ‰§è¡Œæµ‹è¯•ç¨‹åº"></a>æ‰§è¡Œæµ‹è¯•ç¨‹åº</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BeverageTestDrive</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">TeaWithHook</span> <span class="variable">teaWithHook</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TeaWithHook</span>();</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;Make tea...&quot;</span>);</span><br><span class="line">        teaWithHook.prepareRecipe();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Make tea...</span><br><span class="line">Boiling water</span><br><span class="line">Steeping the tea</span><br><span class="line">Pouring into cup</span><br><span class="line">Would you like lemon with your tea (y/n)? y</span><br><span class="line">Adding Lemon</span><br></pre></td></tr></table></figure><h3 id="å¥½è±ååŸåˆ™"><a href="#å¥½è±ååŸåˆ™" class="headerlink" title="å¥½è±ååŸåˆ™"></a>å¥½è±ååŸåˆ™</h3><p>æˆ‘ä»¬æœ‰ä¸€ä¸ªæ–°çš„è®¾è®¡åŸåˆ™ï¼Œç§°ä¸ºå¥½è±ååŸåˆ™ï¼š</p><p><strong>å¥½è±ååŸåˆ™</strong>ï¼šåˆ«è°ƒç”¨ï¼ˆæ‰“ç”µè¯ç»™ï¼‰æˆ‘ä»¬ï¼Œæˆ‘ä»¬ä¼šè°ƒç”¨ï¼ˆæ‰“ç”µè¯ç»™ï¼‰ä½ ã€‚</p><h3 id="å¥½è±ååŸåˆ™å’Œæ¨¡æ¿æ–¹æ³•"><a href="#å¥½è±ååŸåˆ™å’Œæ¨¡æ¿æ–¹æ³•" class="headerlink" title="å¥½è±ååŸåˆ™å’Œæ¨¡æ¿æ–¹æ³•"></a>å¥½è±ååŸåˆ™å’Œæ¨¡æ¿æ–¹æ³•</h3><p>å¥½è±ååŸåˆ™å’Œæ¨¡æ¿æ–¹æ³•ä¹‹é—´çš„è¿æ¥è¿˜ç®—æ˜ç»†ï¼šå½“æˆ‘ä»¬è®¾è®¡æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ—¶ï¼Œæˆ‘ä»¬å‘Šè¯‰å­ç±»ï¼Œâ€œä¸è¦è°ƒç”¨æˆ‘ä»¬ï¼Œæˆ‘ä»¬ä¼šè°ƒç”¨ä½ â€ã€‚</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li>æ¨¡æ¿æ–¹æ³•å®šä¹‰äº†ç®—æ³•çš„æ­¥éª¤ï¼ŒæŠŠè¿™äº›æ­¥éª¤çš„å®ç°å»¶è¿Ÿåˆ°äº†å­ç±»</li><li>æ¨¡æ¿æ–¹æ³•æ¨¡å¼ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§ä»£ç å¤ç”¨çš„é‡è¦æŠ€å·§</li><li>æ¨¡æ¿æ–¹æ³•çš„æŠ½è±¡ç±»å¯ä»¥å®šä¹‰å…·ä½“æ–¹æ³•ã€æŠ½è±¡æ–¹æ³•å’Œé’©å­</li><li>æŠ½è±¡æ–¹æ³•ç”±å­ç±»å®ç°</li><li>é’©å­æ˜¯ä¸€ç§æ–¹æ³•ï¼Œå®ƒåœ¨æŠ½è±¡ç±»ä¸­ä¸åšäº‹ï¼Œæˆ–è€…åªåšé»˜è®¤çš„äº‹æƒ…ï¼Œå­ç±»å¯ä»¥é€‰æ‹©è¦ä¸è¦å»è¦†ç›–å®ƒ</li><li>ä¸ºäº†é˜²æ­¢å­ç±»æ”¹å˜æ¨¡æ¿æ–¹æ³•ä¸­çš„ç®—æ³•ï¼Œå¯ä»¥å°†æ¨¡æ¿æ–¹æ³•å£°æ˜ä¸ºfinal</li><li>å¥½è±ååŸåˆ™å‘Šè¯‰æˆ‘ä»¬ï¼Œå°†å†³ç­–æƒæ”¾åœ¨é«˜å±‚æ¨¡å—ä¸­ï¼Œä»¥ä¾¿å†³å®šå¦‚ä½•ä»¥åŠä½•æ—¶è°ƒç”¨åº•å±‚æ¨¡å—</li><li>ä½ å°†åœ¨çœŸå®ä¸–ç•Œä»£ç ä¸­çœ‹åˆ°æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„è®¸å¤šå˜ä½“ï¼Œä¸è¦æœŸå¾…å®ƒä»¬å…¨éƒ½æ˜¯ä¸€çœ¼å°±å¯ä»¥è¢«ä½ è®¤å‡ºçš„</li><li>ç­–ç•¥æ¨¡å¼å’Œæ¨¡æ¿æ–¹æ³•æ¨¡å¼éƒ½å°è£…ç®—æ³•ï¼Œä¸€ä¸ªç”¨ç»„åˆï¼Œä¸€ä¸ªç”¨ç»§æ‰¿</li><li>å·¥å‚æ–¹æ³•æ˜¯æ¨¡æ¿æ–¹æ³•çš„ä¸€ç§ç‰¹æ®Šç‰ˆæœ¬</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://github.com/user-attachments/assets/da2bd8a1-d8b6-45e1-9fe0-f798058c9c72&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://chivalry727.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="æ¨¡æ¿æ–¹æ³•æ¨¡å¼" scheme="https://chivalry727.github.io/tags/%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/"/>
    
      <category term="Template Method Design Pattern" scheme="https://chivalry727.github.io/tags/Template-Method-Design-Pattern/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼ä¹‹å¤–è§‚æ¨¡å¼</title>
    <link href="https://chivalry727.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/"/>
    <id>https://chivalry727.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/</id>
    <published>2020-08-24T11:51:43.000Z</published>
    <updated>2025-02-27T11:10:33.336Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://github.com/user-attachments/assets/a6f89cde-1d57-44af-889d-54f2cb534e2b"></p><span id="more"></span><h2 id="è®¾è®¡æ¨¡å¼ä¹‹å¤–è§‚æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼ä¹‹å¤–è§‚æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼ä¹‹å¤–è§‚æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼ä¹‹å¤–è§‚æ¨¡å¼</h2><h3 id="ç”œèœœçš„å®¶åº­å½±é™¢"><a href="#ç”œèœœçš„å®¶åº­å½±é™¢" class="headerlink" title="ç”œèœœçš„å®¶åº­å½±é™¢"></a>ç”œèœœçš„å®¶åº­å½±é™¢</h3><p>åœ¨æˆ‘ä»¬è¿›å…¥å¤–è§‚æ¨¡å¼çš„ç»†èŠ‚ä¹‹å‰ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸ªé£è¡Œå…¨ç¾çš„çƒ­æ½®ï¼šå»ºç«‹è‡ªå·±çš„å®¶åº­å½±é™¢ã€‚ä½ ç»„è£…äº†ä¸€å¥—æ€æ‰‹çº§çš„ç³»ç»Ÿï¼Œå†…å«DVDæ’­æ”¾å™¨ã€æŠ•å½±æœºã€è‡ªåŠ¨å±å¹•ã€ç¯ç»•ç«‹ä½“å£°ï¼Œç”šè‡³è¿˜æœ‰çˆ†ç±³èŠ±æœºã€‚</p><p>çœ‹çœ‹æˆ‘ä»¬çš„ç»„ä»¶ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åŠŸæ”¾</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-08-24 20:59:55</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Amplifier</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Tuner tuner;</span><br><span class="line">    <span class="keyword">private</span> DvdPlayer dvdPlayer;</span><br><span class="line">    <span class="keyword">private</span> CdPlayer cdPlayer;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">on</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Amplifier on&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">off</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Amplifier off&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCd</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Amplifier setCd&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDvd</span><span class="params">(DvdPlayer dvdPlayer)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dvdPlayer = dvdPlayer;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStereoSound</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Amplifier setStereoSound&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSurroundSound</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Amplifier setSurroundSound&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTuner</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Amplifier setTuner&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setVolume</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Amplifier setVolume &quot;</span> + i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * DVDæ’­æ”¾æœº</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-08-24 21:02:58</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DvdPlayer</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Amplifier amplifier;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">on</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;DvdPlayer on&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">off</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;DvdPlayer off&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eject</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;DvdPlayer eject&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pause</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;DvdPlayer pause&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">play</span><span class="params">(String movie)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;DvdPlayer play &quot;</span> + movie);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSurroundAudio</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;DvdPlayer setSurroundAudio&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTwoChannelAudio</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;DvdPlayer setTwoChannelAudio&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">stop</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;DvdPlayer stop&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŠ•å½±ä»ª</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-08-24 21:04:00</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Projector</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> DvdPlayer dvdPlayer;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">on</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Projector on&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">off</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Projector off&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">tvMode</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Projector tvMode&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">wideScreenMode</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Projector wideScreenMode&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å‰§é™¢ç¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-08-24 21:06:14</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TheaterLights</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">on</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;TheaterLights on&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">off</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;TheaterLights off&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dim</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;TheaterLights dim &quot;</span> + i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * çˆ†ç±³èŠ±</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-08-24 21:05:34</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PopcornPopper</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">on</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;PopcornPopper on&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">off</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;PopcornPopper off&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;PopcornPopper pop&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½ èŠ±äº†å‡ ä¸ªæ˜ŸæœŸå¸ƒçº¿ã€æŒ‚ä¸ŠæŠ•å½±æœºã€è¿æ¥æ‰€æœ‰çš„è£…ç½®å¹¶è¿›è¡Œå¾®è°ƒã€‚ç°åœ¨ï¼Œä½ å‡†å¤‡å¼€å§‹äº«å—ä¸€éƒ¨ç”µå½±â€¦â€¦</p><h3 id="è§‚èµç”µå½±ï¼ˆç”¨å›°éš¾çš„æ–¹å¼ï¼‰"><a href="#è§‚èµç”µå½±ï¼ˆç”¨å›°éš¾çš„æ–¹å¼ï¼‰" class="headerlink" title="è§‚èµç”µå½±ï¼ˆç”¨å›°éš¾çš„æ–¹å¼ï¼‰"></a>è§‚èµç”µå½±ï¼ˆç”¨å›°éš¾çš„æ–¹å¼ï¼‰</h3><p>æŒ‘é€‰ä¸€éƒ¨DVDå½±ç‰‡ï¼Œç„¶åå…ˆæ‰§è¡Œä¸€äº›ä»»åŠ¡ã€‚</p><p>æ‰“å¼€çˆ†ç±³èŠ±æœºã€å¼€å§‹çˆ†ç±³èŠ±ã€å°†ç¯å…‰è°ƒæš—ã€æ”¾ä¸‹å±å¹•ã€æ‰“å¼€æŠ•å½±æœºã€å°†æŠ•å½±æœº çš„è¾“å…¥åˆ‡æ¢åˆ°DVDã€å°†æŠ•å½±æœºè®¾ç½®åœ¨å®½å±æ¨¡å¼ã€æ‰“å¼€åŠŸæ”¾ã€å°†åŠŸæ”¾çš„è¾“å…¥è®¾ç½®ä¸ºDVDã€å°†åŠŸæ”¾è®¾ç½®ä¸ºç¯ç»•ç«‹ä½“å£°ã€è°ƒèŠ‚åŠŸæ”¾éŸ³é‡ã€æ‰“å¼€DVDæ’­æ”¾å™¨ã€å¼€å§‹æ’­æ”¾DVDã€‚ã€‚ã€‚</p><p>ç´¯æ­»äººäº†ï¼Œæ‰“å¼€è¿™ä¹ˆå¤šå¼€å…³ã€‚ã€‚ã€‚ã€‚æ²¡é”™çœ‹å®Œç”µå½±è¿˜è¦å°†è¿™äº›å…³æ‰ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å¤–è§‚æ¨¡å¼å¦‚ä½•æ¥è§£å†³è¿™å›¢æ··ä¹±ï¼Œå¥½è®©ä½ èƒ½è½»æ˜“çš„äº«å—ç”µå½±ã€‚ã€‚ã€‚</p><h3 id="æ„é€ å®¶åº­å½±é™¢çš„å¤–è§‚"><a href="#æ„é€ å®¶åº­å½±é™¢çš„å¤–è§‚" class="headerlink" title="æ„é€ å®¶åº­å½±é™¢çš„å¤–è§‚"></a>æ„é€ å®¶åº­å½±é™¢çš„å¤–è§‚</h3><p>è®©æˆ‘ä»¬é€æ­¥æ„é€ å®¶åº­å½±é™¢å¤–è§‚ï¼šç¬¬ä¸€æ­¥æ˜¯ä½¿ç”¨ç»„åˆè®©å¤–è§‚èƒ½å¤Ÿè®¿é—®å­ç³»ç»Ÿä¸­æ‰€æœ‰çš„ç»„ä»¶ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®¶åº­å½±é™¢</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.zxb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-08-24 21:09:03</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HomeTheaterFacade</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Amplifier amplifier;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Tuner tuner;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> DvdPlayer dvdPlayer;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> CdPlayer cdPlayer;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Projector projector;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> TheaterLights theaterLights;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Screen screen;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> PopcornPopper popcornPopper;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">HomeTheaterFacade</span><span class="params">(Amplifier amplifier, Tuner tuner, DvdPlayer dvdPlayer,</span></span><br><span class="line"><span class="params">                             CdPlayer cdPlayer, Projector projector,</span></span><br><span class="line"><span class="params">                             TheaterLights theaterLights, Screen screen,</span></span><br><span class="line"><span class="params">                             PopcornPopper popcornPopper)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.amplifier = amplifier;</span><br><span class="line">        <span class="built_in">this</span>.tuner = tuner;</span><br><span class="line">        <span class="built_in">this</span>.dvdPlayer = dvdPlayer;</span><br><span class="line">        <span class="built_in">this</span>.cdPlayer = cdPlayer;</span><br><span class="line">        <span class="built_in">this</span>.projector = projector;</span><br><span class="line">        <span class="built_in">this</span>.theaterLights = theaterLights;</span><br><span class="line">        <span class="built_in">this</span>.screen = screen;</span><br><span class="line">        <span class="built_in">this</span>.popcornPopper = popcornPopper;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†æˆ‘ä»¬ä¹‹å‰æ‰‹åŠ¨è¿›è¡Œçš„æ¯é¡¹ä»»åŠ¡ä¾æ¬¡å¤„ç†ã€‚è¯·æ³¨æ„ï¼Œæ¯é¡¹ä»»åŠ¡éƒ½æ˜¯å§”æ‰˜å­ç³»ç»Ÿä¸­ç›¸åº”çš„ç»„ä»¶å¤„ç†çš„</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">watchMovie</span><span class="params">(String movie)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Get Ready to watch a movie....&quot;</span>);</span><br><span class="line">        popcornPopper.on();</span><br><span class="line">        popcornPopper.pop();</span><br><span class="line">        theaterLights.dim(<span class="number">10</span>);</span><br><span class="line">        screen.down();</span><br><span class="line">        projector.on();</span><br><span class="line">        projector.wideScreenMode();</span><br><span class="line">        amplifier.on();</span><br><span class="line">        amplifier.setDvd(dvdPlayer);</span><br><span class="line">        amplifier.setSurroundSound();</span><br><span class="line">        amplifier.setVolume(<span class="number">5</span>);</span><br><span class="line">        dvdPlayer.on();</span><br><span class="line">        dvdPlayer.play(movie);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…³é—­ä¸€åˆ‡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">endMovie</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Shutting movie theater down...&quot;</span>);</span><br><span class="line">        popcornPopper.off();</span><br><span class="line">        theaterLights.on();</span><br><span class="line">        screen.up();</span><br><span class="line">        projector.off();</span><br><span class="line">        amplifier.off();</span><br><span class="line">        dvdPlayer.stop();</span><br><span class="line">        dvdPlayer.eject();</span><br><span class="line">        dvdPlayer.off();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è§‚èµç”µå½±ï¼ˆç”¨è½»æ¾çš„æ–¹å¼ï¼‰"><a href="#è§‚èµç”µå½±ï¼ˆç”¨è½»æ¾çš„æ–¹å¼ï¼‰" class="headerlink" title="è§‚èµç”µå½±ï¼ˆç”¨è½»æ¾çš„æ–¹å¼ï¼‰"></a>è§‚èµç”µå½±ï¼ˆç”¨è½»æ¾çš„æ–¹å¼ï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HomeTheaterTestDrive</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// å®ä¾‹åŒ–å„ç»„ä»¶</span></span><br><span class="line">        <span class="type">Amplifier</span> <span class="variable">amplifier</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Amplifier</span>();</span><br><span class="line">        <span class="type">Tuner</span> <span class="variable">tuner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Tuner</span>();</span><br><span class="line">        <span class="type">DvdPlayer</span> <span class="variable">dvdPlayer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DvdPlayer</span>();</span><br><span class="line">        <span class="type">CdPlayer</span> <span class="variable">cdPlayer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CdPlayer</span>();</span><br><span class="line">        <span class="type">Projector</span> <span class="variable">projector</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Projector</span>();</span><br><span class="line">        <span class="type">TheaterLights</span> <span class="variable">theaterLights</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TheaterLights</span>();</span><br><span class="line">        <span class="type">Screen</span> <span class="variable">screen</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Screen</span>();</span><br><span class="line">        <span class="type">PopcornPopper</span> <span class="variable">popcornPopper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PopcornPopper</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ ¹æ®å­ç³»ç»Ÿæ‰€æœ‰çš„ç»„ä»¶æ¥å®ä¾‹åŒ–å¤–è§‚</span></span><br><span class="line">        <span class="type">HomeTheaterFacade</span> <span class="variable">homeTheaterFacade</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HomeTheaterFacade</span>(amplifier, tuner, dvdPlayer, </span><br><span class="line">                                           cdPlayer, projector, theaterLights, screen, popcornPopper);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä½¿ç”¨ç®€åŒ–æ¥å£æ¥å¼€å¯ç”µå½±</span></span><br><span class="line">        homeTheaterFacade.watchMovie(<span class="string">&quot;Raiders of the Lost Ark&quot;</span>);</span><br><span class="line">        <span class="comment">// ç„¶åå…³é—­ç”µå½±</span></span><br><span class="line">        homeTheaterFacade.endMovie();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®šä¹‰å¤–è§‚æ¨¡å¼"><a href="#å®šä¹‰å¤–è§‚æ¨¡å¼" class="headerlink" title="å®šä¹‰å¤–è§‚æ¨¡å¼"></a>å®šä¹‰å¤–è§‚æ¨¡å¼</h3><p><strong>å¤–è§‚æ¨¡å¼</strong>æä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ï¼Œç”¨æ¥è®¿é—®å­ç³»ç»Ÿä¸­çš„ä¸€ç¾¤æ¥å£ã€‚å¤–è§‚å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè®©å­ç³»ç»Ÿæ›´å®¹æ˜“ä½¿ç”¨ã€‚</p><h3 id="â€œæœ€å°‘çŸ¥è¯†â€åŸåˆ™"><a href="#â€œæœ€å°‘çŸ¥è¯†â€åŸåˆ™" class="headerlink" title="â€œæœ€å°‘çŸ¥è¯†â€åŸåˆ™"></a>â€œæœ€å°‘çŸ¥è¯†â€åŸåˆ™</h3><p>æœ€å°‘çŸ¥è¯†åŸåˆ™å‘Šè¯‰æˆ‘ä»¬è¦å‡å°‘å¯¹è±¡ä¹‹é—´çš„äº¤äº’ï¼Œåªç•™ä¸‹å‡ ä¸ªâ€œå¯†å‹â€ã€‚è¿™ä¸ªåŸåˆ™é€šå¸¸æ˜¯è¿™ä¹ˆè¯´çš„ï¼š</p><p>æœ€å°‘çŸ¥è¯†åŸåˆ™ï¼šåªå’Œä½ çš„å¯†å‹è°ˆè¯ã€‚</p><p>è¿™ä¸ªåŸåˆ™å¸Œæœ›æˆ‘ä»¬åœ¨è®¾è®¡ä¸­ï¼Œä¸è¦è®©å¤ªå¤šçš„ç±»è€¦åˆåœ¨ä¸€èµ·ï¼Œå…å¾—ä¿®æ”¹ç³»ç»Ÿä¸­çš„ä¸€éƒ¨åˆ†ï¼Œä¼šå½±å“åˆ°å…¶ä»–éƒ¨åˆ†ã€‚å¦‚æœè®¸å¤šç±»ä¹‹é—´ç›¸äº’ä¾èµ–ï¼Œé‚£ä¹ˆè¿™ä¸ªç³»ç»Ÿå°±ä¼šå˜æˆä¸€ä¸ªæ˜“ç¢çš„ç³»ç»Ÿï¼Œå®ƒéœ€è¦èŠ±è®¸å¤šæˆæœ¬ç»´æŠ¤ï¼Œä¹Ÿä¼šå› ä¸ºå¤ªå¤æ‚è€Œä¸å®¹æ˜“è¢«å…¶ä»–äººç†è§£ã€‚</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li>å½“éœ€è¦ç®€åŒ–å¹¶ç»Ÿä¸€ä¸€ä¸ªå¾ˆå¤§çš„æ¥å£æˆ–åˆ™ä¸€ç¾¤å¤æ‚çš„æ¥å£æ—¶ï¼Œä½¿ç”¨å¤–è§‚</li><li>å¤–è§‚å°†å®¢æˆ·ä»ä¸€ä¸ªå¤æ‚çš„å­ç³»ç»Ÿä¸­è§£è€¦</li><li>å®ç°ä¸€ä¸ªå¤–è§‚ï¼Œéœ€è¦å°†å­ç³»ç»Ÿç»„åˆè¿›å¤–è§‚ä¸­ï¼Œç„¶åå°†å·¥ä½œå§”æ‰˜ç»™å­ç³»ç»Ÿæ‰§è¡Œ</li><li>ä½ å¯ä»¥ä¸ºä¸€ä¸ªå­ç³»ç»Ÿå®ç°ä¸€ä¸ªä»¥ä¸Šçš„å¤–è§‚</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://github.com/user-attachments/assets/a6f89cde-1d57-44af-889d-54f2cb534e2b&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="https://chivalry727.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="å¤–è§‚æ¨¡å¼" scheme="https://chivalry727.github.io/tags/%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/"/>
    
      <category term="Facade Design Pattern" scheme="https://chivalry727.github.io/tags/Facade-Design-Pattern/"/>
    
  </entry>
  
</feed>
